{"/Users/kainingxin/NodeJsWorkplace/auction/src/test/auctionControllerSpec.ts":{"path":"/Users/kainingxin/NodeJsWorkplace/auction/src/test/auctionControllerSpec.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":18},"end":{"line":3,"column":43}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":30}},"3":{"start":{"line":5,"column":17},"end":{"line":5,"column":36}},"4":{"start":{"line":6,"column":0},"end":{"line":28,"column":3}},"5":{"start":{"line":7,"column":4},"end":{"line":10,"column":7}},"6":{"start":{"line":8,"column":8},"end":{"line":8,"column":44}},"7":{"start":{"line":9,"column":8},"end":{"line":9,"column":46}},"8":{"start":{"line":11,"column":15},"end":{"line":11,"column":41}},"9":{"start":{"line":12,"column":4},"end":{"line":19,"column":7}},"10":{"start":{"line":13,"column":8},"end":{"line":18,"column":11}},"11":{"start":{"line":17,"column":12},"end":{"line":17,"column":53}},"12":{"start":{"line":20,"column":4},"end":{"line":27,"column":7}},"13":{"start":{"line":21,"column":8},"end":{"line":26,"column":11}},"14":{"start":{"line":25,"column":12},"end":{"line":25,"column":53}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":35},"end":{"line":6,"column":36}},"loc":{"start":{"line":6,"column":47},"end":{"line":28,"column":1}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":11},"end":{"line":7,"column":12}},"loc":{"start":{"line":7,"column":29},"end":{"line":10,"column":5}},"line":7},"2":{"name":"(anonymous_2)","decl":{"start":{"line":12,"column":49},"end":{"line":12,"column":50}},"loc":{"start":{"line":12,"column":61},"end":{"line":19,"column":5}},"line":12},"3":{"name":"(anonymous_3)","decl":{"start":{"line":16,"column":16},"end":{"line":16,"column":17}},"loc":{"start":{"line":16,"column":23},"end":{"line":18,"column":9}},"line":16},"4":{"name":"(anonymous_4)","decl":{"start":{"line":20,"column":49},"end":{"line":20,"column":50}},"loc":{"start":{"line":20,"column":61},"end":{"line":27,"column":5}},"line":20},"5":{"name":"(anonymous_5)","decl":{"start":{"line":24,"column":16},"end":{"line":24,"column":17}},"loc":{"start":{"line":24,"column":23},"end":{"line":26,"column":9}},"line":24}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1},"f":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1},"b":{},"inputSourceMap":{"version":3,"file":"/Users/kainingxin/NodeJsWorkplace/auction/src/test/auctionControllerSpec.ts","sources":["/Users/kainingxin/NodeJsWorkplace/auction/src/test/auctionControllerSpec.ts"],"names":[],"mappings":";;AAAA,4CAAmD;AACnD,+BAA8B;AAG9B,qCAA2C;AAE3C,QAAQ,CAAC,wBAAwB,EAAG,KAAK,IAAI,EAAE;IAC3C,MAAM,CAAC,KAAK;QACR,MAAM,IAAA,sBAAY,GAAE,CAAA;QACpB,MAAM,IAAA,wBAAe,GAAE,CAAA;IAC3B,CAAC,CAAC,CAAA;IAEF,MAAM,EAAE,GAAG,0BAA0B,CAAC;IAGtC,EAAE,CAAC,wCAAwC,EAAC,KAAK,IAAG,EAAE;QAClD,MAAM,aAAG,CAAC,MAAM,CAAC;YACb,MAAM,EAAE,KAAK;YACb,GAAG,EAAE,cAAc;SACtB,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;YACV,aAAM,CAAC,KAAK,CAAC,GAAG,CAAC,UAAU,EAAC,GAAG,CAAC,CAAA;QACpC,CAAC,CAAC,CAAA;IACN,CAAC,CAAC,CAAA;IAEF,EAAE,CAAC,wCAAwC,EAAC,KAAK,IAAG,EAAE;QAClD,MAAM,aAAG,CAAC,MAAM,CAAC;YACb,MAAM,EAAE,KAAK;YACb,GAAG,EAAE,gBAAgB,EAAE,EAAE;SAC5B,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;YACV,aAAM,CAAC,KAAK,CAAC,GAAG,CAAC,UAAU,EAAC,GAAG,CAAC,CAAA;QACpC,CAAC,CAAC,CAAA;IACN,CAAC,CAAC,CAAA;AAEN,CAAC,CAAC,CAAA","sourcesContent":["import { app, startFastify } from \"../lib/fastify\";\nimport { assert } from \"chai\";\nimport { Good } from \"../models/good\";\nimport { Schema } from \"mongoose\";\nimport { dataBaseConnect } from \"./helper\";\n\ndescribe(\"test auctionController\",  async () => {\n    before(async function(){\n        await startFastify()\n        await dataBaseConnect()\n    })\n\n    const id = \"622cc7332b19ff745c9d36bc\";\n\n\n    it(\"when findAllAuctions should return 200\",async ()=>{\n        await app.inject({\n            method: 'GET',\n            url: `/v1/auctions`\n        }).then(rep => {\n            assert.equal(rep.statusCode,200)\n        })\n    })\n     \n    it(\"when findAuctionById should return 200\",async ()=>{\n        await app.inject({\n            method: 'GET',\n            url: `/v1/auctions/${id}`\n        }).then(rep => {\n            assert.equal(rep.statusCode,200)\n        })\n    })\n\n})\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"50f9ac8a24f3e8196609621efb67f5d727ed7046","contentHash":"375a879a3d6135438b3ee3d4c1f842feaed9ce4273da03191887511f2474fa57"},"/Users/kainingxin/NodeJsWorkplace/auction/src/lib/fastify.ts":{"path":"/Users/kainingxin/NodeJsWorkplace/auction/src/lib/fastify.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":4},"end":{"line":4,"column":89}},"4":{"start":{"line":4,"column":71},"end":{"line":4,"column":83}},"5":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"6":{"start":{"line":6,"column":26},"end":{"line":6,"column":33}},"7":{"start":{"line":7,"column":4},"end":{"line":7,"column":17}},"8":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"9":{"start":{"line":10,"column":4},"end":{"line":10,"column":72}},"10":{"start":{"line":12,"column":4},"end":{"line":12,"column":21}},"11":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"12":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"13":{"start":{"line":15,"column":31},"end":{"line":15,"column":42}},"14":{"start":{"line":16,"column":17},"end":{"line":16,"column":19}},"15":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"16":{"start":{"line":17,"column":21},"end":{"line":17,"column":141}},"17":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"18":{"start":{"line":17,"column":109},"end":{"line":17,"column":141}},"19":{"start":{"line":18,"column":4},"end":{"line":18,"column":36}},"20":{"start":{"line":19,"column":4},"end":{"line":19,"column":18}},"21":{"start":{"line":21,"column":22},"end":{"line":23,"column":1}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":62}},"23":{"start":{"line":24,"column":0},"end":{"line":24,"column":62}},"24":{"start":{"line":25,"column":0},"end":{"line":25,"column":44}},"25":{"start":{"line":26,"column":16},"end":{"line":26,"column":48}},"26":{"start":{"line":27,"column":11},"end":{"line":27,"column":38}},"27":{"start":{"line":28,"column":22},"end":{"line":28,"column":61}},"28":{"start":{"line":29,"column":25},"end":{"line":29,"column":67}},"29":{"start":{"line":30,"column":21},"end":{"line":30,"column":69}},"30":{"start":{"line":31,"column":23},"end":{"line":31,"column":73}},"31":{"start":{"line":32,"column":24},"end":{"line":32,"column":75}},"32":{"start":{"line":33,"column":26},"end":{"line":33,"column":69}},"33":{"start":{"line":34,"column":18},"end":{"line":34,"column":38}},"34":{"start":{"line":35,"column":17},"end":{"line":35,"column":51}},"35":{"start":{"line":36,"column":37},"end":{"line":36,"column":102}},"36":{"start":{"line":37,"column":35},"end":{"line":37,"column":98}},"37":{"start":{"line":38,"column":35},"end":{"line":38,"column":98}},"38":{"start":{"line":39,"column":37},"end":{"line":39,"column":102}},"39":{"start":{"line":40,"column":34},"end":{"line":40,"column":96}},"40":{"start":{"line":41,"column":30},"end":{"line":41,"column":88}},"41":{"start":{"line":42,"column":20},"end":{"line":42,"column":67}},"42":{"start":{"line":43,"column":24},"end":{"line":43,"column":75}},"43":{"start":{"line":44,"column":23},"end":{"line":44,"column":60}},"44":{"start":{"line":45,"column":0},"end":{"line":94,"column":3}},"45":{"start":{"line":71,"column":4},"end":{"line":93,"column":5}},"46":{"start":{"line":72,"column":8},"end":{"line":72,"column":43}},"47":{"start":{"line":74,"column":9},"end":{"line":93,"column":5}},"48":{"start":{"line":75,"column":8},"end":{"line":75,"column":112}},"49":{"start":{"line":76,"column":8},"end":{"line":76,"column":77}},"50":{"start":{"line":78,"column":9},"end":{"line":93,"column":5}},"51":{"start":{"line":79,"column":8},"end":{"line":79,"column":112}},"52":{"start":{"line":80,"column":8},"end":{"line":80,"column":95}},"53":{"start":{"line":82,"column":9},"end":{"line":93,"column":5}},"54":{"start":{"line":83,"column":8},"end":{"line":83,"column":112}},"55":{"start":{"line":84,"column":8},"end":{"line":84,"column":78}},"56":{"start":{"line":86,"column":9},"end":{"line":93,"column":5}},"57":{"start":{"line":87,"column":8},"end":{"line":87,"column":112}},"58":{"start":{"line":88,"column":8},"end":{"line":88,"column":31}},"59":{"start":{"line":91,"column":8},"end":{"line":91,"column":127}},"60":{"start":{"line":92,"column":8},"end":{"line":92,"column":77}},"61":{"start":{"line":95,"column":21},"end":{"line":104,"column":1}},"62":{"start":{"line":96,"column":4},"end":{"line":103,"column":5}},"63":{"start":{"line":97,"column":8},"end":{"line":97,"column":69}},"64":{"start":{"line":98,"column":8},"end":{"line":98,"column":30}},"65":{"start":{"line":101,"column":8},"end":{"line":101,"column":35}},"66":{"start":{"line":102,"column":8},"end":{"line":102,"column":24}},"67":{"start":{"line":105,"column":0},"end":{"line":105,"column":36}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":5,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":58},"end":{"line":4,"column":59}},"loc":{"start":{"line":4,"column":69},"end":{"line":4,"column":85}},"line":4},"2":{"name":"(anonymous_2)","decl":{"start":{"line":5,"column":6},"end":{"line":5,"column":7}},"loc":{"start":{"line":5,"column":28},"end":{"line":8,"column":1}},"line":5},"3":{"name":"(anonymous_3)","decl":{"start":{"line":9,"column":80},"end":{"line":9,"column":81}},"loc":{"start":{"line":9,"column":95},"end":{"line":11,"column":1}},"line":9},"4":{"name":"(anonymous_4)","decl":{"start":{"line":11,"column":5},"end":{"line":11,"column":6}},"loc":{"start":{"line":11,"column":20},"end":{"line":13,"column":1}},"line":11},"5":{"name":"(anonymous_5)","decl":{"start":{"line":14,"column":50},"end":{"line":14,"column":51}},"loc":{"start":{"line":14,"column":65},"end":{"line":20,"column":1}},"line":14},"6":{"name":"(anonymous_6)","decl":{"start":{"line":21,"column":56},"end":{"line":21,"column":57}},"loc":{"start":{"line":21,"column":71},"end":{"line":23,"column":1}},"line":21},"7":{"name":"(anonymous_7)","decl":{"start":{"line":69,"column":21},"end":{"line":69,"column":22}},"loc":{"start":{"line":69,"column":48},"end":{"line":94,"column":1}},"line":69},"8":{"name":"(anonymous_8)","decl":{"start":{"line":95,"column":21},"end":{"line":95,"column":22}},"loc":{"start":{"line":95,"column":33},"end":{"line":104,"column":1}},"line":95}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":8,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":8,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":5,"column":1}},{"start":{"line":5,"column":6},"end":{"line":8,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"type":"if","locations":[{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},{"start":{"line":6,"column":4},"end":{"line":6,"column":33}}],"line":6},"4":{"loc":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"type":"binary-expr","locations":[{"start":{"line":9,"column":26},"end":{"line":9,"column":30}},{"start":{"line":9,"column":34},"end":{"line":9,"column":57}},{"start":{"line":9,"column":63},"end":{"line":13,"column":1}}],"line":9},"5":{"loc":{"start":{"line":9,"column":63},"end":{"line":13,"column":1}},"type":"cond-expr","locations":[{"start":{"line":9,"column":80},"end":{"line":11,"column":1}},{"start":{"line":11,"column":5},"end":{"line":13,"column":1}}],"line":9},"6":{"loc":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"type":"binary-expr","locations":[{"start":{"line":14,"column":20},"end":{"line":14,"column":24}},{"start":{"line":14,"column":28},"end":{"line":14,"column":45}},{"start":{"line":14,"column":50},"end":{"line":20,"column":1}}],"line":14},"7":{"loc":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},{"start":{"line":15,"column":4},"end":{"line":15,"column":42}}],"line":15},"8":{"loc":{"start":{"line":15,"column":8},"end":{"line":15,"column":29}},"type":"binary-expr","locations":[{"start":{"line":15,"column":8},"end":{"line":15,"column":11}},{"start":{"line":15,"column":15},"end":{"line":15,"column":29}}],"line":15},"9":{"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},{"start":{"line":17,"column":4},"end":{"line":17,"column":141}}],"line":17},"10":{"loc":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},{"start":{"line":17,"column":40},"end":{"line":17,"column":141}}],"line":17},"11":{"loc":{"start":{"line":17,"column":44},"end":{"line":17,"column":107}},"type":"binary-expr","locations":[{"start":{"line":17,"column":44},"end":{"line":17,"column":59}},{"start":{"line":17,"column":63},"end":{"line":17,"column":107}}],"line":17},"12":{"loc":{"start":{"line":21,"column":22},"end":{"line":23,"column":1}},"type":"binary-expr","locations":[{"start":{"line":21,"column":23},"end":{"line":21,"column":27}},{"start":{"line":21,"column":31},"end":{"line":21,"column":51}},{"start":{"line":21,"column":56},"end":{"line":23,"column":1}}],"line":21},"13":{"loc":{"start":{"line":22,"column":11},"end":{"line":22,"column":61}},"type":"cond-expr","locations":[{"start":{"line":22,"column":37},"end":{"line":22,"column":40}},{"start":{"line":22,"column":43},"end":{"line":22,"column":61}}],"line":22},"14":{"loc":{"start":{"line":22,"column":12},"end":{"line":22,"column":33}},"type":"binary-expr","locations":[{"start":{"line":22,"column":12},"end":{"line":22,"column":15}},{"start":{"line":22,"column":19},"end":{"line":22,"column":33}}],"line":22},"15":{"loc":{"start":{"line":71,"column":4},"end":{"line":93,"column":5}},"type":"if","locations":[{"start":{"line":71,"column":4},"end":{"line":93,"column":5}},{"start":{"line":71,"column":4},"end":{"line":93,"column":5}}],"line":71},"16":{"loc":{"start":{"line":74,"column":9},"end":{"line":93,"column":5}},"type":"if","locations":[{"start":{"line":74,"column":9},"end":{"line":93,"column":5}},{"start":{"line":74,"column":9},"end":{"line":93,"column":5}}],"line":74},"17":{"loc":{"start":{"line":75,"column":51},"end":{"line":75,"column":110}},"type":"cond-expr","locations":[{"start":{"line":75,"column":88},"end":{"line":75,"column":94}},{"start":{"line":75,"column":97},"end":{"line":75,"column":110}}],"line":75},"18":{"loc":{"start":{"line":75,"column":51},"end":{"line":75,"column":85}},"type":"binary-expr","locations":[{"start":{"line":75,"column":51},"end":{"line":75,"column":65}},{"start":{"line":75,"column":69},"end":{"line":75,"column":85}}],"line":75},"19":{"loc":{"start":{"line":78,"column":9},"end":{"line":93,"column":5}},"type":"if","locations":[{"start":{"line":78,"column":9},"end":{"line":93,"column":5}},{"start":{"line":78,"column":9},"end":{"line":93,"column":5}}],"line":78},"20":{"loc":{"start":{"line":79,"column":51},"end":{"line":79,"column":110}},"type":"cond-expr","locations":[{"start":{"line":79,"column":88},"end":{"line":79,"column":94}},{"start":{"line":79,"column":97},"end":{"line":79,"column":110}}],"line":79},"21":{"loc":{"start":{"line":79,"column":51},"end":{"line":79,"column":85}},"type":"binary-expr","locations":[{"start":{"line":79,"column":51},"end":{"line":79,"column":65}},{"start":{"line":79,"column":69},"end":{"line":79,"column":85}}],"line":79},"22":{"loc":{"start":{"line":82,"column":9},"end":{"line":93,"column":5}},"type":"if","locations":[{"start":{"line":82,"column":9},"end":{"line":93,"column":5}},{"start":{"line":82,"column":9},"end":{"line":93,"column":5}}],"line":82},"23":{"loc":{"start":{"line":83,"column":51},"end":{"line":83,"column":110}},"type":"cond-expr","locations":[{"start":{"line":83,"column":88},"end":{"line":83,"column":94}},{"start":{"line":83,"column":97},"end":{"line":83,"column":110}}],"line":83},"24":{"loc":{"start":{"line":83,"column":51},"end":{"line":83,"column":85}},"type":"binary-expr","locations":[{"start":{"line":83,"column":51},"end":{"line":83,"column":65}},{"start":{"line":83,"column":69},"end":{"line":83,"column":85}}],"line":83},"25":{"loc":{"start":{"line":86,"column":9},"end":{"line":93,"column":5}},"type":"if","locations":[{"start":{"line":86,"column":9},"end":{"line":93,"column":5}},{"start":{"line":86,"column":9},"end":{"line":93,"column":5}}],"line":86},"26":{"loc":{"start":{"line":87,"column":51},"end":{"line":87,"column":110}},"type":"cond-expr","locations":[{"start":{"line":87,"column":88},"end":{"line":87,"column":94}},{"start":{"line":87,"column":97},"end":{"line":87,"column":110}}],"line":87},"27":{"loc":{"start":{"line":87,"column":51},"end":{"line":87,"column":85}},"type":"binary-expr","locations":[{"start":{"line":87,"column":51},"end":{"line":87,"column":65}},{"start":{"line":87,"column":69},"end":{"line":87,"column":85}}],"line":87},"28":{"loc":{"start":{"line":91,"column":66},"end":{"line":91,"column":125}},"type":"cond-expr","locations":[{"start":{"line":91,"column":103},"end":{"line":91,"column":109}},{"start":{"line":91,"column":112},"end":{"line":91,"column":125}}],"line":91},"29":{"loc":{"start":{"line":91,"column":66},"end":{"line":91,"column":100}},"type":"binary-expr","locations":[{"start":{"line":91,"column":66},"end":{"line":91,"column":80}},{"start":{"line":91,"column":84},"end":{"line":91,"column":100}}],"line":91}},"s":{"0":1,"1":138,"2":138,"3":138,"4":38,"5":0,"6":0,"7":0,"8":1,"9":8,"10":0,"11":1,"12":8,"13":0,"14":8,"15":8,"16":8,"17":139,"18":138,"19":8,"20":8,"21":1,"22":9,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":1,"62":1,"63":1,"64":1,"65":0,"66":0,"67":1},"f":{"0":138,"1":38,"2":0,"3":8,"4":0,"5":8,"6":9,"7":0,"8":1},"b":{"0":[1,1,1],"1":[1,0],"2":[138,0],"3":[0,0],"4":[1,1,1],"5":[1,0],"6":[1,1,1],"7":[0,8],"8":[8,8],"9":[8,0],"10":[138,1],"11":[139,138],"12":[1,1,1],"13":[5,4],"14":[9,9],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/kainingxin/NodeJsWorkplace/auction/src/lib/fastify.ts","sources":["/Users/kainingxin/NodeJsWorkplace/auction/src/lib/fastify.ts"],"names":[],"mappings":"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","sourcesContent":["import * as fastify from \"fastify\";\nimport * as fs from 'fs';\nimport jwt from 'fastify-jwt';\nimport cookie from 'fastify-cookie';\nimport goodRoutes from '../routes/goodRoutes';\nimport bidderRoutes from \"../routes/bidderRoutes\";\nimport auctionRoutes from \"../routes/auctionRoutes\";\nimport swagger from 'fastify-swagger';\nimport {Options} from './swagger'\nimport config from 'config'\nimport * as auctionLimitedResponseSchema from '../schemas/auction.limited.response.json';\nimport * as auctionBasicResponseSchema from '../schemas/auction.basic.response.json';\nimport * as goodCompleteResponseSchema from '../schemas/good.complete.response.json';\nimport * as bidderCompleteResponseSchema from '../schemas/bidder.complete.response.json'\nimport * as goodLimitedResponseSchema from '../schemas/good.limited.response.json';\nimport * as getGoodResponseSchema from '../schemas/good.get.response.json'\n\nimport authRoutes from \"../routes/authRoute\";\nimport biddingRoutes from \"../routes/biddingRoutes\";\n\nimport { EntityNotFoundError, InvalidInputError, InvalidPriceError, UnauthorizedError } from \"../models/oth/customErrors\";\nexport const app = fastify.default({\n    logger: true\n})\n.register(jwt,{\n  secret: {\n    private: fs.readFileSync('config/private.key'),\n    public: fs.readFileSync('config/public.key'),\n  },\n  sign: { algorithm: 'RS256' }\n})\n.register(cookie)\n.register(swagger,Options)\n.register(auctionRoutes,{prefix:'/v1/auctions'})\n.register(goodRoutes,{prefix:\"/v1/goods\"})\n.register(bidderRoutes,{prefix:\"v1/bidders\"})\n.register(authRoutes,{prefix:'/v1/auth'})\n.register(biddingRoutes,{prefix:'/v1/bidding'})\n//register schema\n.addSchema(auctionBasicResponseSchema)\n.addSchema(auctionLimitedResponseSchema)\n.addSchema(goodCompleteResponseSchema)\n.addSchema(bidderCompleteResponseSchema)\n.addSchema(goodLimitedResponseSchema)\n.addSchema(getGoodResponseSchema)\n.setErrorHandler((error, request, reply) => {\n    // based on https://github.com/fastify/fastify/blob/1e94070992d911a81a26597c25f2d35ae65f3d91/fastify.js#L74\n    if (error instanceof UnauthorizedError) {\n      void reply.status(422).send(error)\n    } else if (error instanceof EntityNotFoundError) {\n      reply.log.info({ res: reply, err: error }, error?.message)\n      void reply.status(404).send(new Error('Requested entity not found'))\n    } else if (error instanceof InvalidPriceError){\n      reply.log.info({ res: reply, err: error }, error?.message)\n      void reply.status(404).send(new Error('Price is lower than or equal to actual price'))\n    } else if (error instanceof InvalidInputError){\n      reply.log.info({ res: reply, err: error }, error?.message)\n      void reply.status(404).send(new Error('Input contains invalid data'))\n    }else if (reply.statusCode < 500) {\n      reply.log.info({ res: reply, err: error }, error?.message)\n      void reply.send(error)\n    } else {\n      reply.log.error({ req: request, res: reply, err: error }, error?.message)\n      void reply.send(new Error('Internal Server Error, message dropped'))\n    }\n  })\n\n\n\nexport const startFastify = async (): Promise<void> => {\n\ttry {\n\t\tawait app.listen(config.get(\"serverPort\"));\n\t\tapp.swagger();\n\t} catch (err) {\n\t\tapp.log.error(err);\n\t\tprocess.exit(1);\n\t}\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"abcb1fbe289feb75cba3146a26977ad52d8d0b37","contentHash":"4af79bc344a5c77df4edc822fbe574960d0a7062b93736783367006fb3f18142"},"/Users/kainingxin/NodeJsWorkplace/auction/src/routes/goodRoutes.ts":{"path":"/Users/kainingxin/NodeJsWorkplace/auction/src/routes/goodRoutes.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":4},"end":{"line":4,"column":89}},"4":{"start":{"line":4,"column":71},"end":{"line":4,"column":83}},"5":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"6":{"start":{"line":6,"column":26},"end":{"line":6,"column":33}},"7":{"start":{"line":7,"column":4},"end":{"line":7,"column":17}},"8":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"9":{"start":{"line":10,"column":4},"end":{"line":10,"column":72}},"10":{"start":{"line":12,"column":4},"end":{"line":12,"column":21}},"11":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"12":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"13":{"start":{"line":15,"column":31},"end":{"line":15,"column":42}},"14":{"start":{"line":16,"column":17},"end":{"line":16,"column":19}},"15":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"16":{"start":{"line":17,"column":21},"end":{"line":17,"column":141}},"17":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"18":{"start":{"line":17,"column":109},"end":{"line":17,"column":141}},"19":{"start":{"line":18,"column":4},"end":{"line":18,"column":36}},"20":{"start":{"line":19,"column":4},"end":{"line":19,"column":18}},"21":{"start":{"line":21,"column":22},"end":{"line":23,"column":1}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":62}},"23":{"start":{"line":24,"column":0},"end":{"line":24,"column":62}},"24":{"start":{"line":25,"column":23},"end":{"line":25,"column":77}},"25":{"start":{"line":26,"column":33},"end":{"line":26,"column":94}},"26":{"start":{"line":27,"column":42},"end":{"line":27,"column":112}},"27":{"start":{"line":28,"column":28},"end":{"line":28,"column":84}},"28":{"start":{"line":29,"column":14},"end":{"line":29,"column":56}},"29":{"start":{"line":31,"column":4},"end":{"line":41,"column":7}},"30":{"start":{"line":42,"column":4},"end":{"line":61,"column":7}},"31":{"start":{"line":62,"column":4},"end":{"line":75,"column":7}},"32":{"start":{"line":76,"column":4},"end":{"line":89,"column":7}},"33":{"start":{"line":90,"column":4},"end":{"line":102,"column":7}},"34":{"start":{"line":104,"column":0},"end":{"line":104,"column":29}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":5,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":58},"end":{"line":4,"column":59}},"loc":{"start":{"line":4,"column":69},"end":{"line":4,"column":85}},"line":4},"2":{"name":"(anonymous_2)","decl":{"start":{"line":5,"column":6},"end":{"line":5,"column":7}},"loc":{"start":{"line":5,"column":28},"end":{"line":8,"column":1}},"line":5},"3":{"name":"(anonymous_3)","decl":{"start":{"line":9,"column":80},"end":{"line":9,"column":81}},"loc":{"start":{"line":9,"column":95},"end":{"line":11,"column":1}},"line":9},"4":{"name":"(anonymous_4)","decl":{"start":{"line":11,"column":5},"end":{"line":11,"column":6}},"loc":{"start":{"line":11,"column":20},"end":{"line":13,"column":1}},"line":11},"5":{"name":"(anonymous_5)","decl":{"start":{"line":14,"column":50},"end":{"line":14,"column":51}},"loc":{"start":{"line":14,"column":65},"end":{"line":20,"column":1}},"line":14},"6":{"name":"(anonymous_6)","decl":{"start":{"line":21,"column":56},"end":{"line":21,"column":57}},"loc":{"start":{"line":21,"column":71},"end":{"line":23,"column":1}},"line":21},"7":{"name":"goodRoutes","decl":{"start":{"line":30,"column":15},"end":{"line":30,"column":25}},"loc":{"start":{"line":30,"column":35},"end":{"line":103,"column":1}},"line":30}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":8,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":8,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":5,"column":1}},{"start":{"line":5,"column":6},"end":{"line":8,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"type":"if","locations":[{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},{"start":{"line":6,"column":4},"end":{"line":6,"column":33}}],"line":6},"4":{"loc":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"type":"binary-expr","locations":[{"start":{"line":9,"column":26},"end":{"line":9,"column":30}},{"start":{"line":9,"column":34},"end":{"line":9,"column":57}},{"start":{"line":9,"column":63},"end":{"line":13,"column":1}}],"line":9},"5":{"loc":{"start":{"line":9,"column":63},"end":{"line":13,"column":1}},"type":"cond-expr","locations":[{"start":{"line":9,"column":80},"end":{"line":11,"column":1}},{"start":{"line":11,"column":5},"end":{"line":13,"column":1}}],"line":9},"6":{"loc":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"type":"binary-expr","locations":[{"start":{"line":14,"column":20},"end":{"line":14,"column":24}},{"start":{"line":14,"column":28},"end":{"line":14,"column":45}},{"start":{"line":14,"column":50},"end":{"line":20,"column":1}}],"line":14},"7":{"loc":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},{"start":{"line":15,"column":4},"end":{"line":15,"column":42}}],"line":15},"8":{"loc":{"start":{"line":15,"column":8},"end":{"line":15,"column":29}},"type":"binary-expr","locations":[{"start":{"line":15,"column":8},"end":{"line":15,"column":11}},{"start":{"line":15,"column":15},"end":{"line":15,"column":29}}],"line":15},"9":{"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},{"start":{"line":17,"column":4},"end":{"line":17,"column":141}}],"line":17},"10":{"loc":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},{"start":{"line":17,"column":40},"end":{"line":17,"column":141}}],"line":17},"11":{"loc":{"start":{"line":17,"column":44},"end":{"line":17,"column":107}},"type":"binary-expr","locations":[{"start":{"line":17,"column":44},"end":{"line":17,"column":59}},{"start":{"line":17,"column":63},"end":{"line":17,"column":107}}],"line":17},"12":{"loc":{"start":{"line":21,"column":22},"end":{"line":23,"column":1}},"type":"binary-expr","locations":[{"start":{"line":21,"column":23},"end":{"line":21,"column":27}},{"start":{"line":21,"column":31},"end":{"line":21,"column":51}},{"start":{"line":21,"column":56},"end":{"line":23,"column":1}}],"line":21},"13":{"loc":{"start":{"line":22,"column":11},"end":{"line":22,"column":61}},"type":"cond-expr","locations":[{"start":{"line":22,"column":37},"end":{"line":22,"column":40}},{"start":{"line":22,"column":43},"end":{"line":22,"column":61}}],"line":22},"14":{"loc":{"start":{"line":22,"column":12},"end":{"line":22,"column":33}},"type":"binary-expr","locations":[{"start":{"line":22,"column":12},"end":{"line":22,"column":15}},{"start":{"line":22,"column":19},"end":{"line":22,"column":33}}],"line":22}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1,"9":0,"10":0,"11":1,"12":2,"13":2,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1,"22":3,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":2,"6":3,"7":1},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[1,1,1],"5":[1,0],"6":[1,1,1],"7":[2,0],"8":[2,2],"9":[0,0],"10":[0,0],"11":[0,0],"12":[1,1,1],"13":[0,3],"14":[3,3]},"inputSourceMap":{"version":3,"file":"/Users/kainingxin/NodeJsWorkplace/auction/src/routes/goodRoutes.ts","sources":["/Users/kainingxin/NodeJsWorkplace/auction/src/routes/goodRoutes.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AACA,8EAA+D;AAC/D,+FAAqE;AACrE,iHAA0F;AAC1F,qFAA4D;AAC5D,yDAA2C;AAC5B,KAAK,UAAU,UAAU,CAAC,OAAuB;IAE9D,OAAO,CAAC,GAAG,CAAC,GAAG,EAAC;QACjB,MAAM,EAAC;YACN,WAAW,EAAE,gBAAgB;YAC7B,IAAI,EAAE,CAAC,MAAM,CAAC;YACd,OAAO,EAAE,gBAAgB;YACzB,QAAQ,EAAE;gBACR,GAAG,EAAE,gCAAqB;aAC3B;SACC;QACD,OAAO,EAAE,cAAc,CAAC,WAAW;KACpC,CAAC,CAAA;IAED,OAAO,CAAC,GAAG,CAAC,MAAM,EAAC;QACjB,MAAM,EAAC;YACL,WAAW,EAAE,0BAA0B;YAC1C,IAAI,EAAE,CAAC,MAAM,CAAC;YACd,OAAO,EAAE,iBAAiB;YAC1B,MAAM,EAAE;gBACP,IAAI,EAAE,QAAQ;gBACd,UAAU,EAAE;oBACX,EAAE,EAAE;wBACH,IAAI,EAAE,QAAQ;wBACd,WAAW,EAAE,YAAY;qBACzB;iBACD;aACD;YAED,QAAQ,EAAE;gBACT,GAAG,EAAE,gCAAqB;aAC1B;SACC;QACD,OAAO,EAAE,cAAc,CAAC,WAAW;KACpC,CAAC,CAAA;IAEF,OAAO,CAAC,IAAI,CAAC,GAAG,EAAC;QAChB,MAAM,EAAC;YACR,WAAW,EAAE,iBAAiB;YAC9B,IAAI,EAAE,CAAC,MAAM,CAAC;YACd,IAAI,EAAE,2BAAiB;YACvB,QAAQ,EAAE;gBACT,GAAG,EAAE,yCAAiC;aACtC;SACC;QACD,UAAU,EAAE;YACX,KAAK,CAAC,oBAAoB;SAC1B;QACD,OAAO,EAAE,cAAc,CAAC,OAAO;KAC/B,CAAC,CAAA;IAGF,OAAO,CAAC,KAAK,CAAC,MAAM,EAAC;QACtB,MAAM,EAAC;YACN,WAAW,EAAE,mBAAmB;YAChC,IAAI,EAAE,CAAC,MAAM,CAAC;YACd,IAAI,EAAE,2BAAiB;YACvB,QAAQ,EAAE;gBACT,GAAG,EAAE,yCAAiC;aACtC;SACD;QACD,UAAU,EAAE;YACX,KAAK,CAAC,oBAAoB;SAC1B;QACD,OAAO,EAAE,cAAc,CAAC,cAAc;KACpC,CAAC,CAAA;IAEF,OAAO,CAAC,MAAM,CAAC,MAAM,EAAC;QACrB,MAAM,EAAC;YACR,WAAW,EAAE,mBAAmB;YAChC,IAAI,EAAE,CAAC,MAAM,CAAC;YACd,QAAQ,EAAE;gBACT,GAAG,EAAE,yCAAiC;aACtC;SACC;QACD,UAAU,EAAC;YACV,KAAK,CAAC,oBAAoB;SAC1B;QACD,OAAO,EAAE,cAAc,CAAC,cAAc;KAEtC,CAAC,CAAA;AAEJ,CAAC;AAlFD,6BAkFC;AAMD,4CAA4C;AAC5C,oBAAoB;AACpB,oCAAoC;AACpC,oCAAoC;AACpC,4BAA4B;AAC5B,IAAI;AAEJ,2CAA2C;AAC3C,oBAAoB;AACpB,mCAAmC;AACnC,mCAAmC;AACnC,2BAA2B;AAC3B,IAAI;AACJ,uCAAuC;AACvC,mBAAmB;AACnB,2BAA2B;AAC3B,2CAA2C;AAC3C,KAAK;AAEL,wCAAwC;AACxC,oBAAoB;AACpB,uBAAuB;AACvB,sCAAsC;AACtC,0BAA0B;AAC1B,KAAK;AAEL,sCAAsC;AACtC,oBAAoB;AACpB,6BAA6B;AAC7B,oCAAoC;AACpC,yBAAyB;AACzB,IAAI;AAEJ,qCAAqC;AACrC,oBAAoB;AACpB,4BAA4B;AAC5B,mCAAmC;AACnC,wBAAwB;AACxB,IAAI","sourcesContent":["import { FastifyInstance, RouteOptions } from \"fastify\";\nimport * as goodController from '../controllers/goodController'\nimport getGoodResponseSchema from '../schemas/good.get.response.json'\nimport addUpdateDeleteGoodResponseSchema from '../schemas/add.update.delete.response.json'\nimport GoodRequestSchema from '../schemas/good.request.json'\nimport * as auths from \"../services/auths\";\nexport default async function goodRoutes(fastify:FastifyInstance) {\n\n  fastify.get(\"/\",{\n\tschema:{\n\t\tdescription: 'Gets all goods',\n\t\ttags: ['good'],\n\t\tsummary: 'Gets all goods',\n\t\tresponse: {\n\t\t\t 200: getGoodResponseSchema\n\t\t}\n\t  },\n\t  handler: goodController.getAllGoods\n\t})\n\n  fastify.get(\"/:id\",{\n    schema:{\n      description: 'Gets a single good by id',\n\t\t\ttags: ['good'],\n\t\t\tsummary: 'Gets good by Id',\n\t\t\tparams: {\n\t\t\t\ttype: 'object',\n\t\t\t\tproperties: {\n\t\t\t\t\tid: {\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tdescription: 'id of good'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t,\n\t\t\tresponse: {\n\t\t\t\t200: getGoodResponseSchema\n\t\t\t}\n    },\n    handler: goodController.getGoodById\n  })\n  \n  fastify.post(\"/\",{\n\t  schema:{\n\t\tdescription: 'Add single good',\n\t\ttags: ['good'],\n\t\tbody: GoodRequestSchema,\n\t\tresponse: {\n\t\t\t201: addUpdateDeleteGoodResponseSchema\n\t\t}\n\t  },\n\t  preHandler: [\n\t\t  auths.auctioneerAuthPolicy\n\t  ],\n\t  handler: goodController.addGood\n  })\n\n   \n  fastify.patch(\"/:id\",{\n\tschema:{\n\t\tdescription: 'Update good by id',\n\t\ttags: ['good'],\n\t\tbody: GoodRequestSchema,\n\t\tresponse: {\n\t\t\t200: addUpdateDeleteGoodResponseSchema\n\t\t}\n\t},\n\tpreHandler: [\n\t\tauths.auctioneerAuthPolicy\n\t],\n\thandler: goodController.updateGoodById\n  })\n\n  fastify.delete(\"/:id\",{\n\t  schema:{\n\t\tdescription: 'Delete good by id',\n\t\ttags: ['good'],\n\t\tresponse: {\n\t\t\t200: addUpdateDeleteGoodResponseSchema\n\t\t}\n\t  },\n\t  preHandler:[\n\t\t  auths.auctioneerAuthPolicy\n\t  ],\n\t  handler: goodController.deleteGoodById\n\n  })\n\n}\n\n\n\n\n\n// const bidderSignupRoute: RouteOptions = {\n//   method: 'POST',\n//   url: '/api/auth/bidder/signup',\n//   handler: authController.signup,\n//   // schema: SignupSchema\n// }\n\n// const bidderLoginRoute: RouteOptions = {\n//   method: 'POST',\n//   url: '/api/auth/bidder/login',\n//   handler: authController.login,\n//   // schema: LoginSchema\n// }\n// const getUserRoute: RouteOptions = {\n//   method: 'GET',\n//   url: '/api/users/:id',\n//   handler: usersController.getSingleUser\n// };\n\n// const postUserRoute: RouteOptions = {\n//   method: 'POST',\n//   url: '/api/users',\n//   handler: usersController.addUser,\n//   schema: AddUserSchema\n// };\n\n// const signupRoute: RouteOptions = {\n//   method: 'POST',\n//   url: '/api/auth/signup',\n//   handler: authController.signup,\n//   schema: SignupSchema\n// }\n\n// const loginRoute: RouteOptions = {\n//   method: 'POST',\n//   url: '/api/auth/login',\n//   handler: authController.login,\n//   schema: LoginSchema\n// }\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"055e818bbed04344fc1f930c54422cba44bd48e1","contentHash":"2bc86da09bfef68a8a9532f360d32370b8be2e183f474cbf3092aaebf24723dd"},"/Users/kainingxin/NodeJsWorkplace/auction/src/controllers/goodController.ts":{"path":"/Users/kainingxin/NodeJsWorkplace/auction/src/controllers/goodController.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":4},"end":{"line":4,"column":89}},"4":{"start":{"line":4,"column":71},"end":{"line":4,"column":83}},"5":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"6":{"start":{"line":6,"column":26},"end":{"line":6,"column":33}},"7":{"start":{"line":7,"column":4},"end":{"line":7,"column":17}},"8":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"9":{"start":{"line":10,"column":4},"end":{"line":10,"column":72}},"10":{"start":{"line":12,"column":4},"end":{"line":12,"column":21}},"11":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"12":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"13":{"start":{"line":15,"column":31},"end":{"line":15,"column":42}},"14":{"start":{"line":16,"column":17},"end":{"line":16,"column":19}},"15":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"16":{"start":{"line":17,"column":21},"end":{"line":17,"column":141}},"17":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"18":{"start":{"line":17,"column":109},"end":{"line":17,"column":141}},"19":{"start":{"line":18,"column":4},"end":{"line":18,"column":36}},"20":{"start":{"line":19,"column":4},"end":{"line":19,"column":18}},"21":{"start":{"line":21,"column":22},"end":{"line":23,"column":1}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":62}},"23":{"start":{"line":24,"column":0},"end":{"line":24,"column":62}},"24":{"start":{"line":25,"column":0},"end":{"line":25,"column":119}},"25":{"start":{"line":26,"column":27},"end":{"line":26,"column":85}},"26":{"start":{"line":27,"column":28},"end":{"line":27,"column":56}},"27":{"start":{"line":28,"column":20},"end":{"line":28,"column":69}},"28":{"start":{"line":29,"column":23},"end":{"line":29,"column":60}},"29":{"start":{"line":30,"column":18},"end":{"line":30,"column":43}},"30":{"start":{"line":36,"column":20},"end":{"line":47,"column":1}},"31":{"start":{"line":37,"column":4},"end":{"line":46,"column":5}},"32":{"start":{"line":38,"column":8},"end":{"line":38,"column":49}},"33":{"start":{"line":39,"column":8},"end":{"line":42,"column":11}},"34":{"start":{"line":40,"column":12},"end":{"line":40,"column":80}},"35":{"start":{"line":41,"column":12},"end":{"line":41,"column":122}},"36":{"start":{"line":45,"column":8},"end":{"line":45,"column":55}},"37":{"start":{"line":48,"column":0},"end":{"line":48,"column":34}},"38":{"start":{"line":54,"column":20},"end":{"line":65,"column":1}},"39":{"start":{"line":55,"column":4},"end":{"line":64,"column":5}},"40":{"start":{"line":56,"column":8},"end":{"line":56,"column":68}},"41":{"start":{"line":57,"column":8},"end":{"line":60,"column":11}},"42":{"start":{"line":58,"column":12},"end":{"line":58,"column":73}},"43":{"start":{"line":59,"column":12},"end":{"line":59,"column":124}},"44":{"start":{"line":63,"column":8},"end":{"line":63,"column":90}},"45":{"start":{"line":66,"column":0},"end":{"line":66,"column":34}},"46":{"start":{"line":73,"column":16},"end":{"line":79,"column":1}},"47":{"start":{"line":74,"column":4},"end":{"line":74,"column":60}},"48":{"start":{"line":75,"column":4},"end":{"line":78,"column":7}},"49":{"start":{"line":76,"column":8},"end":{"line":76,"column":61}},"50":{"start":{"line":77,"column":8},"end":{"line":77,"column":138}},"51":{"start":{"line":80,"column":0},"end":{"line":80,"column":26}},"52":{"start":{"line":86,"column":23},"end":{"line":97,"column":1}},"53":{"start":{"line":87,"column":4},"end":{"line":96,"column":5}},"54":{"start":{"line":88,"column":8},"end":{"line":88,"column":63}},"55":{"start":{"line":89,"column":8},"end":{"line":92,"column":11}},"56":{"start":{"line":90,"column":12},"end":{"line":90,"column":71}},"57":{"start":{"line":91,"column":12},"end":{"line":91,"column":143}},"58":{"start":{"line":95,"column":8},"end":{"line":95,"column":55}},"59":{"start":{"line":98,"column":0},"end":{"line":98,"column":40}},"60":{"start":{"line":104,"column":23},"end":{"line":110,"column":1}},"61":{"start":{"line":105,"column":4},"end":{"line":105,"column":59}},"62":{"start":{"line":106,"column":4},"end":{"line":109,"column":7}},"63":{"start":{"line":107,"column":8},"end":{"line":107,"column":67}},"64":{"start":{"line":108,"column":8},"end":{"line":108,"column":143}},"65":{"start":{"line":111,"column":0},"end":{"line":111,"column":40}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":5,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":58},"end":{"line":4,"column":59}},"loc":{"start":{"line":4,"column":69},"end":{"line":4,"column":85}},"line":4},"2":{"name":"(anonymous_2)","decl":{"start":{"line":5,"column":6},"end":{"line":5,"column":7}},"loc":{"start":{"line":5,"column":28},"end":{"line":8,"column":1}},"line":5},"3":{"name":"(anonymous_3)","decl":{"start":{"line":9,"column":80},"end":{"line":9,"column":81}},"loc":{"start":{"line":9,"column":95},"end":{"line":11,"column":1}},"line":9},"4":{"name":"(anonymous_4)","decl":{"start":{"line":11,"column":5},"end":{"line":11,"column":6}},"loc":{"start":{"line":11,"column":20},"end":{"line":13,"column":1}},"line":11},"5":{"name":"(anonymous_5)","decl":{"start":{"line":14,"column":50},"end":{"line":14,"column":51}},"loc":{"start":{"line":14,"column":65},"end":{"line":20,"column":1}},"line":14},"6":{"name":"(anonymous_6)","decl":{"start":{"line":21,"column":56},"end":{"line":21,"column":57}},"loc":{"start":{"line":21,"column":71},"end":{"line":23,"column":1}},"line":21},"7":{"name":"(anonymous_7)","decl":{"start":{"line":36,"column":20},"end":{"line":36,"column":21}},"loc":{"start":{"line":36,"column":36},"end":{"line":47,"column":1}},"line":36},"8":{"name":"(anonymous_8)","decl":{"start":{"line":39,"column":40},"end":{"line":39,"column":41}},"loc":{"start":{"line":39,"column":49},"end":{"line":42,"column":9}},"line":39},"9":{"name":"(anonymous_9)","decl":{"start":{"line":54,"column":20},"end":{"line":54,"column":21}},"loc":{"start":{"line":54,"column":36},"end":{"line":65,"column":1}},"line":54},"10":{"name":"(anonymous_10)","decl":{"start":{"line":57,"column":53},"end":{"line":57,"column":54}},"loc":{"start":{"line":57,"column":62},"end":{"line":60,"column":9}},"line":57},"11":{"name":"(anonymous_11)","decl":{"start":{"line":73,"column":16},"end":{"line":73,"column":17}},"loc":{"start":{"line":73,"column":32},"end":{"line":79,"column":1}},"line":73},"12":{"name":"(anonymous_12)","decl":{"start":{"line":75,"column":39},"end":{"line":75,"column":40}},"loc":{"start":{"line":75,"column":48},"end":{"line":78,"column":5}},"line":75},"13":{"name":"(anonymous_13)","decl":{"start":{"line":86,"column":23},"end":{"line":86,"column":24}},"loc":{"start":{"line":86,"column":39},"end":{"line":97,"column":1}},"line":86},"14":{"name":"(anonymous_14)","decl":{"start":{"line":89,"column":65},"end":{"line":89,"column":66}},"loc":{"start":{"line":89,"column":74},"end":{"line":92,"column":9}},"line":89},"15":{"name":"(anonymous_15)","decl":{"start":{"line":104,"column":23},"end":{"line":104,"column":24}},"loc":{"start":{"line":104,"column":39},"end":{"line":110,"column":1}},"line":104},"16":{"name":"(anonymous_16)","decl":{"start":{"line":106,"column":51},"end":{"line":106,"column":52}},"loc":{"start":{"line":106,"column":57},"end":{"line":109,"column":5}},"line":106}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":8,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":8,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":5,"column":1}},{"start":{"line":5,"column":6},"end":{"line":8,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"type":"if","locations":[{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},{"start":{"line":6,"column":4},"end":{"line":6,"column":33}}],"line":6},"4":{"loc":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"type":"binary-expr","locations":[{"start":{"line":9,"column":26},"end":{"line":9,"column":30}},{"start":{"line":9,"column":34},"end":{"line":9,"column":57}},{"start":{"line":9,"column":63},"end":{"line":13,"column":1}}],"line":9},"5":{"loc":{"start":{"line":9,"column":63},"end":{"line":13,"column":1}},"type":"cond-expr","locations":[{"start":{"line":9,"column":80},"end":{"line":11,"column":1}},{"start":{"line":11,"column":5},"end":{"line":13,"column":1}}],"line":9},"6":{"loc":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"type":"binary-expr","locations":[{"start":{"line":14,"column":20},"end":{"line":14,"column":24}},{"start":{"line":14,"column":28},"end":{"line":14,"column":45}},{"start":{"line":14,"column":50},"end":{"line":20,"column":1}}],"line":14},"7":{"loc":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},{"start":{"line":15,"column":4},"end":{"line":15,"column":42}}],"line":15},"8":{"loc":{"start":{"line":15,"column":8},"end":{"line":15,"column":29}},"type":"binary-expr","locations":[{"start":{"line":15,"column":8},"end":{"line":15,"column":11}},{"start":{"line":15,"column":15},"end":{"line":15,"column":29}}],"line":15},"9":{"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},{"start":{"line":17,"column":4},"end":{"line":17,"column":141}}],"line":17},"10":{"loc":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},{"start":{"line":17,"column":40},"end":{"line":17,"column":141}}],"line":17},"11":{"loc":{"start":{"line":17,"column":44},"end":{"line":17,"column":107}},"type":"binary-expr","locations":[{"start":{"line":17,"column":44},"end":{"line":17,"column":59}},{"start":{"line":17,"column":63},"end":{"line":17,"column":107}}],"line":17},"12":{"loc":{"start":{"line":21,"column":22},"end":{"line":23,"column":1}},"type":"binary-expr","locations":[{"start":{"line":21,"column":23},"end":{"line":21,"column":27}},{"start":{"line":21,"column":31},"end":{"line":21,"column":51}},{"start":{"line":21,"column":56},"end":{"line":23,"column":1}}],"line":21},"13":{"loc":{"start":{"line":22,"column":11},"end":{"line":22,"column":61}},"type":"cond-expr","locations":[{"start":{"line":22,"column":37},"end":{"line":22,"column":40}},{"start":{"line":22,"column":43},"end":{"line":22,"column":61}}],"line":22},"14":{"loc":{"start":{"line":22,"column":12},"end":{"line":22,"column":33}},"type":"binary-expr","locations":[{"start":{"line":22,"column":12},"end":{"line":22,"column":15}},{"start":{"line":22,"column":19},"end":{"line":22,"column":33}}],"line":22}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1,"9":0,"10":0,"11":1,"12":1,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":0,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":0,"45":1,"46":1,"47":0,"48":0,"49":0,"50":0,"51":1,"52":1,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":1,"60":1,"61":0,"62":0,"63":0,"64":0,"65":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[1,1,1],"5":[1,0],"6":[1,1,1],"7":[1,0],"8":[1,1],"9":[0,0],"10":[0,0],"11":[0,0],"12":[1,1,1],"13":[1,0],"14":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/kainingxin/NodeJsWorkplace/auction/src/controllers/goodController.ts","sources":["/Users/kainingxin/NodeJsWorkplace/auction/src/controllers/goodController.ts"],"names":[],"mappings":"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","sourcesContent":["import { FastifyRequest, FastifyReply } from \"fastify\";\nimport ResponseTemplate from \"../models/oth/responseTemplate\";\nimport { StatusCodes } from \"http-status-codes\";\nimport { Good } from \"../models/good\";\nimport * as goodService from \"../services/goodsService\";\nimport { EntityNotFoundError } from \"../models/oth/customErrors\";\nimport { app } from \"../lib/fastify\";\n\n/**\n * Get all goods\n * @param req \n * @param reply \n */\nexport const getAllGoods =  (req: FastifyRequest, reply: FastifyReply) => {\n\ttry{\n\t\tapp.log.info(`Find all goods`)\n\t\t goodService.findAllGoods().then(value =>  {\n\t\t\tapp.log.info(`Goods retrived with ${value.length} items`)\n\t\t\treply.code(200).send(new ResponseTemplate(StatusCodes.OK,\"Good found\",value))});\n\t}catch{\n\t\tthrow new EntityNotFoundError()\n\t}\n}\n\n/**\n * Get good by id\n * @param req \n * @param reply \n */\nexport const getGoodById =  (req: FastifyRequest<{Params: {id:string}}>, reply: FastifyReply) => {\n\ttry{\n\t\tapp.log.info(`Get good by id : ${req.params.id}` )\n\t\t goodService.findGoodById(req.params.id).then(value =>  {\n\t\t\tapp.log.info(`Good with id ${value._id} retrived`)\n\t\t\t reply.code(200).send(new ResponseTemplate(StatusCodes.OK,\"Good found\",[value]))})\n\t}catch{\n\t\tthrow new EntityNotFoundError(`Good not found : ${req.params.id}`)\n\t}\t\n}\n \n/**\n * Add good by id\n * @param req \n * @param reply \n * @returns \n */\nexport const addGood =  (req: FastifyRequest<{Body:Good}>, reply: FastifyReply) => {\n\tapp.log.info(`Add good ${req.body.goodName}`)\n\tgoodService.addGood(req.body).then(value => {\n\t\tapp.log.info(`Good ${value._id} is added` )\n\t\treply.code(200).send(new ResponseTemplate(StatusCodes.CREATED,\"Good has been added\",[value._id]))})\n}\n\n/**\n * update good\n * @param req \n * @param reply \n */\nexport const updateGoodById =  (req: FastifyRequest<{Params:{id:string},Body:Good}>, reply: FastifyReply) => {\n\ttry{\n\t\tapp.log.info(`Update good ${req.params.id}` )\n\t\tgoodService.updateGoodById(req.params.id,req.body).then(value => {\n\t\t\tapp.log.info(`Good ${req.params.id} is updated` )\n\t\t\treply.code(200).send(new ResponseTemplate(StatusCodes.OK,\"Good has been updated\",[req.params.id]))})\n\t}catch{\n\t\tthrow new EntityNotFoundError()\n\t}\n}\n\n/**\n * Delete good by od\n * @param req \n * @param reply \n */\nexport const deleteGoodById =   (req: FastifyRequest<{Params:{id:string}}>, reply: FastifyReply) =>{\n\tapp.log.info(`Delete good ${req.params.id}` )\n\tgoodService.deleteGoodById(req.params.id).then(() => {\n\t\tapp.log.info(`Good ${req.params.id} is deleted` )\n\t\treply.code(200).send(new ResponseTemplate(StatusCodes.MOVED_PERMANENTLY,\"Good has been deleted\",null))}\n\t\t)\n}\n\n\n\n\n\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"29139efe8e758cec0b6ba1f0d552c7431a866f4d","contentHash":"99459b1c4efa0121b5986354042469c0d79b9bc3d8ddd67555744d4b7c06fad2"},"/Users/kainingxin/NodeJsWorkplace/auction/src/models/oth/responseTemplate.ts":{"path":"/Users/kainingxin/NodeJsWorkplace/auction/src/models/oth/responseTemplate.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":5,"column":8},"end":{"line":5,"column":25}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":23}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":25}},"4":{"start":{"line":10,"column":0},"end":{"line":10,"column":35}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":4},"end":{"line":4,"column":5}},"loc":{"start":{"line":4,"column":33},"end":{"line":8,"column":5}},"line":4}},"branchMap":{},"s":{"0":1,"1":5,"2":5,"3":5,"4":1},"f":{"0":5},"b":{},"inputSourceMap":{"version":3,"file":"/Users/kainingxin/NodeJsWorkplace/auction/src/models/oth/responseTemplate.ts","sources":["/Users/kainingxin/NodeJsWorkplace/auction/src/models/oth/responseTemplate.ts"],"names":[],"mappings":";;AAGA,MAAqB,gBAAgB;IAKjC,YAAY,IAAgB,EAAE,GAAW,EAAE,IAAQ;QAC/C,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;QACf,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;IACrB,CAAC;CACJ;AAVD,mCAUC","sourcesContent":["import c from 'config';\nimport {StatusCodes} from 'http-status-codes';\n\nexport default class ResponseTemplate{\n    code: StatusCodes;\n    msg: string;\n    data?: any;\n\n    constructor(code:StatusCodes, msg: string, data:any){\n        this.code = code;\n        this.msg = msg;\n        this.data = data;\n    }\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"97589bac4a7a3d1cdeb179525f12379aac6805c9","contentHash":"33b037e8d8333900c2fda61ed01cc4229e3a4330cdf5ce47580104454e7bf851"},"/Users/kainingxin/NodeJsWorkplace/auction/src/services/goodsService.ts":{"path":"/Users/kainingxin/NodeJsWorkplace/auction/src/services/goodsService.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":121}},"4":{"start":{"line":7,"column":15},"end":{"line":7,"column":57}},"5":{"start":{"line":8,"column":17},"end":{"line":8,"column":61}},"6":{"start":{"line":9,"column":23},"end":{"line":9,"column":60}},"7":{"start":{"line":10,"column":21},"end":{"line":10,"column":60}},"8":{"start":{"line":10,"column":33},"end":{"line":10,"column":60}},"9":{"start":{"line":11,"column":0},"end":{"line":11,"column":36}},"10":{"start":{"line":12,"column":21},"end":{"line":12,"column":68}},"11":{"start":{"line":12,"column":35},"end":{"line":12,"column":68}},"12":{"start":{"line":13,"column":0},"end":{"line":13,"column":36}},"13":{"start":{"line":14,"column":16},"end":{"line":18,"column":1}},"14":{"start":{"line":15,"column":4},"end":{"line":16,"column":33}},"15":{"start":{"line":16,"column":8},"end":{"line":16,"column":33}},"16":{"start":{"line":17,"column":4},"end":{"line":17,"column":45}},"17":{"start":{"line":19,"column":0},"end":{"line":19,"column":26}},"18":{"start":{"line":20,"column":23},"end":{"line":20,"column":107}},"19":{"start":{"line":20,"column":43},"end":{"line":20,"column":107}},"20":{"start":{"line":21,"column":0},"end":{"line":21,"column":40}},"21":{"start":{"line":22,"column":23},"end":{"line":22,"column":80}},"22":{"start":{"line":22,"column":37},"end":{"line":22,"column":80}},"23":{"start":{"line":23,"column":0},"end":{"line":23,"column":40}},"24":{"start":{"line":24,"column":21},"end":{"line":29,"column":1}},"25":{"start":{"line":25,"column":18},"end":{"line":25,"column":53}},"26":{"start":{"line":26,"column":4},"end":{"line":28,"column":5}},"27":{"start":{"line":27,"column":8},"end":{"line":27,"column":86}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":21},"end":{"line":10,"column":22}},"loc":{"start":{"line":10,"column":33},"end":{"line":10,"column":60}},"line":10},"2":{"name":"(anonymous_2)","decl":{"start":{"line":12,"column":21},"end":{"line":12,"column":22}},"loc":{"start":{"line":12,"column":35},"end":{"line":12,"column":68}},"line":12},"3":{"name":"(anonymous_3)","decl":{"start":{"line":14,"column":16},"end":{"line":14,"column":17}},"loc":{"start":{"line":14,"column":32},"end":{"line":18,"column":1}},"line":14},"4":{"name":"(anonymous_4)","decl":{"start":{"line":20,"column":23},"end":{"line":20,"column":24}},"loc":{"start":{"line":20,"column":43},"end":{"line":20,"column":107}},"line":20},"5":{"name":"(anonymous_5)","decl":{"start":{"line":22,"column":23},"end":{"line":22,"column":24}},"loc":{"start":{"line":22,"column":37},"end":{"line":22,"column":80}},"line":22},"6":{"name":"(anonymous_6)","decl":{"start":{"line":24,"column":21},"end":{"line":24,"column":22}},"loc":{"start":{"line":24,"column":41},"end":{"line":29,"column":1}},"line":24}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":15,"column":4},"end":{"line":16,"column":33}},"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":16,"column":33}},{"start":{"line":15,"column":4},"end":{"line":16,"column":33}}],"line":15},"4":{"loc":{"start":{"line":26,"column":4},"end":{"line":28,"column":5}},"type":"if","locations":[{"start":{"line":26,"column":4},"end":{"line":28,"column":5}},{"start":{"line":26,"column":4},"end":{"line":28,"column":5}}],"line":26}},"s":{"0":1,"1":2,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":2,"9":1,"10":1,"11":3,"12":1,"13":1,"14":1,"15":0,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":0,"26":0,"27":0},"f":{"0":2,"1":2,"2":3,"3":1,"4":1,"5":1,"6":0},"b":{"0":[1,1,1],"1":[2,0],"2":[2,2],"3":[0,1],"4":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/kainingxin/NodeJsWorkplace/auction/src/services/goodsService.ts","sources":["/Users/kainingxin/NodeJsWorkplace/auction/src/services/goodsService.ts"],"names":[],"mappings":";;;;;;AACA,0DAAkD;AAClD,8DAA2C;AAC3C,6DAA+D;AAExD,MAAM,YAAY,GAAG,KAAK,IAAI,EAAE,CAAC,MAAM,cAAU,CAAC,IAAI,EAAE,CAAC;AAAnD,QAAA,YAAY,gBAAuC;AAEzD,MAAM,YAAY,GAAG,KAAK,EAAE,EAAS,EAAE,EAAE,CAAC,MAAM,cAAU,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;AAAlE,QAAA,YAAY,gBAAsD;AAExE,MAAM,OAAO,GAAG,KAAK,EAAE,IAAS,EAAE,EAAE;IACvC,IAAG,IAAI,CAAC,KAAK;QAAE,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;IACvC,OAAO,MAAM,cAAU,CAAC,MAAM,CAAC,IAAI,CAAC,CAAA;AAAA,CAAC,CAAA;AAF5B,QAAA,OAAO,WAEqB;AAElC,MAAM,cAAc,GAAG,KAAK,EAAE,EAAS,EAAC,IAAS,EAAE,EAAE,CAAC,MAAM,cAAU,CAAC,SAAS,CAAC,EAAC,GAAG,EAAC,EAAE,EAAC,EAAC,IAAI,EAAC,EAAC,GAAG,EAAC,IAAI,EAAC,CAAC,CAAA;AAApG,QAAA,cAAc,kBAAsF;AAE1G,MAAM,cAAc,GAAE,KAAK,EAAE,EAAS,EAAE,EAAE,CAAC,MAAM,cAAU,CAAC,SAAS,CAAC,EAAC,GAAG,EAAC,EAAE,EAAC,CAAC,CAAA;AAAzE,QAAA,cAAc,kBAA2D;AAEtF,MAAM,YAAY,GAAG,KAAK,EAAE,QAA2B,EAAG,EAAE;IAC3D,MAAM,KAAK,GAAG,gBAAY,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;IAC9C,IAAG,CAAC,KAAK,EAAC;QACT,MAAM,IAAI,gCAAiB,CAAC,sBAAsB,QAAQ,GAAG,CAAC,CAAC;KAC/D;AACF,CAAC,CAAA","sourcesContent":["import { ObjectId } from \"mongoose\";\nimport GoodSchema, { Good } from \"../models/good\";\nimport BidderSchema from \"../models/bidder\"\nimport { InvalidInputError } from \"../models/oth/customErrors\";\n\nexport const findAllGoods = async () => await GoodSchema.find();\n\nexport const findGoodById = async (id:string) => await GoodSchema.findById(id);\n\nexport const addGood = async (good:Good) =>{\n    if(good.buyer) bidderExiste(good.buyer)\n    return await GoodSchema.create(good)} \n\nexport const updateGoodById = async (id:string,good:Good) => await GoodSchema.updateOne({_id:id},good,{new:true})\n\nexport const deleteGoodById =async (id:string) => await GoodSchema.deleteOne({_id:id})\n\nconst bidderExiste = async (bidderId :string | ObjectId ) =>{\n\tconst buyer = BidderSchema.findById(bidderId);\n\tif(!buyer){\n\t\tthrow new InvalidInputError(`Bidder not found : ${bidderId} `);\n\t}\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3e6bf8aeaceaba7251c591a8dd2155ce9c5a00e0","contentHash":"7e0f21ce71a9521ce9d62ba8c82005e39f3fde043b3b366cd6afba01801cb8ee"},"/Users/kainingxin/NodeJsWorkplace/auction/src/models/good.ts":{"path":"/Users/kainingxin/NodeJsWorkplace/auction/src/models/good.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":19},"end":{"line":3,"column":38}},"2":{"start":{"line":4,"column":19},"end":{"line":4,"column":46}},"3":{"start":{"line":5,"column":19},"end":{"line":13,"column":25}},"4":{"start":{"line":14,"column":0},"end":{"line":14,"column":60}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/Users/kainingxin/NodeJsWorkplace/auction/src/models/good.ts","sources":["/Users/kainingxin/NodeJsWorkplace/auction/src/models/good.ts"],"names":[],"mappings":";;AAAA,uCAAyC;AACzC,+CAA4C;AAa5C,MAAM,UAAU,GAAG,IAAI,iBAAM,CAAC;IAC1B,QAAQ,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IAC1C,aAAa,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IAC/C,YAAY,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IAC9C,UAAU,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAC,OAAO,EAAC,CAAC,EAAC;IACrD,QAAQ,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAG,OAAO,EAAC,mBAAQ,CAAC,GAAG,EAAC;IAChE,MAAM,EAAE,EAAC,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAC;IACvC,KAAK,EAAE,EAAC,IAAI,EAAE,iBAAM,CAAC,KAAK,CAAC,QAAQ,EAAG,GAAG,EAAE,QAAQ,EAAC;CACrD,EAAC,EAAC,UAAU,EAAC,KAAK,EAAC,CAAC,CAAC;AAExB,kBAAe,IAAA,gBAAK,EAAC,MAAM,EAAE,UAAU,CAAC,CAAA","sourcesContent":["import { model, Schema } from \"mongoose\";\nimport { Currency } from \"./enums/Currency\";\n\nexport interface Good{\n    _id?: Schema.Types.ObjectId | null,\n    goodName: string,\n    startingPrice: number,\n    reservePrice: number,\n    finalPrice: number,\n    currency: string,\n    status: string,\n    buyer: string | null\n}\n\nconst goodSchema = new Schema({\n    goodName: { type: String, required: true },\n    startingPrice: { type: Number, required: true },\n    reservePrice: { type: Number, required: true },\n    finalPrice: { type: Number, required: true,default:0},\n    currency: { type: String, required: true , default:Currency.USD},\n    status: {type: String, required: false},\n    buyer: {type: Schema.Types.ObjectId , ref: \"bidder\"}\n  },{versionKey:false});\n\nexport default model('good', goodSchema)"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"313d6f0de6645bb5a314d3dcd0da965bc61e1916","contentHash":"1e4cea35572ceb813ccfc73107a20b4a67cdc26b59e2a36c9b93ff56009aa309"},"/Users/kainingxin/NodeJsWorkplace/auction/src/models/enums/Currency.ts":{"path":"/Users/kainingxin/NodeJsWorkplace/auction/src/models/enums/Currency.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":26}},"2":{"start":{"line":5,"column":0},"end":{"line":9,"column":59}},"3":{"start":{"line":6,"column":4},"end":{"line":6,"column":28}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":28}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":28}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":1},"end":{"line":5,"column":2}},"loc":{"start":{"line":5,"column":21},"end":{"line":9,"column":1}},"line":5}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":14},"end":{"line":9,"column":57}},"type":"binary-expr","locations":[{"start":{"line":9,"column":14},"end":{"line":9,"column":30}},{"start":{"line":9,"column":35},"end":{"line":9,"column":56}}],"line":9}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1},"f":{"0":1},"b":{"0":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/kainingxin/NodeJsWorkplace/auction/src/models/enums/Currency.ts","sources":["/Users/kainingxin/NodeJsWorkplace/auction/src/models/enums/Currency.ts"],"names":[],"mappings":";;;AAAA,IAAY,QAIX;AAJD,WAAY,QAAQ;IAChB,uBAAW,CAAA;IACX,uBAAW,CAAA;IACX,uBAAW,CAAA;AACf,CAAC,EAJW,QAAQ,GAAR,gBAAQ,KAAR,gBAAQ,QAInB","sourcesContent":["export enum Currency{\n    USD = \"USD\" ,\n    EUR = \"EUR\",\n    GBP = \"GBP\",\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f9fb83061a1549e2f4eebddf9bf77288b770073b","contentHash":"0317d9b719bbd1ae8d2f32ab03e75a79282eda50c3653f0bd5c78a42fcdb6a63"},"/Users/kainingxin/NodeJsWorkplace/auction/src/models/bidder.ts":{"path":"/Users/kainingxin/NodeJsWorkplace/auction/src/models/bidder.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":19},"end":{"line":3,"column":38}},"2":{"start":{"line":4,"column":21},"end":{"line":11,"column":25}},"3":{"start":{"line":12,"column":0},"end":{"line":12,"column":64}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/Users/kainingxin/NodeJsWorkplace/auction/src/models/bidder.ts","sources":["/Users/kainingxin/NodeJsWorkplace/auction/src/models/bidder.ts"],"names":[],"mappings":";;AAAA,uCAAgD;AAYhD,MAAM,YAAY,GAAG,IAAI,iBAAM,CAAC;IAC5B,SAAS,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IAC3C,QAAQ,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IAC1C,KAAK,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IACvC,WAAW,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE;IAC3C,KAAK,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IACvC,QAAQ,EAAE,EAAC,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAC;CACzC,EAAC,EAAC,UAAU,EAAC,KAAK,EAAC,CAAC,CAAC;AAExB,kBAAe,IAAA,gBAAK,EAAC,QAAQ,EAAE,YAAY,CAAC,CAAA","sourcesContent":["import { Schema, model, Types } from 'mongoose';\n\nexport interface Bidder{\n  _id: Schema.Types.ObjectId | null,\n  firstName:string,\n  lastName:string,\n  email:string,\n  dateOfBirth:string,\n  phone: string,\n  password: string\n}\n\nconst bidderSchema = new Schema({\n    firstName: { type: String, required: true },\n    lastName: { type: String, required: true },\n    email: { type: String, required: true },\n    dateOfBirth: { type: Date, required: true },\n    phone: { type: String, required: true },\n    password: {type: String, required: true}\n  },{versionKey:false});\n\nexport default model('bidder', bidderSchema)"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"775e77113071d28be39e7aba684a40c02235e400","contentHash":"e59767663dcdb1a4d2f49cd1dd4ea045e992f7ff5e8c2f24ba2881635dca326b"},"/Users/kainingxin/NodeJsWorkplace/auction/src/models/oth/customErrors.ts":{"path":"/Users/kainingxin/NodeJsWorkplace/auction/src/models/oth/customErrors.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":173}},"2":{"start":{"line":6,"column":0},"end":{"line":6,"column":46}},"3":{"start":{"line":9,"column":8},"end":{"line":9,"column":39}},"4":{"start":{"line":12,"column":0},"end":{"line":12,"column":38}},"5":{"start":{"line":15,"column":0},"end":{"line":15,"column":50}},"6":{"start":{"line":18,"column":0},"end":{"line":18,"column":46}},"7":{"start":{"line":21,"column":0},"end":{"line":21,"column":46}},"8":{"start":{"line":24,"column":0},"end":{"line":24,"column":46}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":8,"column":4},"end":{"line":8,"column":5}},"loc":{"start":{"line":8,"column":18},"end":{"line":10,"column":5}},"line":8}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":0,"4":1,"5":1,"6":1,"7":1,"8":1},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"file":"/Users/kainingxin/NodeJsWorkplace/auction/src/models/oth/customErrors.ts","sources":["/Users/kainingxin/NodeJsWorkplace/auction/src/models/oth/customErrors.ts"],"names":[],"mappings":";;;AAAA,MAAa,iBAAkB,SAAQ,KAAK;CAAG;AAA/C,8CAA+C;AAE/C,MAAa,aAAc,SAAQ,iBAAiB;IAClD;QACE,KAAK,CAAC,uBAAuB,CAAC,CAAA;IAChC,CAAC;CACF;AAJD,sCAIC;AAED,MAAa,mBAAoB,SAAQ,KAAK;CAAE;AAAhD,kDAAgD;AAEhD,MAAa,iBAAkB,SAAQ,KAAK;CAAE;AAA9C,8CAA8C;AAE9C,MAAa,iBAAkB,SAAQ,KAAK;CAAE;AAA9C,8CAA8C;AAE9C,MAAa,iBAAkB,SAAQ,KAAK;CAAE;AAA9C,8CAA8C;AAAA,CAAC","sourcesContent":["export class UnauthorizedError extends Error {}\n\nexport class UnloggedError extends UnauthorizedError {\n  constructor() {\n    super('You are not logged in')\n  }\n}\n\nexport class EntityNotFoundError extends Error{}\n\nexport class TokenInvalidError extends Error{}\n\nexport class InvalidInputError extends Error{}\n\nexport class InvalidPriceError extends Error{};"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"15b2c076d212714fab4ce15b08d29358fa142163","contentHash":"0b1c34cdb367faa28d8e2e25eecbdd41cffd919b2fb1eff17c8235e698ce3ada"},"/Users/kainingxin/NodeJsWorkplace/auction/src/services/auths.ts":{"path":"/Users/kainingxin/NodeJsWorkplace/auction/src/services/auths.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":65}},"2":{"start":{"line":4,"column":18},"end":{"line":4,"column":43}},"3":{"start":{"line":5,"column":23},"end":{"line":5,"column":60}},"4":{"start":{"line":7,"column":29},"end":{"line":21,"column":1}},"5":{"start":{"line":8,"column":18},"end":{"line":8,"column":51}},"6":{"start":{"line":9,"column":4},"end":{"line":11,"column":5}},"7":{"start":{"line":10,"column":8},"end":{"line":10,"column":75}},"8":{"start":{"line":12,"column":4},"end":{"line":20,"column":7}},"9":{"start":{"line":13,"column":8},"end":{"line":13,"column":29}},"10":{"start":{"line":14,"column":8},"end":{"line":19,"column":9}},"11":{"start":{"line":15,"column":12},"end":{"line":15,"column":74}},"12":{"start":{"line":18,"column":12},"end":{"line":18,"column":19}},"13":{"start":{"line":22,"column":0},"end":{"line":22,"column":52}},"14":{"start":{"line":24,"column":25},"end":{"line":37,"column":1}},"15":{"start":{"line":25,"column":18},"end":{"line":25,"column":51}},"16":{"start":{"line":26,"column":4},"end":{"line":28,"column":5}},"17":{"start":{"line":27,"column":8},"end":{"line":27,"column":75}},"18":{"start":{"line":29,"column":4},"end":{"line":36,"column":7}},"19":{"start":{"line":30,"column":8},"end":{"line":35,"column":9}},"20":{"start":{"line":31,"column":12},"end":{"line":31,"column":74}},"21":{"start":{"line":34,"column":12},"end":{"line":34,"column":19}},"22":{"start":{"line":38,"column":0},"end":{"line":38,"column":44}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":29},"end":{"line":7,"column":30}},"loc":{"start":{"line":7,"column":55},"end":{"line":21,"column":1}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":12,"column":36},"end":{"line":12,"column":37}},"loc":{"start":{"line":12,"column":56},"end":{"line":20,"column":5}},"line":12},"2":{"name":"(anonymous_2)","decl":{"start":{"line":24,"column":25},"end":{"line":24,"column":26}},"loc":{"start":{"line":24,"column":51},"end":{"line":37,"column":1}},"line":24},"3":{"name":"(anonymous_3)","decl":{"start":{"line":29,"column":36},"end":{"line":29,"column":37}},"loc":{"start":{"line":29,"column":56},"end":{"line":36,"column":5}},"line":29}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":4},"end":{"line":11,"column":5}},"type":"if","locations":[{"start":{"line":9,"column":4},"end":{"line":11,"column":5}},{"start":{"line":9,"column":4},"end":{"line":11,"column":5}}],"line":9},"1":{"loc":{"start":{"line":14,"column":8},"end":{"line":19,"column":9}},"type":"if","locations":[{"start":{"line":14,"column":8},"end":{"line":19,"column":9}},{"start":{"line":14,"column":8},"end":{"line":19,"column":9}}],"line":14},"2":{"loc":{"start":{"line":14,"column":12},"end":{"line":14,"column":67}},"type":"binary-expr","locations":[{"start":{"line":14,"column":12},"end":{"line":14,"column":17}},{"start":{"line":14,"column":21},"end":{"line":14,"column":34}},{"start":{"line":14,"column":38},"end":{"line":14,"column":67}}],"line":14},"3":{"loc":{"start":{"line":26,"column":4},"end":{"line":28,"column":5}},"type":"if","locations":[{"start":{"line":26,"column":4},"end":{"line":28,"column":5}},{"start":{"line":26,"column":4},"end":{"line":28,"column":5}}],"line":26},"4":{"loc":{"start":{"line":30,"column":8},"end":{"line":35,"column":9}},"type":"if","locations":[{"start":{"line":30,"column":8},"end":{"line":35,"column":9}},{"start":{"line":30,"column":8},"end":{"line":35,"column":9}}],"line":30},"5":{"loc":{"start":{"line":30,"column":12},"end":{"line":30,"column":63}},"type":"binary-expr","locations":[{"start":{"line":30,"column":12},"end":{"line":30,"column":17}},{"start":{"line":30,"column":21},"end":{"line":30,"column":34}},{"start":{"line":30,"column":38},"end":{"line":30,"column":63}}],"line":30}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":1,"14":1,"15":1,"16":1,"17":0,"18":1,"19":1,"20":0,"21":1,"22":1},"f":{"0":0,"1":0,"2":1,"3":1},"b":{"0":[0,0],"1":[0,0],"2":[0,0,0],"3":[0,1],"4":[0,1],"5":[1,1,1]},"inputSourceMap":{"version":3,"file":"/Users/kainingxin/NodeJsWorkplace/auction/src/services/auths.ts","sources":["/Users/kainingxin/NodeJsWorkplace/auction/src/services/auths.ts"],"names":[],"mappings":";;;AACA,4CAAqC;AACrC,6DAA+D;AAG/D,gCAAgC;AACzB,MAAM,oBAAoB,GAAG,CAAC,OAAuB,EAAE,KAAmB,EAAE,IAA6B,EAAE,EAAE;IAChH,MAAM,KAAK,GAAG,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,aAAuB,CAAC;IAE1D,IAAG,CAAC,KAAK,EAAC;QACN,IAAI,CAAC,IAAI,gCAAiB,CAAC,sBAAsB,CAAC,CAAC,CAAA;KACtD;IAED,aAAG,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,KAAK,EAAC,OAAO,EAAE,EAAE;QACpC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAA;QACpB,IAAI,KAAK,IAAI,CAAC,OAAO,CAAC,IAAI,IAAK,OAAO,CAAC,IAAI,KAAK,YAAY,EAAC;YACzD,IAAI,CAAC,IAAI,gCAAiB,CAAC,iBAAiB,CAAC,CAAC,CAAA;SACjD;aAAI;YACD,IAAI,EAAE,CAAA;SACT;IACL,CAAC,CAAC,CAAC;AACP,CAAC,CAAA;AAfY,QAAA,oBAAoB,wBAehC;AAGD,4BAA4B;AACrB,MAAM,gBAAgB,GAAG,CAAC,OAAuB,EAAE,KAAmB,EAAE,IAA6B,EAAE,EAAE;IAC5G,MAAM,KAAK,GAAG,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,aAAuB,CAAC;IAE1D,IAAG,CAAC,KAAK,EAAC;QACN,IAAI,CAAC,IAAI,gCAAiB,CAAC,sBAAsB,CAAC,CAAC,CAAA;KACtD;IAED,aAAG,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,KAAK,EAAC,OAAO,EAAE,EAAE;QAEpC,IAAI,KAAK,IAAI,CAAC,OAAO,CAAC,IAAI,IAAK,OAAO,CAAC,IAAI,KAAK,QAAQ,EAAC;YACrD,IAAI,CAAC,IAAI,gCAAiB,CAAC,iBAAiB,CAAC,CAAC,CAAA;SACjD;aAAI;YACD,IAAI,EAAE,CAAA;SACT;IACL,CAAC,CAAC,CAAC;AACP,CAAC,CAAA;AAfY,QAAA,gBAAgB,oBAe5B","sourcesContent":["import { FastifyReply, FastifyRequest, HookHandlerDoneFunction } from \"fastify\";\nimport { app } from \"../lib/fastify\";\nimport { UnauthorizedError } from \"../models/oth/customErrors\";\n\n\n//Autentification for auctionner\nexport const auctioneerAuthPolicy = (request: FastifyRequest, reply: FastifyReply, done: HookHandlerDoneFunction) => {\n    const token = request.raw.headers.authorization as string;\n\n    if(!token){\n        done(new UnauthorizedError('Missing token header')) \n    }\n\n    app.jwt.verify(token, (error,decoded) => {\n        console.log(decoded)\n        if (error || !decoded.role ||  decoded.role !== 'auctioneer'){\n            done(new UnauthorizedError(\"Token not valid\"))\n        }else{\n            done()\n        }\n    });\n}\n\n\n//Autentification for bidder\nexport const bidderAuthPolicy = (request: FastifyRequest, reply: FastifyReply, done: HookHandlerDoneFunction) => {\n    const token = request.raw.headers.authorization as string;\n\n    if(!token){\n        done(new UnauthorizedError('Missing token header')) \n    }\n\n    app.jwt.verify(token, (error,decoded) => {\n\n        if (error || !decoded.role ||  decoded.role !== 'bidder'){\n            done(new UnauthorizedError('Token not valid'))\n        }else{\n            done()\n        }\n    });\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"178e028d0b67b03fdb986c2febf9ecec1299af43","contentHash":"7a31c238c63be481e4305b71e9b5daec95e009f14c323465cb93c394d4379f18"},"/Users/kainingxin/NodeJsWorkplace/auction/src/routes/bidderRoutes.ts":{"path":"/Users/kainingxin/NodeJsWorkplace/auction/src/routes/bidderRoutes.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":4},"end":{"line":4,"column":89}},"4":{"start":{"line":4,"column":71},"end":{"line":4,"column":83}},"5":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"6":{"start":{"line":6,"column":26},"end":{"line":6,"column":33}},"7":{"start":{"line":7,"column":4},"end":{"line":7,"column":17}},"8":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"9":{"start":{"line":10,"column":4},"end":{"line":10,"column":72}},"10":{"start":{"line":12,"column":4},"end":{"line":12,"column":21}},"11":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"12":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"13":{"start":{"line":15,"column":31},"end":{"line":15,"column":42}},"14":{"start":{"line":16,"column":17},"end":{"line":16,"column":19}},"15":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"16":{"start":{"line":17,"column":21},"end":{"line":17,"column":141}},"17":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"18":{"start":{"line":17,"column":109},"end":{"line":17,"column":141}},"19":{"start":{"line":18,"column":4},"end":{"line":18,"column":36}},"20":{"start":{"line":19,"column":4},"end":{"line":19,"column":18}},"21":{"start":{"line":21,"column":22},"end":{"line":23,"column":1}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":62}},"23":{"start":{"line":24,"column":0},"end":{"line":24,"column":62}},"24":{"start":{"line":25,"column":25},"end":{"line":25,"column":81}},"25":{"start":{"line":26,"column":35},"end":{"line":26,"column":98}},"26":{"start":{"line":28,"column":4},"end":{"line":47,"column":7}},"27":{"start":{"line":49,"column":0},"end":{"line":49,"column":31}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":5,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":58},"end":{"line":4,"column":59}},"loc":{"start":{"line":4,"column":69},"end":{"line":4,"column":85}},"line":4},"2":{"name":"(anonymous_2)","decl":{"start":{"line":5,"column":6},"end":{"line":5,"column":7}},"loc":{"start":{"line":5,"column":28},"end":{"line":8,"column":1}},"line":5},"3":{"name":"(anonymous_3)","decl":{"start":{"line":9,"column":80},"end":{"line":9,"column":81}},"loc":{"start":{"line":9,"column":95},"end":{"line":11,"column":1}},"line":9},"4":{"name":"(anonymous_4)","decl":{"start":{"line":11,"column":5},"end":{"line":11,"column":6}},"loc":{"start":{"line":11,"column":20},"end":{"line":13,"column":1}},"line":11},"5":{"name":"(anonymous_5)","decl":{"start":{"line":14,"column":50},"end":{"line":14,"column":51}},"loc":{"start":{"line":14,"column":65},"end":{"line":20,"column":1}},"line":14},"6":{"name":"(anonymous_6)","decl":{"start":{"line":21,"column":56},"end":{"line":21,"column":57}},"loc":{"start":{"line":21,"column":71},"end":{"line":23,"column":1}},"line":21},"7":{"name":"bidderRoutes","decl":{"start":{"line":27,"column":15},"end":{"line":27,"column":27}},"loc":{"start":{"line":27,"column":37},"end":{"line":48,"column":1}},"line":27}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":8,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":8,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":5,"column":1}},{"start":{"line":5,"column":6},"end":{"line":8,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"type":"if","locations":[{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},{"start":{"line":6,"column":4},"end":{"line":6,"column":33}}],"line":6},"4":{"loc":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"type":"binary-expr","locations":[{"start":{"line":9,"column":26},"end":{"line":9,"column":30}},{"start":{"line":9,"column":34},"end":{"line":9,"column":57}},{"start":{"line":9,"column":63},"end":{"line":13,"column":1}}],"line":9},"5":{"loc":{"start":{"line":9,"column":63},"end":{"line":13,"column":1}},"type":"cond-expr","locations":[{"start":{"line":9,"column":80},"end":{"line":11,"column":1}},{"start":{"line":11,"column":5},"end":{"line":13,"column":1}}],"line":9},"6":{"loc":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"type":"binary-expr","locations":[{"start":{"line":14,"column":20},"end":{"line":14,"column":24}},{"start":{"line":14,"column":28},"end":{"line":14,"column":45}},{"start":{"line":14,"column":50},"end":{"line":20,"column":1}}],"line":14},"7":{"loc":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},{"start":{"line":15,"column":4},"end":{"line":15,"column":42}}],"line":15},"8":{"loc":{"start":{"line":15,"column":8},"end":{"line":15,"column":29}},"type":"binary-expr","locations":[{"start":{"line":15,"column":8},"end":{"line":15,"column":11}},{"start":{"line":15,"column":15},"end":{"line":15,"column":29}}],"line":15},"9":{"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},{"start":{"line":17,"column":4},"end":{"line":17,"column":141}}],"line":17},"10":{"loc":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},{"start":{"line":17,"column":40},"end":{"line":17,"column":141}}],"line":17},"11":{"loc":{"start":{"line":17,"column":44},"end":{"line":17,"column":107}},"type":"binary-expr","locations":[{"start":{"line":17,"column":44},"end":{"line":17,"column":59}},{"start":{"line":17,"column":63},"end":{"line":17,"column":107}}],"line":17},"12":{"loc":{"start":{"line":21,"column":22},"end":{"line":23,"column":1}},"type":"binary-expr","locations":[{"start":{"line":21,"column":23},"end":{"line":21,"column":27}},{"start":{"line":21,"column":31},"end":{"line":21,"column":51}},{"start":{"line":21,"column":56},"end":{"line":23,"column":1}}],"line":21},"13":{"loc":{"start":{"line":22,"column":11},"end":{"line":22,"column":61}},"type":"cond-expr","locations":[{"start":{"line":22,"column":37},"end":{"line":22,"column":40}},{"start":{"line":22,"column":43},"end":{"line":22,"column":61}}],"line":22},"14":{"loc":{"start":{"line":22,"column":12},"end":{"line":22,"column":33}},"type":"binary-expr","locations":[{"start":{"line":22,"column":12},"end":{"line":22,"column":15}},{"start":{"line":22,"column":19},"end":{"line":22,"column":33}}],"line":22}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1,"9":0,"10":0,"11":1,"12":1,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":1,"7":1},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[1,1,1],"5":[1,0],"6":[1,1,1],"7":[1,0],"8":[1,1],"9":[0,0],"10":[0,0],"11":[0,0],"12":[1,1,1],"13":[0,1],"14":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/kainingxin/NodeJsWorkplace/auction/src/routes/bidderRoutes.ts","sources":["/Users/kainingxin/NodeJsWorkplace/auction/src/routes/bidderRoutes.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AACA,kFAAmE;AACnE,mGAAiE;AAElD,KAAK,UAAU,YAAY,CAAC,OAAwB;IAElE,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE;QACnB,MAAM,EAAE;YACP,WAAW,EAAE,sBAAsB;YACnC,IAAI,EAAE,CAAC,QAAQ,CAAC;YAChB,OAAO,EAAE,mBAAmB;YAC5B,MAAM,EAAE;gBACP,IAAI,EAAE,QAAQ;gBACd,UAAU,EAAE;oBACX,EAAE,EAAE;wBACH,IAAI,EAAE,QAAQ;wBACd,WAAW,EAAE,WAAW;qBACxB;iBACD;aACD;YACD,QAAQ,EAAE;gBACT,GAAG,EAAE,kCAAe;aACpB;SACD;QACD,OAAO,EAAE,gBAAgB,CAAC,aAAa;KACvC,CAEA,CAAA;AAGF,CAAC;AA1BD,+BA0BC","sourcesContent":["import { FastifyInstance, RouteOptions } from \"fastify\";\nimport * as bidderController from '../controllers/bidderController'\nimport BidderGetSchema from '../schemas/bidder.get.response.json'\n\nexport default async function bidderRoutes(fastify: FastifyInstance) {\n\n\tfastify.get(\"/:id\", {\n\t\tschema: {\n\t\t\tdescription: 'Gets a single bidder',\n\t\t\ttags: ['bidder'],\n\t\t\tsummary: 'Gets bidder by Id',\n\t\t\tparams: {\n\t\t\t\ttype: 'object',\n\t\t\t\tproperties: {\n\t\t\t\t\tid: {\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tdescription: 'bidder Id'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tresponse: {\n\t\t\t\t200: BidderGetSchema\n\t\t\t}\n\t\t},\n\t\thandler: bidderController.getBidderById\n\t}\n\n\t)\n\n\n}\n\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d863272611cc461d954962c38f5780b01bba5f11","contentHash":"07ebdc0ec47c9819d74274b4db2ac0c143f07ef72435bcca36ae1b4c603c0680"},"/Users/kainingxin/NodeJsWorkplace/auction/src/controllers/bidderController.ts":{"path":"/Users/kainingxin/NodeJsWorkplace/auction/src/controllers/bidderController.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":4},"end":{"line":4,"column":89}},"4":{"start":{"line":4,"column":71},"end":{"line":4,"column":83}},"5":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"6":{"start":{"line":6,"column":26},"end":{"line":6,"column":33}},"7":{"start":{"line":7,"column":4},"end":{"line":7,"column":17}},"8":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"9":{"start":{"line":10,"column":4},"end":{"line":10,"column":72}},"10":{"start":{"line":12,"column":4},"end":{"line":12,"column":21}},"11":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"12":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"13":{"start":{"line":15,"column":31},"end":{"line":15,"column":42}},"14":{"start":{"line":16,"column":17},"end":{"line":16,"column":19}},"15":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"16":{"start":{"line":17,"column":21},"end":{"line":17,"column":141}},"17":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"18":{"start":{"line":17,"column":109},"end":{"line":17,"column":141}},"19":{"start":{"line":18,"column":4},"end":{"line":18,"column":36}},"20":{"start":{"line":19,"column":4},"end":{"line":19,"column":18}},"21":{"start":{"line":21,"column":22},"end":{"line":23,"column":1}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":62}},"23":{"start":{"line":24,"column":0},"end":{"line":24,"column":62}},"24":{"start":{"line":25,"column":0},"end":{"line":25,"column":31}},"25":{"start":{"line":26,"column":28},"end":{"line":26,"column":56}},"26":{"start":{"line":27,"column":27},"end":{"line":27,"column":85}},"27":{"start":{"line":28,"column":22},"end":{"line":28,"column":72}},"28":{"start":{"line":29,"column":18},"end":{"line":29,"column":43}},"29":{"start":{"line":30,"column":22},"end":{"line":41,"column":1}},"30":{"start":{"line":31,"column":4},"end":{"line":40,"column":5}},"31":{"start":{"line":32,"column":8},"end":{"line":32,"column":62}},"32":{"start":{"line":33,"column":8},"end":{"line":36,"column":11}},"33":{"start":{"line":34,"column":12},"end":{"line":34,"column":71}},"34":{"start":{"line":35,"column":12},"end":{"line":35,"column":126}},"35":{"start":{"line":39,"column":8},"end":{"line":39,"column":18}},"36":{"start":{"line":42,"column":0},"end":{"line":42,"column":38}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":5,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":58},"end":{"line":4,"column":59}},"loc":{"start":{"line":4,"column":69},"end":{"line":4,"column":85}},"line":4},"2":{"name":"(anonymous_2)","decl":{"start":{"line":5,"column":6},"end":{"line":5,"column":7}},"loc":{"start":{"line":5,"column":28},"end":{"line":8,"column":1}},"line":5},"3":{"name":"(anonymous_3)","decl":{"start":{"line":9,"column":80},"end":{"line":9,"column":81}},"loc":{"start":{"line":9,"column":95},"end":{"line":11,"column":1}},"line":9},"4":{"name":"(anonymous_4)","decl":{"start":{"line":11,"column":5},"end":{"line":11,"column":6}},"loc":{"start":{"line":11,"column":20},"end":{"line":13,"column":1}},"line":11},"5":{"name":"(anonymous_5)","decl":{"start":{"line":14,"column":50},"end":{"line":14,"column":51}},"loc":{"start":{"line":14,"column":65},"end":{"line":20,"column":1}},"line":14},"6":{"name":"(anonymous_6)","decl":{"start":{"line":21,"column":56},"end":{"line":21,"column":57}},"loc":{"start":{"line":21,"column":71},"end":{"line":23,"column":1}},"line":21},"7":{"name":"(anonymous_7)","decl":{"start":{"line":30,"column":22},"end":{"line":30,"column":23}},"loc":{"start":{"line":30,"column":44},"end":{"line":41,"column":1}},"line":30},"8":{"name":"(anonymous_8)","decl":{"start":{"line":33,"column":56},"end":{"line":33,"column":57}},"loc":{"start":{"line":33,"column":65},"end":{"line":36,"column":9}},"line":33}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":8,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":8,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":5,"column":1}},{"start":{"line":5,"column":6},"end":{"line":8,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"type":"if","locations":[{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},{"start":{"line":6,"column":4},"end":{"line":6,"column":33}}],"line":6},"4":{"loc":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"type":"binary-expr","locations":[{"start":{"line":9,"column":26},"end":{"line":9,"column":30}},{"start":{"line":9,"column":34},"end":{"line":9,"column":57}},{"start":{"line":9,"column":63},"end":{"line":13,"column":1}}],"line":9},"5":{"loc":{"start":{"line":9,"column":63},"end":{"line":13,"column":1}},"type":"cond-expr","locations":[{"start":{"line":9,"column":80},"end":{"line":11,"column":1}},{"start":{"line":11,"column":5},"end":{"line":13,"column":1}}],"line":9},"6":{"loc":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"type":"binary-expr","locations":[{"start":{"line":14,"column":20},"end":{"line":14,"column":24}},{"start":{"line":14,"column":28},"end":{"line":14,"column":45}},{"start":{"line":14,"column":50},"end":{"line":20,"column":1}}],"line":14},"7":{"loc":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},{"start":{"line":15,"column":4},"end":{"line":15,"column":42}}],"line":15},"8":{"loc":{"start":{"line":15,"column":8},"end":{"line":15,"column":29}},"type":"binary-expr","locations":[{"start":{"line":15,"column":8},"end":{"line":15,"column":11}},{"start":{"line":15,"column":15},"end":{"line":15,"column":29}}],"line":15},"9":{"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},{"start":{"line":17,"column":4},"end":{"line":17,"column":141}}],"line":17},"10":{"loc":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},{"start":{"line":17,"column":40},"end":{"line":17,"column":141}}],"line":17},"11":{"loc":{"start":{"line":17,"column":44},"end":{"line":17,"column":107}},"type":"binary-expr","locations":[{"start":{"line":17,"column":44},"end":{"line":17,"column":59}},{"start":{"line":17,"column":63},"end":{"line":17,"column":107}}],"line":17},"12":{"loc":{"start":{"line":21,"column":22},"end":{"line":23,"column":1}},"type":"binary-expr","locations":[{"start":{"line":21,"column":23},"end":{"line":21,"column":27}},{"start":{"line":21,"column":31},"end":{"line":21,"column":51}},{"start":{"line":21,"column":56},"end":{"line":23,"column":1}}],"line":21},"13":{"loc":{"start":{"line":22,"column":11},"end":{"line":22,"column":61}},"type":"cond-expr","locations":[{"start":{"line":22,"column":37},"end":{"line":22,"column":40}},{"start":{"line":22,"column":43},"end":{"line":22,"column":61}}],"line":22},"14":{"loc":{"start":{"line":22,"column":12},"end":{"line":22,"column":33}},"type":"binary-expr","locations":[{"start":{"line":22,"column":12},"end":{"line":22,"column":15}},{"start":{"line":22,"column":19},"end":{"line":22,"column":33}}],"line":22}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1,"9":0,"10":0,"11":1,"12":1,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":1,"7":0,"8":0},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[1,1,1],"5":[1,0],"6":[1,1,1],"7":[1,0],"8":[1,1],"9":[0,0],"10":[0,0],"11":[0,0],"12":[1,1,1],"13":[1,0],"14":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/kainingxin/NodeJsWorkplace/auction/src/controllers/bidderController.ts","sources":["/Users/kainingxin/NodeJsWorkplace/auction/src/controllers/bidderController.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AACA,yDAAgD;AAChD,sFAA8D;AAC9D,yEAA0D;AAC1D,4CAAqC;AAE9B,MAAM,aAAa,GAAG,KAAK,EAAE,GAEhC,EAAE,KAAmB,EAAC,EAAE;IAC3B,IAAI;QACH,aAAG,CAAC,GAAG,CAAC,IAAI,CAAC,cAAc,GAAG,CAAC,MAAM,CAAC,EAAE,EAAE,CAAE,CAAA;QAC5C,aAAa,CAAC,aAAa,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;YACvD,aAAG,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,GAAG,CAAC,MAAM,CAAC,EAAE,WAAW,CAAC,CAAA;YAChD,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,0BAAgB,CAAC,+BAAW,CAAC,EAAE,EAAC,cAAc,EAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;QAAA,CAAC,CAAC,CAAA;KACpF;IAAC,OAAO,GAAG,EAAE;QACb,MAAM,GAAG,CAAC;KACV;AACF,CAAC,CAAC;AAXW,QAAA,aAAa,iBAWxB","sourcesContent":["import { FastifyRequest, FastifyReply } from \"fastify\";\nimport { StatusCodes } from \"http-status-codes\";\nimport ResponseTemplate from \"../models/oth/responseTemplate\";\nimport * as bidderService from \"../services/bidderService\"\nimport { app } from \"../lib/fastify\";\n\nexport const getBidderById = async (req: FastifyRequest<{\n\tParams: {id:string}\n  }>, reply: FastifyReply)=> {\n\ttry {\n\t\tapp.log.info(`Get bidder ${req.params.id}` )        \n\t\tbidderService.getBidderById(req.params.id).then(value => {\n\t\t\tapp.log.info(`Bidder ${req.params.id} retrived`)        \n\t\t\treply.code(200).send(new ResponseTemplate(StatusCodes.OK,\"Bidder found\",[value]))})\n\t} catch (err) {\n\t\tthrow err;\n\t}\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6c7e9f2aab4677a4a33a61b6aa7e1d0c58239dac","contentHash":"4199ad26bf124c6f0e69cfda2b4bd6091adf17ea7114c1357616389b89ffc71e"},"/Users/kainingxin/NodeJsWorkplace/auction/src/services/bidderService.ts":{"path":"/Users/kainingxin/NodeJsWorkplace/auction/src/services/bidderService.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":31}},"4":{"start":{"line":7,"column":17},"end":{"line":7,"column":61}},"5":{"start":{"line":8,"column":22},"end":{"line":8,"column":71}},"6":{"start":{"line":8,"column":36},"end":{"line":8,"column":71}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":38}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":22},"end":{"line":8,"column":23}},"loc":{"start":{"line":8,"column":36},"end":{"line":8,"column":71}},"line":8}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1},"f":{"0":1,"1":1},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/kainingxin/NodeJsWorkplace/auction/src/services/bidderService.ts","sources":["/Users/kainingxin/NodeJsWorkplace/auction/src/services/bidderService.ts"],"names":[],"mappings":";;;;;;AAAA,8DAA4C;AACrC,MAAM,aAAa,GAAG,KAAK,EAAE,EAAS,EAAE,EAAE,CAAC,MAAM,gBAAY,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;AAArE,QAAA,aAAa,iBAAwD","sourcesContent":["import BidderSchema from \"../models/bidder\";\nexport const getBidderById = async (id:string) => await BidderSchema.findById(id);"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"87f6158af05f1b99fb911e795d83edd0059a1709","contentHash":"fd9571ee072b4b29dcac1e12eb73dd56897221802c0e708a0ff025e6624e556c"},"/Users/kainingxin/NodeJsWorkplace/auction/src/routes/auctionRoutes.ts":{"path":"/Users/kainingxin/NodeJsWorkplace/auction/src/routes/auctionRoutes.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":4},"end":{"line":4,"column":89}},"4":{"start":{"line":4,"column":71},"end":{"line":4,"column":83}},"5":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"6":{"start":{"line":6,"column":26},"end":{"line":6,"column":33}},"7":{"start":{"line":7,"column":4},"end":{"line":7,"column":17}},"8":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"9":{"start":{"line":10,"column":4},"end":{"line":10,"column":72}},"10":{"start":{"line":12,"column":4},"end":{"line":12,"column":21}},"11":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"12":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"13":{"start":{"line":15,"column":31},"end":{"line":15,"column":42}},"14":{"start":{"line":16,"column":17},"end":{"line":16,"column":19}},"15":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"16":{"start":{"line":17,"column":21},"end":{"line":17,"column":141}},"17":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"18":{"start":{"line":17,"column":109},"end":{"line":17,"column":141}},"19":{"start":{"line":18,"column":4},"end":{"line":18,"column":36}},"20":{"start":{"line":19,"column":4},"end":{"line":19,"column":18}},"21":{"start":{"line":21,"column":22},"end":{"line":23,"column":1}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":62}},"23":{"start":{"line":24,"column":0},"end":{"line":24,"column":62}},"24":{"start":{"line":25,"column":26},"end":{"line":25,"column":83}},"25":{"start":{"line":26,"column":36},"end":{"line":26,"column":100}},"26":{"start":{"line":27,"column":14},"end":{"line":27,"column":56}},"27":{"start":{"line":28,"column":42},"end":{"line":28,"column":112}},"28":{"start":{"line":29,"column":31},"end":{"line":29,"column":90}},"29":{"start":{"line":31,"column":4},"end":{"line":50,"column":7}},"30":{"start":{"line":51,"column":4},"end":{"line":61,"column":7}},"31":{"start":{"line":62,"column":4},"end":{"line":76,"column":7}},"32":{"start":{"line":77,"column":4},"end":{"line":100,"column":7}},"33":{"start":{"line":101,"column":4},"end":{"line":120,"column":7}},"34":{"start":{"line":122,"column":0},"end":{"line":122,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":5,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":58},"end":{"line":4,"column":59}},"loc":{"start":{"line":4,"column":69},"end":{"line":4,"column":85}},"line":4},"2":{"name":"(anonymous_2)","decl":{"start":{"line":5,"column":6},"end":{"line":5,"column":7}},"loc":{"start":{"line":5,"column":28},"end":{"line":8,"column":1}},"line":5},"3":{"name":"(anonymous_3)","decl":{"start":{"line":9,"column":80},"end":{"line":9,"column":81}},"loc":{"start":{"line":9,"column":95},"end":{"line":11,"column":1}},"line":9},"4":{"name":"(anonymous_4)","decl":{"start":{"line":11,"column":5},"end":{"line":11,"column":6}},"loc":{"start":{"line":11,"column":20},"end":{"line":13,"column":1}},"line":11},"5":{"name":"(anonymous_5)","decl":{"start":{"line":14,"column":50},"end":{"line":14,"column":51}},"loc":{"start":{"line":14,"column":65},"end":{"line":20,"column":1}},"line":14},"6":{"name":"(anonymous_6)","decl":{"start":{"line":21,"column":56},"end":{"line":21,"column":57}},"loc":{"start":{"line":21,"column":71},"end":{"line":23,"column":1}},"line":21},"7":{"name":"auctionRoutes","decl":{"start":{"line":30,"column":15},"end":{"line":30,"column":28}},"loc":{"start":{"line":30,"column":38},"end":{"line":121,"column":1}},"line":30}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":8,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":8,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":5,"column":1}},{"start":{"line":5,"column":6},"end":{"line":8,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"type":"if","locations":[{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},{"start":{"line":6,"column":4},"end":{"line":6,"column":33}}],"line":6},"4":{"loc":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"type":"binary-expr","locations":[{"start":{"line":9,"column":26},"end":{"line":9,"column":30}},{"start":{"line":9,"column":34},"end":{"line":9,"column":57}},{"start":{"line":9,"column":63},"end":{"line":13,"column":1}}],"line":9},"5":{"loc":{"start":{"line":9,"column":63},"end":{"line":13,"column":1}},"type":"cond-expr","locations":[{"start":{"line":9,"column":80},"end":{"line":11,"column":1}},{"start":{"line":11,"column":5},"end":{"line":13,"column":1}}],"line":9},"6":{"loc":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"type":"binary-expr","locations":[{"start":{"line":14,"column":20},"end":{"line":14,"column":24}},{"start":{"line":14,"column":28},"end":{"line":14,"column":45}},{"start":{"line":14,"column":50},"end":{"line":20,"column":1}}],"line":14},"7":{"loc":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},{"start":{"line":15,"column":4},"end":{"line":15,"column":42}}],"line":15},"8":{"loc":{"start":{"line":15,"column":8},"end":{"line":15,"column":29}},"type":"binary-expr","locations":[{"start":{"line":15,"column":8},"end":{"line":15,"column":11}},{"start":{"line":15,"column":15},"end":{"line":15,"column":29}}],"line":15},"9":{"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},{"start":{"line":17,"column":4},"end":{"line":17,"column":141}}],"line":17},"10":{"loc":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},{"start":{"line":17,"column":40},"end":{"line":17,"column":141}}],"line":17},"11":{"loc":{"start":{"line":17,"column":44},"end":{"line":17,"column":107}},"type":"binary-expr","locations":[{"start":{"line":17,"column":44},"end":{"line":17,"column":59}},{"start":{"line":17,"column":63},"end":{"line":17,"column":107}}],"line":17},"12":{"loc":{"start":{"line":21,"column":22},"end":{"line":23,"column":1}},"type":"binary-expr","locations":[{"start":{"line":21,"column":23},"end":{"line":21,"column":27}},{"start":{"line":21,"column":31},"end":{"line":21,"column":51}},{"start":{"line":21,"column":56},"end":{"line":23,"column":1}}],"line":21},"13":{"loc":{"start":{"line":22,"column":11},"end":{"line":22,"column":61}},"type":"cond-expr","locations":[{"start":{"line":22,"column":37},"end":{"line":22,"column":40}},{"start":{"line":22,"column":43},"end":{"line":22,"column":61}}],"line":22},"14":{"loc":{"start":{"line":22,"column":12},"end":{"line":22,"column":33}},"type":"binary-expr","locations":[{"start":{"line":22,"column":12},"end":{"line":22,"column":15}},{"start":{"line":22,"column":19},"end":{"line":22,"column":33}}],"line":22}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1,"9":0,"10":0,"11":1,"12":2,"13":2,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1,"22":3,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":2,"6":3,"7":1},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[1,1,1],"5":[1,0],"6":[1,1,1],"7":[2,0],"8":[2,2],"9":[0,0],"10":[0,0],"11":[0,0],"12":[1,1,1],"13":[0,3],"14":[3,3]},"inputSourceMap":{"version":3,"file":"/Users/kainingxin/NodeJsWorkplace/auction/src/routes/auctionRoutes.ts","sources":["/Users/kainingxin/NodeJsWorkplace/auction/src/routes/auctionRoutes.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AACA,oFAAqE;AACrE,qGAA2E;AAC3E,yDAA2C;AAC3C,iHAA0F;AAC1F,2FAAkE;AAEnD,KAAK,UAAU,aAAa,CAAC,OAAwB;IAElE,OAAO,CAAC,GAAG,CAAC,MAAM,EAAC;QACjB,MAAM,EAAE;YACN,WAAW,EAAE,mBAAmB;YACnC,IAAI,EAAE,CAAC,SAAS,CAAC;YACjB,OAAO,EAAE,mBAAmB;YACzB,MAAM,EAAI;gBACR,IAAI,EAAE,QAAQ;gBAClB,UAAU,EAAE;oBACX,EAAE,EAAE;wBACH,IAAI,EAAE,QAAQ;wBACd,WAAW,EAAE,eAAe;qBAC5B;iBACD;aACE;YACD,QAAQ,EAAG;gBACT,GAAG,EAAG,mCAAwB;aAC/B;SACF;QACD,OAAO,EAAE,iBAAiB,CAAC,cAAc;KAC1C,CAAC,CAAA;IAEF,OAAO,CAAC,GAAG,CAAC,GAAG,EAAC;QACd,MAAM,EAAE;YACN,WAAW,EAAE,kBAAkB;YAClC,IAAI,EAAE,CAAC,SAAS,CAAC;YACjB,OAAO,EAAE,kBAAkB;YACxB,QAAQ,EAAG;gBACT,GAAG,EAAG,mCAAwB;aAC/B;SACF;QACD,OAAO,EAAE,iBAAiB,CAAC,cAAc;KAC1C,CAAC,CAAA;IAEF,OAAO,CAAC,IAAI,CAAC,GAAG,EAAC;QACf,MAAM,EAAE;YACN,WAAW,EAAE,iBAAiB;YACjC,IAAI,EAAE,CAAC,SAAS,CAAC;YACjB,OAAO,EAAE,iBAAiB;YACvB,IAAI,EAAE,8BAAoB;YAC1B,QAAQ,EAAG;gBACT,GAAG,EAAG,yCAAiC;aACxC;SACF;QACD,UAAU,EAAE;YACZ,KAAK,CAAC,oBAAoB;SAC1B;QACA,OAAO,EAAE,iBAAiB,CAAC,UAAU;KACtC,CAAC,CAAA;IAEF,OAAO,CAAC,KAAK,CAAC,MAAM,EAAC;QACnB,MAAM,EAAE;YACN,WAAW,EAAE,sBAAsB;YACtC,IAAI,EAAE,CAAC,SAAS,CAAC;YACjB,OAAO,EAAE,sBAAsB;YAC5B,MAAM,EAAI;gBACR,IAAI,EAAE,QAAQ;gBAClB,UAAU,EAAE;oBACX,EAAE,EAAE;wBACH,IAAI,EAAE,QAAQ;wBACd,WAAW,EAAE,eAAe;qBAC5B;iBACD;aACE;YACD,IAAI,EAAE,8BAAoB;YAC1B,QAAQ,EAAG;gBACT,GAAG,EAAG,yCAAiC;aACxC;SACF;QACD,UAAU,EAAE;YACZ,KAAK,CAAC,oBAAoB;SAC1B;QACA,OAAO,EAAE,iBAAiB,CAAC,iBAAiB;KAC7C,CAAC,CAAA;IAEF,OAAO,CAAC,MAAM,CAAC,MAAM,EAAC;QACpB,MAAM,EAAE;YACN,WAAW,EAAE,sBAAsB;YACtC,IAAI,EAAE,CAAC,SAAS,CAAC;YACjB,OAAO,EAAE,sBAAsB;YAC5B,MAAM,EAAI;gBACR,IAAI,EAAE,QAAQ;gBAClB,UAAU,EAAE;oBACX,EAAE,EAAE;wBACH,IAAI,EAAE,QAAQ;wBACd,WAAW,EAAE,eAAe;qBAC5B;iBACD;aACE;YACD,QAAQ,EAAG;gBACT,GAAG,EAAG,yCAAiC;aACxC;SACF;QACD,OAAO,EAAE,iBAAiB,CAAC,iBAAiB;KAC7C,CAAC,CAAA;AACJ,CAAC;AAhGD,gCAgGC","sourcesContent":["import { FastifyInstance, RouteOptions } from \"fastify\";\nimport * as auctionController from '../controllers/auctionController'\nimport auctionGetResponseSchema from '../schemas/auction.get.response.json'\nimport * as auths from \"../services/auths\";\nimport addUpdateDeleteGoodResponseSchema from '../schemas/add.update.delete.response.json'\nimport auctionRequestSchema from '../schemas/auction.request.json'\n\nexport default async function auctionRoutes(fastify: FastifyInstance) {\n\n  fastify.get('/:id',{\n    schema: {\n      description: 'Get auction by id',\n\t\t\ttags: ['auction'],\n\t\t\tsummary: 'Get auction by id',\n      params :  {\n        type: 'object',\n\t\t\t\tproperties: {\n\t\t\t\t\tid: {\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tdescription: 'id of auction'\n\t\t\t\t\t}\n\t\t\t\t}\n      },\n      response : {\n        200 : auctionGetResponseSchema\n      }\n    },\n    handler: auctionController.getAuctionById\n  })\n\n  fastify.get('/',{\n    schema: {\n      description: 'Get all auctions',\n\t\t\ttags: ['auction'],\n\t\t\tsummary: 'Get all auctions',\n      response : {\n        200 : auctionGetResponseSchema\n      }\n    },\n    handler: auctionController.getAllAuctions\n  })\n\n  fastify.post('/',{\n    schema: {\n      description: 'Add new auction',\n\t\t\ttags: ['auction'],\n\t\t\tsummary: 'Add new auction',\n      body: auctionRequestSchema,\n      response : {\n        200 : addUpdateDeleteGoodResponseSchema\n      }\n    },\n    preHandler: [\n\t\t  auths.auctioneerAuthPolicy\n\t  ],\n    handler: auctionController.addAuction\n  })\n\n  fastify.patch('/:id',{\n    schema: {\n      description: 'Update auction by id',\n\t\t\ttags: ['auction'],\n\t\t\tsummary: 'Update auction by id',\n      params :  {\n        type: 'object',\n\t\t\t\tproperties: {\n\t\t\t\t\tid: {\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tdescription: 'id of auction'\n\t\t\t\t\t}\n\t\t\t\t}\n      },\n      body: auctionRequestSchema,\n      response : {\n        200 : addUpdateDeleteGoodResponseSchema\n      }\n    },\n    preHandler: [\n\t\t  auths.auctioneerAuthPolicy\n\t  ],\n    handler: auctionController.updateAuctionById\n  })\n\n  fastify.delete(\"/:id\",{\n    schema: {\n      description: 'Delete auction by id',\n\t\t\ttags: ['auction'],\n\t\t\tsummary: 'Delete auction by id',\n      params :  {\n        type: 'object',\n\t\t\t\tproperties: {\n\t\t\t\t\tid: {\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tdescription: 'id of auction'\n\t\t\t\t\t}\n\t\t\t\t}\n      },\n      response : {\n        200 : addUpdateDeleteGoodResponseSchema\n      }\n    },\n    handler: auctionController.deleteAuctionById\n  })\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a358bcc0726b71019e8ed4bdb611cc4b53da0aea","contentHash":"6b2fec39f85f5357d65f9ab0becc65162cf17b067fbfed6d7eb9810067b9fad4"},"/Users/kainingxin/NodeJsWorkplace/auction/src/controllers/auctionController.ts":{"path":"/Users/kainingxin/NodeJsWorkplace/auction/src/controllers/auctionController.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":4},"end":{"line":4,"column":89}},"4":{"start":{"line":4,"column":71},"end":{"line":4,"column":83}},"5":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"6":{"start":{"line":6,"column":26},"end":{"line":6,"column":33}},"7":{"start":{"line":7,"column":4},"end":{"line":7,"column":17}},"8":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"9":{"start":{"line":10,"column":4},"end":{"line":10,"column":72}},"10":{"start":{"line":12,"column":4},"end":{"line":12,"column":21}},"11":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"12":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"13":{"start":{"line":15,"column":31},"end":{"line":15,"column":42}},"14":{"start":{"line":16,"column":17},"end":{"line":16,"column":19}},"15":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"16":{"start":{"line":17,"column":21},"end":{"line":17,"column":141}},"17":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"18":{"start":{"line":17,"column":109},"end":{"line":17,"column":141}},"19":{"start":{"line":18,"column":4},"end":{"line":18,"column":36}},"20":{"start":{"line":19,"column":4},"end":{"line":19,"column":18}},"21":{"start":{"line":21,"column":22},"end":{"line":23,"column":1}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":62}},"23":{"start":{"line":24,"column":0},"end":{"line":24,"column":62}},"24":{"start":{"line":25,"column":0},"end":{"line":25,"column":134}},"25":{"start":{"line":26,"column":28},"end":{"line":26,"column":56}},"26":{"start":{"line":27,"column":23},"end":{"line":27,"column":60}},"27":{"start":{"line":28,"column":27},"end":{"line":28,"column":85}},"28":{"start":{"line":29,"column":18},"end":{"line":29,"column":43}},"29":{"start":{"line":30,"column":28},"end":{"line":30,"column":58}},"30":{"start":{"line":31,"column":23},"end":{"line":31,"column":74}},"31":{"start":{"line":33,"column":4},"end":{"line":33,"column":47}},"32":{"start":{"line":34,"column":4},"end":{"line":37,"column":7}},"33":{"start":{"line":35,"column":8},"end":{"line":35,"column":79}},"34":{"start":{"line":36,"column":8},"end":{"line":36,"column":127}},"35":{"start":{"line":39,"column":0},"end":{"line":39,"column":40}},"36":{"start":{"line":41,"column":4},"end":{"line":50,"column":5}},"37":{"start":{"line":42,"column":8},"end":{"line":42,"column":71}},"38":{"start":{"line":43,"column":8},"end":{"line":46,"column":11}},"39":{"start":{"line":44,"column":12},"end":{"line":44,"column":76}},"40":{"start":{"line":45,"column":12},"end":{"line":45,"column":132}},"41":{"start":{"line":49,"column":8},"end":{"line":49,"column":93}},"42":{"start":{"line":52,"column":0},"end":{"line":52,"column":40}},"43":{"start":{"line":54,"column":4},"end":{"line":54,"column":66}},"44":{"start":{"line":55,"column":4},"end":{"line":60,"column":7}},"45":{"start":{"line":56,"column":8},"end":{"line":56,"column":62}},"46":{"start":{"line":57,"column":8},"end":{"line":57,"column":141}},"47":{"start":{"line":59,"column":8},"end":{"line":59,"column":91}},"48":{"start":{"line":62,"column":0},"end":{"line":62,"column":32}},"49":{"start":{"line":64,"column":4},"end":{"line":76,"column":5}},"50":{"start":{"line":65,"column":8},"end":{"line":65,"column":66}},"51":{"start":{"line":66,"column":8},"end":{"line":72,"column":11}},"52":{"start":{"line":67,"column":12},"end":{"line":67,"column":74}},"53":{"start":{"line":68,"column":12},"end":{"line":69,"column":114}},"54":{"start":{"line":69,"column":16},"end":{"line":69,"column":114}},"55":{"start":{"line":71,"column":12},"end":{"line":71,"column":131}},"56":{"start":{"line":75,"column":8},"end":{"line":75,"column":93}},"57":{"start":{"line":78,"column":0},"end":{"line":78,"column":46}},"58":{"start":{"line":80,"column":4},"end":{"line":80,"column":62}},"59":{"start":{"line":81,"column":4},"end":{"line":84,"column":7}},"60":{"start":{"line":82,"column":8},"end":{"line":82,"column":70}},"61":{"start":{"line":83,"column":8},"end":{"line":83,"column":142}},"62":{"start":{"line":86,"column":0},"end":{"line":86,"column":46}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":5,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":58},"end":{"line":4,"column":59}},"loc":{"start":{"line":4,"column":69},"end":{"line":4,"column":85}},"line":4},"2":{"name":"(anonymous_2)","decl":{"start":{"line":5,"column":6},"end":{"line":5,"column":7}},"loc":{"start":{"line":5,"column":28},"end":{"line":8,"column":1}},"line":5},"3":{"name":"(anonymous_3)","decl":{"start":{"line":9,"column":80},"end":{"line":9,"column":81}},"loc":{"start":{"line":9,"column":95},"end":{"line":11,"column":1}},"line":9},"4":{"name":"(anonymous_4)","decl":{"start":{"line":11,"column":5},"end":{"line":11,"column":6}},"loc":{"start":{"line":11,"column":20},"end":{"line":13,"column":1}},"line":11},"5":{"name":"(anonymous_5)","decl":{"start":{"line":14,"column":50},"end":{"line":14,"column":51}},"loc":{"start":{"line":14,"column":65},"end":{"line":20,"column":1}},"line":14},"6":{"name":"(anonymous_6)","decl":{"start":{"line":21,"column":56},"end":{"line":21,"column":57}},"loc":{"start":{"line":21,"column":71},"end":{"line":23,"column":1}},"line":21},"7":{"name":"getAllAuctions","decl":{"start":{"line":32,"column":15},"end":{"line":32,"column":29}},"loc":{"start":{"line":32,"column":42},"end":{"line":38,"column":1}},"line":32},"8":{"name":"(anonymous_8)","decl":{"start":{"line":34,"column":41},"end":{"line":34,"column":42}},"loc":{"start":{"line":34,"column":50},"end":{"line":37,"column":5}},"line":34},"9":{"name":"getAuctionById","decl":{"start":{"line":40,"column":15},"end":{"line":40,"column":29}},"loc":{"start":{"line":40,"column":42},"end":{"line":51,"column":1}},"line":40},"10":{"name":"(anonymous_10)","decl":{"start":{"line":43,"column":64},"end":{"line":43,"column":65}},"loc":{"start":{"line":43,"column":73},"end":{"line":46,"column":9}},"line":43},"11":{"name":"addAuction","decl":{"start":{"line":53,"column":15},"end":{"line":53,"column":25}},"loc":{"start":{"line":53,"column":38},"end":{"line":61,"column":1}},"line":53},"12":{"name":"(anonymous_12)","decl":{"start":{"line":55,"column":51},"end":{"line":55,"column":52}},"loc":{"start":{"line":55,"column":58},"end":{"line":60,"column":5}},"line":55},"13":{"name":"updateAuctionById","decl":{"start":{"line":63,"column":15},"end":{"line":63,"column":32}},"loc":{"start":{"line":63,"column":45},"end":{"line":77,"column":1}},"line":63},"14":{"name":"(anonymous_14)","decl":{"start":{"line":66,"column":77},"end":{"line":66,"column":78}},"loc":{"start":{"line":66,"column":89},"end":{"line":72,"column":9}},"line":66},"15":{"name":"deleteAuctionById","decl":{"start":{"line":79,"column":15},"end":{"line":79,"column":32}},"loc":{"start":{"line":79,"column":45},"end":{"line":85,"column":1}},"line":79},"16":{"name":"(anonymous_16)","decl":{"start":{"line":81,"column":63},"end":{"line":81,"column":64}},"loc":{"start":{"line":81,"column":75},"end":{"line":84,"column":5}},"line":81}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":8,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":8,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":5,"column":1}},{"start":{"line":5,"column":6},"end":{"line":8,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"type":"if","locations":[{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},{"start":{"line":6,"column":4},"end":{"line":6,"column":33}}],"line":6},"4":{"loc":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"type":"binary-expr","locations":[{"start":{"line":9,"column":26},"end":{"line":9,"column":30}},{"start":{"line":9,"column":34},"end":{"line":9,"column":57}},{"start":{"line":9,"column":63},"end":{"line":13,"column":1}}],"line":9},"5":{"loc":{"start":{"line":9,"column":63},"end":{"line":13,"column":1}},"type":"cond-expr","locations":[{"start":{"line":9,"column":80},"end":{"line":11,"column":1}},{"start":{"line":11,"column":5},"end":{"line":13,"column":1}}],"line":9},"6":{"loc":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"type":"binary-expr","locations":[{"start":{"line":14,"column":20},"end":{"line":14,"column":24}},{"start":{"line":14,"column":28},"end":{"line":14,"column":45}},{"start":{"line":14,"column":50},"end":{"line":20,"column":1}}],"line":14},"7":{"loc":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},{"start":{"line":15,"column":4},"end":{"line":15,"column":42}}],"line":15},"8":{"loc":{"start":{"line":15,"column":8},"end":{"line":15,"column":29}},"type":"binary-expr","locations":[{"start":{"line":15,"column":8},"end":{"line":15,"column":11}},{"start":{"line":15,"column":15},"end":{"line":15,"column":29}}],"line":15},"9":{"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},{"start":{"line":17,"column":4},"end":{"line":17,"column":141}}],"line":17},"10":{"loc":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},{"start":{"line":17,"column":40},"end":{"line":17,"column":141}}],"line":17},"11":{"loc":{"start":{"line":17,"column":44},"end":{"line":17,"column":107}},"type":"binary-expr","locations":[{"start":{"line":17,"column":44},"end":{"line":17,"column":59}},{"start":{"line":17,"column":63},"end":{"line":17,"column":107}}],"line":17},"12":{"loc":{"start":{"line":21,"column":22},"end":{"line":23,"column":1}},"type":"binary-expr","locations":[{"start":{"line":21,"column":23},"end":{"line":21,"column":27}},{"start":{"line":21,"column":31},"end":{"line":21,"column":51}},{"start":{"line":21,"column":56},"end":{"line":23,"column":1}}],"line":21},"13":{"loc":{"start":{"line":22,"column":11},"end":{"line":22,"column":61}},"type":"cond-expr","locations":[{"start":{"line":22,"column":37},"end":{"line":22,"column":40}},{"start":{"line":22,"column":43},"end":{"line":22,"column":61}}],"line":22},"14":{"loc":{"start":{"line":22,"column":12},"end":{"line":22,"column":33}},"type":"binary-expr","locations":[{"start":{"line":22,"column":12},"end":{"line":22,"column":15}},{"start":{"line":22,"column":19},"end":{"line":22,"column":33}}],"line":22},"15":{"loc":{"start":{"line":68,"column":12},"end":{"line":69,"column":114}},"type":"if","locations":[{"start":{"line":68,"column":12},"end":{"line":69,"column":114}},{"start":{"line":68,"column":12},"end":{"line":69,"column":114}}],"line":68}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1,"9":0,"10":0,"11":1,"12":1,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":0,"42":1,"43":0,"44":0,"45":0,"46":0,"47":0,"48":1,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":1,"58":0,"59":0,"60":0,"61":0,"62":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[1,1,1],"5":[1,0],"6":[1,1,1],"7":[1,0],"8":[1,1],"9":[0,0],"10":[0,0],"11":[0,0],"12":[1,1,1],"13":[1,0],"14":[1,1],"15":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/kainingxin/NodeJsWorkplace/auction/src/controllers/auctionController.ts","sources":["/Users/kainingxin/NodeJsWorkplace/auction/src/controllers/auctionController.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AACA,yDAAgD;AAEhD,6DAAiE;AACjE,sFAA8D;AAC9D,4CAAkC;AAElC,2DAA+D;AAC/D,2EAA6D;AAEtD,KAAK,UAAU,cAAc,CAAC,GAAmB,EAAC,KAAmB;IAC3E,aAAG,CAAC,GAAG,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAA;IAChC,cAAc,CAAC,cAAc,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;QAC5C,aAAG,CAAC,GAAG,CAAC,IAAI,CAAC,0BAA0B,KAAK,CAAC,MAAM,QAAQ,CAAC,CAAA;QAC5D,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,0BAAgB,CAAC,+BAAW,CAAC,OAAO,EAAC,gBAAgB,EAAC,KAAK,CAAC,CAAC,CAAA;IACvF,CAAC,CAAC,CAAA;AACH,CAAC;AAND,wCAMC;AAEM,KAAK,UAAU,cAAc,CAAC,GAA0C,EAAC,KAAmB;IAClG,IAAI;QACH,aAAG,CAAC,GAAG,CAAC,IAAI,CAAC,uBAAuB,GAAG,CAAC,MAAM,CAAC,EAAE,EAAE,CAAE,CAAA;QACrD,MAAM,cAAc,CAAC,cAAc,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;YAE9D,aAAG,CAAC,GAAG,CAAC,IAAI,CAAC,mBAAmB,KAAK,CAAC,GAAG,WAAW,CAAC,CAAA;YACrD,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,0BAAgB,CAAC,+BAAW,CAAC,OAAO,EAAC,eAAe,EAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;QACxF,CAAC,CAAC,CAAA;KACH;IAAC,OAAO,GAAG,EAAE;QACb,MAAM,IAAI,kCAAmB,CAAC,uBAAuB,GAAG,CAAC,MAAM,CAAC,EAAE,EAAE,CAAC,CAAC;KACtE;AACF,CAAC;AAXD,wCAWC;AAEM,KAAK,UAAU,UAAU,CAAC,GAAoC,EAAC,KAAmB;IACxF,aAAG,CAAC,GAAG,CAAC,IAAI,CAAC,eAAe,GAAG,CAAC,IAAI,CAAC,WAAW,EAAE,CAAE,CAAA;IACpD,MAAM,cAAc,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;QACpD,aAAG,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,GAAG,CAAC,GAAG,WAAW,CAAE,CAAA;QAC5C,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,0BAAgB,CAAC,+BAAW,CAAC,OAAO,EAAC,wBAAwB,EAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACrG,6EAA6E;QAC7E,IAAA,4CAAwB,EAAC,GAAG,CAAC,GAAG,EAAC,GAAG,CAAC,OAAO,EAAC,GAAG,CAAC,KAAK,CAAC,CAAC;IACzD,CAAC,CAAC,CAAA;AACH,CAAC;AARD,gCAQC;AAEM,KAAK,UAAU,iBAAiB,CAAC,GAAsD,EAAC,KAAmB;IACjH,IAAG;QACF,aAAG,CAAC,GAAG,CAAC,IAAI,CAAC,kBAAkB,GAAG,CAAC,MAAM,CAAC,EAAE,EAAE,CAAE,CAAA;QAChD,MAAM,cAAc,CAAC,iBAAiB,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,EAAC,GAAG,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE;YAC9E,aAAG,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,GAAG,CAAC,MAAM,CAAC,EAAE,aAAa,CAAE,CAAA;YACpD,IAAG,GAAG,CAAC,IAAI,CAAC,OAAO,IAAI,QAAQ,CAAC,OAAO;gBAAE,IAAA,4CAAwB,EAAC,QAAQ,CAAC,GAAG,EAAC,QAAQ,CAAC,OAAO,EAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;YAAA,CAAC;YACjH,OAAO,IAAI,0BAAgB,CAAC,+BAAW,CAAC,EAAE,EAAC,0BAA0B,EAAC,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAA;QACvF,CAAC,CAAC,CAAA;KACF;IAAC,OAAM,GAAG,EAAC;QACX,MAAM,IAAI,kCAAmB,CAAC,uBAAuB,GAAG,CAAC,MAAM,CAAC,EAAE,EAAE,CAAC,CAAC;KACtE;AACF,CAAC;AAXD,8CAWC;AAEM,KAAK,UAAU,iBAAiB,CAAC,GAAyC,EAAC,KAAmB;IACpG,aAAG,CAAC,GAAG,CAAC,IAAI,CAAC,kBAAkB,GAAG,CAAC,MAAM,CAAC,EAAE,EAAE,CAAE,CAAA;IAChD,MAAM,cAAc,CAAC,iBAAiB,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE;QACrE,aAAG,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,GAAG,CAAC,MAAM,CAAC,EAAE,aAAa,CAAE,CAAA;QACpD,OAAO,IAAI,0BAAgB,CAAC,+BAAW,CAAC,iBAAiB,EAAC,0BAA0B,EAAC,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAA;IACtG,CAAC,CAAC,CAAA;AAEH,CAAC;AAPD,8CAOC","sourcesContent":["import { FastifyRequest, FastifyReply } from \"fastify\";\nimport { StatusCodes } from \"http-status-codes\";\nimport {Auction} from \"../models/auction\";\nimport { EntityNotFoundError } from \"../models/oth/customErrors\";\nimport ResponseTemplate from \"../models/oth/responseTemplate\";\nimport {app} from \"../lib/fastify\"\n\nimport { scheduleUpdateAuctionJob } from \"./biddingController\";\nimport * as auctionService from \"../services/auctionService\";\n\nexport async function getAllAuctions(req: FastifyRequest,reply: FastifyReply){\n\tapp.log.info(\"Get all auctions\")\n\tauctionService.getAllAuctions().then(value => {\n\t\tapp.log.info(`Auctions retrived with ${value.length} items`)\n\t\treply.code(200).send(new ResponseTemplate(StatusCodes.CREATED,\"Auctions found\",value))\n\t}) \n}\n\nexport async function getAuctionById(req: FastifyRequest<{Params: {id:string}}>,reply: FastifyReply){\n\ttry {\n\t\tapp.log.info(`Get auction by id : ${req.params.id}` )\n\t\tawait auctionService.getAuctionById(req.params.id).then(value => \n\t\t\t{\n\t\t\t\tapp.log.info(`Auction with id ${value._id} retrived`)\n\t\t\t\treply.code(200).send(new ResponseTemplate(StatusCodes.CREATED,\"Auction found\",[value]))\n\t\t\t})\n\t} catch (err) {\n\t\tthrow new EntityNotFoundError(`Auction not found : ${req.params.id}`);\n\t}\n}\n\nexport async function addAuction(req: FastifyRequest<{Body: Auction}>,reply: FastifyReply){\n\tapp.log.info(`Add auction ${req.body.auctionName}` )\n\tawait auctionService.addAuction(req.body).then(val => {\n\t\tapp.log.info(`Auction ${val._id} is added` )\n\t\treply.status(201).send(new ResponseTemplate(StatusCodes.CREATED,\"Auction has been added\",[val._id]));\n\t\t//Once the auction is done , the status of goods will be update automatically\n\t\tscheduleUpdateAuctionJob(val._id,val.endTime,val.goods);\n\t})\n}\n\nexport async function updateAuctionById(req: FastifyRequest<{Params:{id:string},Body:Auction}>,reply: FastifyReply){\n\ttry{\n\t\tapp.log.info(`Update auction ${req.params.id}` )\n\t\tawait auctionService.updateAuctionById(req.params.id,req.body).then(response => {\n\t\t\tapp.log.info(`Auction ${req.params.id} is updated` )\n\t\t\tif(req.body.endTime != response.endTime) scheduleUpdateAuctionJob(response._id,response.endTime,response.goods);;\n\t\t\treturn new ResponseTemplate(StatusCodes.OK,\"Auction has been updated\",[req.params.id])\n\t\t})\t\n\t} catch(err){\n\t\tthrow new EntityNotFoundError(`Auction not found : ${req.params.id}`);\n\t}\n}\n\nexport async function deleteAuctionById(req: FastifyRequest<{Params:{id:string}}>,reply: FastifyReply){\n\tapp.log.info(`Delete auction ${req.params.id}` )\n\tawait auctionService.deleteAuctionById(req.params.id).then(response => {\n\t\tapp.log.info(`Auction ${req.params.id} is deleted` )\n\t\treturn new ResponseTemplate(StatusCodes.MOVED_PERMANENTLY,\"Auction has been deleted\",[req.params.id])\n\t})\n\t\n}\n\n\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f1e4c048b1669fd2ab7ef5c01dbf3d54ffdc883e","contentHash":"d879a5ad593b98f06b902f4fb809b01867964319ea2e15e773afbda011189d83"},"/Users/kainingxin/NodeJsWorkplace/auction/src/controllers/biddingController.ts":{"path":"/Users/kainingxin/NodeJsWorkplace/auction/src/controllers/biddingController.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":96}},"4":{"start":{"line":7,"column":28},"end":{"line":7,"column":56}},"5":{"start":{"line":8,"column":23},"end":{"line":8,"column":60}},"6":{"start":{"line":9,"column":27},"end":{"line":9,"column":85}},"7":{"start":{"line":10,"column":15},"end":{"line":10,"column":57}},"8":{"start":{"line":11,"column":24},"end":{"line":11,"column":48}},"9":{"start":{"line":12,"column":18},"end":{"line":12,"column":63}},"10":{"start":{"line":13,"column":18},"end":{"line":13,"column":43}},"11":{"start":{"line":14,"column":21},"end":{"line":14,"column":58}},"12":{"start":{"line":20,"column":19},"end":{"line":50,"column":1}},"13":{"start":{"line":21,"column":4},"end":{"line":21,"column":48}},"14":{"start":{"line":22,"column":4},"end":{"line":22,"column":66}},"15":{"start":{"line":23,"column":4},"end":{"line":23,"column":59}},"16":{"start":{"line":24,"column":4},"end":{"line":24,"column":57}},"17":{"start":{"line":25,"column":4},"end":{"line":49,"column":7}},"18":{"start":{"line":27,"column":20},"end":{"line":27,"column":30}},"19":{"start":{"line":28,"column":8},"end":{"line":48,"column":9}},"20":{"start":{"line":29,"column":26},"end":{"line":29,"column":55}},"21":{"start":{"line":30,"column":27},"end":{"line":30,"column":79}},"22":{"start":{"line":31,"column":12},"end":{"line":44,"column":15}},"23":{"start":{"line":32,"column":16},"end":{"line":43,"column":17}},"24":{"start":{"line":33,"column":20},"end":{"line":33,"column":55}},"25":{"start":{"line":34,"column":20},"end":{"line":34,"column":49}},"26":{"start":{"line":35,"column":20},"end":{"line":38,"column":23}},"27":{"start":{"line":36,"column":24},"end":{"line":36,"column":72}},"28":{"start":{"line":37,"column":24},"end":{"line":37,"column":143}},"29":{"start":{"line":41,"column":20},"end":{"line":41,"column":68}},"30":{"start":{"line":42,"column":20},"end":{"line":42,"column":105}},"31":{"start":{"line":47,"column":12},"end":{"line":47,"column":80}},"32":{"start":{"line":51,"column":0},"end":{"line":51,"column":32}},"33":{"start":{"line":55,"column":31},"end":{"line":62,"column":1}},"34":{"start":{"line":56,"column":16},"end":{"line":56,"column":26}},"35":{"start":{"line":57,"column":4},"end":{"line":61,"column":7}},"36":{"start":{"line":58,"column":8},"end":{"line":60,"column":11}},"37":{"start":{"line":59,"column":12},"end":{"line":59,"column":95}},"38":{"start":{"line":63,"column":0},"end":{"line":63,"column":56}},"39":{"start":{"line":70,"column":33},"end":{"line":88,"column":1}},"40":{"start":{"line":71,"column":4},"end":{"line":87,"column":7}},"41":{"start":{"line":73,"column":8},"end":{"line":86,"column":11}},"42":{"start":{"line":74,"column":12},"end":{"line":85,"column":15}},"43":{"start":{"line":75,"column":16},"end":{"line":83,"column":17}},"44":{"start":{"line":76,"column":20},"end":{"line":76,"column":63}},"45":{"start":{"line":77,"column":20},"end":{"line":77,"column":122}},"46":{"start":{"line":80,"column":20},"end":{"line":80,"column":63}},"47":{"start":{"line":81,"column":20},"end":{"line":81,"column":38}},"48":{"start":{"line":82,"column":20},"end":{"line":82,"column":122}},"49":{"start":{"line":84,"column":16},"end":{"line":84,"column":72}},"50":{"start":{"line":89,"column":0},"end":{"line":89,"column":60}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":20,"column":19},"end":{"line":20,"column":20}},"loc":{"start":{"line":20,"column":41},"end":{"line":50,"column":1}},"line":20},"2":{"name":"(anonymous_2)","decl":{"start":{"line":25,"column":109},"end":{"line":25,"column":110}},"loc":{"start":{"line":25,"column":128},"end":{"line":49,"column":5}},"line":25},"3":{"name":"(anonymous_3)","decl":{"start":{"line":31,"column":74},"end":{"line":31,"column":75}},"loc":{"start":{"line":31,"column":90},"end":{"line":44,"column":13}},"line":31},"4":{"name":"(anonymous_4)","decl":{"start":{"line":35,"column":90},"end":{"line":35,"column":91}},"loc":{"start":{"line":35,"column":97},"end":{"line":38,"column":21}},"line":35},"5":{"name":"(anonymous_5)","decl":{"start":{"line":55,"column":31},"end":{"line":55,"column":32}},"loc":{"start":{"line":55,"column":43},"end":{"line":62,"column":1}},"line":55},"6":{"name":"(anonymous_6)","decl":{"start":{"line":57,"column":107},"end":{"line":57,"column":108}},"loc":{"start":{"line":57,"column":119},"end":{"line":61,"column":5}},"line":57},"7":{"name":"(anonymous_7)","decl":{"start":{"line":58,"column":25},"end":{"line":58,"column":26}},"loc":{"start":{"line":58,"column":36},"end":{"line":60,"column":9}},"line":58},"8":{"name":"(anonymous_8)","decl":{"start":{"line":70,"column":33},"end":{"line":70,"column":34}},"loc":{"start":{"line":70,"column":70},"end":{"line":88,"column":1}},"line":70},"9":{"name":"(anonymous_9)","decl":{"start":{"line":71,"column":46},"end":{"line":71,"column":47}},"loc":{"start":{"line":71,"column":58},"end":{"line":87,"column":5}},"line":71},"10":{"name":"(anonymous_10)","decl":{"start":{"line":73,"column":83},"end":{"line":73,"column":84}},"loc":{"start":{"line":73,"column":90},"end":{"line":86,"column":9}},"line":73},"11":{"name":"(anonymous_11)","decl":{"start":{"line":74,"column":26},"end":{"line":74,"column":27}},"loc":{"start":{"line":74,"column":42},"end":{"line":85,"column":13}},"line":74}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":28,"column":8},"end":{"line":48,"column":9}},"type":"if","locations":[{"start":{"line":28,"column":8},"end":{"line":48,"column":9}},{"start":{"line":28,"column":8},"end":{"line":48,"column":9}}],"line":28},"4":{"loc":{"start":{"line":28,"column":12},"end":{"line":28,"column":71}},"type":"binary-expr","locations":[{"start":{"line":28,"column":12},"end":{"line":28,"column":19}},{"start":{"line":28,"column":23},"end":{"line":28,"column":46}},{"start":{"line":28,"column":50},"end":{"line":28,"column":71}}],"line":28},"5":{"loc":{"start":{"line":32,"column":16},"end":{"line":43,"column":17}},"type":"if","locations":[{"start":{"line":32,"column":16},"end":{"line":43,"column":17}},{"start":{"line":32,"column":16},"end":{"line":43,"column":17}}],"line":32},"6":{"loc":{"start":{"line":32,"column":20},"end":{"line":32,"column":95}},"type":"binary-expr","locations":[{"start":{"line":32,"column":20},"end":{"line":32,"column":54}},{"start":{"line":32,"column":58},"end":{"line":32,"column":95}}],"line":32},"7":{"loc":{"start":{"line":75,"column":16},"end":{"line":83,"column":17}},"type":"if","locations":[{"start":{"line":75,"column":16},"end":{"line":83,"column":17}},{"start":{"line":75,"column":16},"end":{"line":83,"column":17}}],"line":75}},"s":{"0":1,"1":3,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":0,"30":0,"31":0,"32":1,"33":1,"34":0,"35":0,"36":0,"37":0,"38":1,"39":1,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":1},"f":{"0":3,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},"b":{"0":[1,1,1],"1":[3,0],"2":[3,3],"3":[1,0],"4":[1,1,1],"5":[1,0],"6":[1,1],"7":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/kainingxin/NodeJsWorkplace/auction/src/controllers/biddingController.ts","sources":["/Users/kainingxin/NodeJsWorkplace/auction/src/controllers/biddingController.ts"],"names":[],"mappings":"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","sourcesContent":["import { FastifyReply, FastifyRequest } from \"fastify\";\nimport { StatusCodes } from \"http-status-codes\";\nimport { EntityNotFoundError, InvalidPriceError } from \"../models/oth/customErrors\";\nimport ResponseTemplate from \"../models/oth/responseTemplate\";\nimport GoodSchema, { Good } from \"../models/good\";\nimport { scheduleJob } from \"node-schedule\";\nimport AuctionSchema, { Auction } from \"../models/auction\"\nimport { app } from \"../lib/fastify\";\nimport { GoodStatus } from \"../models/enums/goodStatus\";\nimport { ObjectId } from \"mongodb\";\n\n\ninterface Payload {\n\trole: string,\n\tbidderId: string,\n\temail: string\n}\n\n/**\n * offer price to a good of an auction\n * @param req \n * @param reply \n */\nexport const offerPrice = async (req: FastifyRequest<{ Params: { auctionId: string, goodId: string, price: number } }>, reply: FastifyReply) => {\n\tapp.log.info(\"Recevie price for\" )\n\tapp.log.info(\"auctionId : \" + req.params.auctionId)\n\tapp.log.info(\"goodId: \" + req.params.goodId)\n\tapp.log.info(\"price: \" + req.params.price)\n\tawait AuctionSchema.findOne({_id:req.params.auctionId,goods:{$in:[req.params.goodId]}}).then(async (auction) => {\n\t\t//verify auction exist and is underway\n\t\tconst now = new Date();\n\t\tif (auction  && auction.startTime < now && auction.endTime > now) {\n\t\t\tconst token = req.raw.headers.authorization as string;\n\t\t\tconst bidder = app.jwt.decode(token, { complete: false }) as Payload;\n\t\t\tawait GoodSchema.findOne({ _id: req.params.goodId }).then(async good => {\n\t\t\t\tif (good.finalPrice < req.params.price && req.params.price > good.startingPrice) {\n\t\t\t\t\tgood.finalPrice = req.params.price;\n\t\t\t\t\tgood.buyer = bidder.bidderId\n\t\t\t\t\tawait GoodSchema.updateOne({ _id: req.params.goodId }, good).then(res => {\n\t\t\t\t\t\tapp.log.info(`Offerd price accpeted`)\n\t\t\t\t\t\treply.code(200).send(new ResponseTemplate(StatusCodes.OK,\"Offer accepted\",[good._id]))\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\tapp.log.info(`Offerd price rejected`)\n\t\t\t\t\tthrow new InvalidPriceError(`Price is lower than ${good.finalPrice}`)\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tthrow new EntityNotFoundError(`Auction started yet`)\n\t\t}\n\t})\n\n}\n\n/**\n * After un auction ended the status of goods should be updated automatically\n */\nexport const setupAuctionsUpdateSys = async () => {\n\tconst now = new Date();\n\tawait AuctionSchema.find({ $or: [{ startTime: { $gte: now } }, { endTime: { $gte: now } }] }).then(auctions => {\n\t\tauctions.forEach(auction => {\n\t\t\tscheduleUpdateAuctionJob(auction._id, auction.endTime, auction.goods);\n\t\t})\n\t})\n}\n\n/**\n * auto update the good's status of an auction after it finished\n * @param auctionId \n * @param endTime \n * @param goods \n */\nexport const scheduleUpdateAuctionJob = async (auctionId: string | ObjectId, endTime: Date, goods: [Good]) => {\n\n\tscheduleJob(endTime, async () => {\n\t\t//Verify first the end time of auction has not been modified, if not execute update program\n\t\tawait AuctionSchema.findOne({ _id: auctionId, endTime: endTime }).then(val => {\n\t\t\tgoods.forEach(async good => {\n\t\t\t\tif (good.finalPrice >= good.reservePrice) {\n\t\t\t\t\tgood.status = GoodStatus.SOLD;\n\t\t\t\t\tapp.log.info(`Good={_id:${good._id}} status is updated to ${GoodStatus.SOLD}`)\n\t\t\t\t} else {\n\t\t\t\t\tgood.status = GoodStatus.PASS;\n\t\t\t\t\tgood.buyer = null;\n\t\t\t\t\tapp.log.info(`Good={_id:${good._id}} status is updated to ${GoodStatus.PASS}`)\n\t\t\t\t}\n\t\t\t\tawait GoodSchema.updateOne({ _id: good._id }, good);\n\t\t\t})\n\t\t})\n\t})\n\n\n}\n\n\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"889284bc4431831dedb0598c1437d07eabafb5a9","contentHash":"c13be79c9a00331e48e9e80f14ca65f43d316f3bbc495b9279082da5befb3b11"},"/Users/kainingxin/NodeJsWorkplace/auction/src/models/auction.ts":{"path":"/Users/kainingxin/NodeJsWorkplace/auction/src/models/auction.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":19},"end":{"line":3,"column":38}},"2":{"start":{"line":4,"column":22},"end":{"line":11,"column":25}},"3":{"start":{"line":12,"column":0},"end":{"line":12,"column":66}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/Users/kainingxin/NodeJsWorkplace/auction/src/models/auction.ts","sources":["/Users/kainingxin/NodeJsWorkplace/auction/src/models/auction.ts"],"names":[],"mappings":";;AACA,uCAA+C;AAa/C,MAAM,aAAa,GAAG,IAAI,iBAAM,CAAC;IAC7B,WAAW,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IAC7C,KAAK,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IACvC,SAAS,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE;IACzC,OAAO,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE;IACvC,KAAK,EAAG,CAAC,EAAE,IAAI,EAAE,iBAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,GAAG,EAAE,MAAM,EAAE,OAAO,EAAC,EAAE,EAAC,CAAC;IACjE,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,iBAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,GAAG,EAAE,QAAQ,EAAE,OAAO,EAAC,EAAE,EAAE,CAAC;CACtE,EAAC,EAAC,UAAU,EAAC,KAAK,EAAC,CAAC,CAAC;AAExB,kBAAe,IAAA,gBAAK,EAAC,SAAS,EAAE,aAAa,CAAC,CAAA","sourcesContent":["\nimport { model, Schema, Types } from \"mongoose\"\n\n\nexport interface Auction {\n    _id?: Types.ObjectId | string,\n    auctionName: string,\n    theme: string,\n    startTime: Schema.Types.Date | string,\n    endTime: Schema.Types.Date | string,\n    goods: Array<Types.ObjectId > | Types.Array<Types.ObjectId >,\n    bidders: Array<Types.ObjectId > | Types.Array<Types.ObjectId >\n}\n\nconst auctionSchema = new Schema({\n    auctionName: { type: String, required: true },\n    theme: { type: String, required: true },\n    startTime: { type: Date, required: true },\n    endTime: { type: Date, required: true },\n    goods:  [{ type: Schema.Types.ObjectId, ref: 'good' ,default:[]}],\n    bidders: [{ type: Schema.Types.ObjectId, ref: 'bidder' ,default:[] }],\n  },{versionKey:false});\n                      \nexport default model('auction', auctionSchema)"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"cb30cf71525dadf745cdb724ff23f89c1f6d4684","contentHash":"b6816ee711039c780cd1d745d5aecf65c63c82811e32a6bd7a33cb95b9cef0c8"},"/Users/kainingxin/NodeJsWorkplace/auction/src/models/enums/goodStatus.ts":{"path":"/Users/kainingxin/NodeJsWorkplace/auction/src/models/enums/goodStatus.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":28}},"2":{"start":{"line":5,"column":0},"end":{"line":9,"column":65}},"3":{"start":{"line":6,"column":4},"end":{"line":6,"column":32}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":42}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":1},"end":{"line":5,"column":2}},"loc":{"start":{"line":5,"column":23},"end":{"line":9,"column":1}},"line":5}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":16},"end":{"line":9,"column":63}},"type":"binary-expr","locations":[{"start":{"line":9,"column":16},"end":{"line":9,"column":34}},{"start":{"line":9,"column":39},"end":{"line":9,"column":62}}],"line":9}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1},"f":{"0":1},"b":{"0":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/kainingxin/NodeJsWorkplace/auction/src/models/enums/goodStatus.ts","sources":["/Users/kainingxin/NodeJsWorkplace/auction/src/models/enums/goodStatus.ts"],"names":[],"mappings":";;;AAAA,IAAY,UAIX;AAJD,WAAY,UAAU;IAClB,2BAAW,CAAA;IACX,qCAAqB,CAAA;IACrB,2BAAW,CAAA;AACf,CAAC,EAJW,UAAU,GAAV,kBAAU,KAAV,kBAAU,QAIrB","sourcesContent":["export enum GoodStatus {\n    SOLD='sold',\n    AVAILABLE='available',\n    PASS='pass'\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6aa0265f789868bddac938825f03f2d8b05482f9","contentHash":"3c68c970c3dc779462333cbe814d287477244c14b6ddd529f27c7ffbe9670559"},"/Users/kainingxin/NodeJsWorkplace/auction/src/services/auctionService.ts":{"path":"/Users/kainingxin/NodeJsWorkplace/auction/src/services/auctionService.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":134}},"4":{"start":{"line":7,"column":18},"end":{"line":7,"column":63}},"5":{"start":{"line":8,"column":17},"end":{"line":8,"column":61}},"6":{"start":{"line":9,"column":15},"end":{"line":9,"column":57}},"7":{"start":{"line":10,"column":23},"end":{"line":10,"column":60}},"8":{"start":{"line":11,"column":23},"end":{"line":11,"column":103}},"9":{"start":{"line":11,"column":35},"end":{"line":11,"column":103}},"10":{"start":{"line":12,"column":0},"end":{"line":12,"column":40}},"11":{"start":{"line":13,"column":23},"end":{"line":13,"column":111}},"12":{"start":{"line":13,"column":37},"end":{"line":13,"column":111}},"13":{"start":{"line":14,"column":0},"end":{"line":14,"column":40}},"14":{"start":{"line":15,"column":19},"end":{"line":19,"column":1}},"15":{"start":{"line":16,"column":4},"end":{"line":16,"column":30}},"16":{"start":{"line":17,"column":4},"end":{"line":17,"column":34}},"17":{"start":{"line":18,"column":4},"end":{"line":18,"column":51}},"18":{"start":{"line":20,"column":0},"end":{"line":20,"column":32}},"19":{"start":{"line":21,"column":26},"end":{"line":27,"column":1}},"20":{"start":{"line":22,"column":4},"end":{"line":22,"column":30}},"21":{"start":{"line":23,"column":4},"end":{"line":23,"column":34}},"22":{"start":{"line":24,"column":4},"end":{"line":26,"column":7}},"23":{"start":{"line":28,"column":0},"end":{"line":28,"column":46}},"24":{"start":{"line":29,"column":26},"end":{"line":31,"column":1}},"25":{"start":{"line":30,"column":4},"end":{"line":30,"column":58}},"26":{"start":{"line":32,"column":0},"end":{"line":32,"column":46}},"27":{"start":{"line":33,"column":19},"end":{"line":42,"column":1}},"28":{"start":{"line":34,"column":4},"end":{"line":41,"column":5}},"29":{"start":{"line":35,"column":8},"end":{"line":40,"column":11}},"30":{"start":{"line":36,"column":12},"end":{"line":39,"column":15}},"31":{"start":{"line":37,"column":16},"end":{"line":38,"column":95}},"32":{"start":{"line":38,"column":20},"end":{"line":38,"column":95}},"33":{"start":{"line":43,"column":21},"end":{"line":52,"column":1}},"34":{"start":{"line":44,"column":4},"end":{"line":51,"column":5}},"35":{"start":{"line":45,"column":8},"end":{"line":50,"column":11}},"36":{"start":{"line":46,"column":12},"end":{"line":49,"column":15}},"37":{"start":{"line":47,"column":16},"end":{"line":48,"column":99}},"38":{"start":{"line":48,"column":20},"end":{"line":48,"column":99}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":23},"end":{"line":11,"column":24}},"loc":{"start":{"line":11,"column":35},"end":{"line":11,"column":103}},"line":11},"2":{"name":"(anonymous_2)","decl":{"start":{"line":13,"column":23},"end":{"line":13,"column":24}},"loc":{"start":{"line":13,"column":37},"end":{"line":13,"column":111}},"line":13},"3":{"name":"(anonymous_3)","decl":{"start":{"line":15,"column":19},"end":{"line":15,"column":20}},"loc":{"start":{"line":15,"column":38},"end":{"line":19,"column":1}},"line":15},"4":{"name":"(anonymous_4)","decl":{"start":{"line":21,"column":26},"end":{"line":21,"column":27}},"loc":{"start":{"line":21,"column":49},"end":{"line":27,"column":1}},"line":21},"5":{"name":"(anonymous_5)","decl":{"start":{"line":29,"column":26},"end":{"line":29,"column":27}},"loc":{"start":{"line":29,"column":40},"end":{"line":31,"column":1}},"line":29},"6":{"name":"(anonymous_6)","decl":{"start":{"line":33,"column":19},"end":{"line":33,"column":20}},"loc":{"start":{"line":33,"column":36},"end":{"line":42,"column":1}},"line":33},"7":{"name":"(anonymous_7)","decl":{"start":{"line":35,"column":22},"end":{"line":35,"column":23}},"loc":{"start":{"line":35,"column":40},"end":{"line":40,"column":9}},"line":35},"8":{"name":"(anonymous_8)","decl":{"start":{"line":36,"column":55},"end":{"line":36,"column":56}},"loc":{"start":{"line":36,"column":62},"end":{"line":39,"column":13}},"line":36},"9":{"name":"(anonymous_9)","decl":{"start":{"line":43,"column":21},"end":{"line":43,"column":22}},"loc":{"start":{"line":43,"column":40},"end":{"line":52,"column":1}},"line":43},"10":{"name":"(anonymous_10)","decl":{"start":{"line":45,"column":24},"end":{"line":45,"column":25}},"loc":{"start":{"line":45,"column":44},"end":{"line":50,"column":9}},"line":45},"11":{"name":"(anonymous_11)","decl":{"start":{"line":46,"column":59},"end":{"line":46,"column":60}},"loc":{"start":{"line":46,"column":66},"end":{"line":49,"column":13}},"line":46}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":34,"column":4},"end":{"line":41,"column":5}},"type":"if","locations":[{"start":{"line":34,"column":4},"end":{"line":41,"column":5}},{"start":{"line":34,"column":4},"end":{"line":41,"column":5}}],"line":34},"4":{"loc":{"start":{"line":34,"column":8},"end":{"line":34,"column":41}},"type":"binary-expr","locations":[{"start":{"line":34,"column":8},"end":{"line":34,"column":21}},{"start":{"line":34,"column":25},"end":{"line":34,"column":41}}],"line":34},"5":{"loc":{"start":{"line":37,"column":16},"end":{"line":38,"column":95}},"type":"if","locations":[{"start":{"line":37,"column":16},"end":{"line":38,"column":95}},{"start":{"line":37,"column":16},"end":{"line":38,"column":95}}],"line":37},"6":{"loc":{"start":{"line":44,"column":4},"end":{"line":51,"column":5}},"type":"if","locations":[{"start":{"line":44,"column":4},"end":{"line":51,"column":5}},{"start":{"line":44,"column":4},"end":{"line":51,"column":5}}],"line":44},"7":{"loc":{"start":{"line":44,"column":8},"end":{"line":44,"column":45}},"type":"binary-expr","locations":[{"start":{"line":44,"column":8},"end":{"line":44,"column":23}},{"start":{"line":44,"column":27},"end":{"line":44,"column":45}}],"line":44},"8":{"loc":{"start":{"line":47,"column":16},"end":{"line":48,"column":99}},"type":"if","locations":[{"start":{"line":47,"column":16},"end":{"line":48,"column":99}},{"start":{"line":47,"column":16},"end":{"line":48,"column":99}}],"line":47}},"s":{"0":1,"1":3,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":2,"10":1,"11":1,"12":2,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":2,"29":2,"30":2,"31":2,"32":0,"33":1,"34":2,"35":2,"36":2,"37":2,"38":0},"f":{"0":3,"1":2,"2":2,"3":1,"4":1,"5":1,"6":2,"7":2,"8":2,"9":2,"10":2,"11":2},"b":{"0":[1,1,1],"1":[3,0],"2":[3,3],"3":[2,0],"4":[2,2],"5":[0,2],"6":[2,0],"7":[2,2],"8":[0,2]},"inputSourceMap":{"version":3,"file":"/Users/kainingxin/NodeJsWorkplace/auction/src/services/auctionService.ts","sources":["/Users/kainingxin/NodeJsWorkplace/auction/src/services/auctionService.ts"],"names":[],"mappings":";;;;;;AAAA,gEAAwD;AACxD,8DAA4C;AAC5C,0DAAwC;AAExC,6DAAiE;AAE1D,MAAM,cAAc,GAAE,KAAK,IAAI,EAAE,CAAC,MAAM,iBAAa,CAAC,IAAI,EAAE,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;AAA7F,QAAA,cAAc,kBAA+E;AAEnG,MAAM,cAAc,GAAE,KAAK,EAAE,EAAS,EAAE,EAAE,CAAC,MAAM,iBAAa,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAA;AAA3G,QAAA,cAAc,kBAA6F;AAGjH,MAAM,UAAU,GAAE,KAAK,EAAE,OAAe,EAAE,EAAE;IAC/C,UAAU,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;IAC7B,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;IAC3B,OAAO,MAAM,iBAAa,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;AAC/C,CAAC,CAAA;AAJY,QAAA,UAAU,cAItB;AAEM,MAAM,iBAAiB,GAAG,KAAK,EAAE,EAAS,EAAC,OAAe,EAAE,EAAE;IACjE,UAAU,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;IAC7B,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;IAC9B,OAAO,MAAM,iBAAa,CAAC,gBAAgB,CAAC,EAAC,GAAG,EAAE,EAAE,EAAC,EAAC,OAAO,EAAC;QAC7D,GAAG,EAAE,IAAI;KACP,CAAC,CAAA;AACL,CAAC,CAAA;AANY,QAAA,iBAAiB,qBAM7B;AAEM,MAAM,iBAAiB,GAAE,KAAK,EAAE,EAAS,EAAE,EAAE;IACnD,OAAO,MAAM,iBAAa,CAAC,SAAS,CAAC,EAAC,GAAG,EAAC,EAAE,EAAC,CAAC,CAAA;AAC/C,CAAC,CAAA;AAFY,QAAA,iBAAiB,qBAE7B;AAID,MAAM,UAAU,GAAG,KAAK,EAAE,KAA4B,EAAI,EAAE;IAC3D,IAAG,KAAK,IAAI,IAAI,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,EAAC;QACpC,KAAK,CAAC,OAAO,CAAC,KAAK,EAAC,MAAM,EAAC,EAAE;YAC5B,MAAM,cAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;gBAC5C,IAAG,CAAC,GAAG;oBAAE,MAAM,IAAI,kCAAmB,CAAC,oBAAoB,MAAM,EAAE,CAAC,CAAC;YACtE,CAAC,CAAC,CAAA;QACH,CAAC,CAAC,CAAA;KACF;AACF,CAAC,CAAA;AAED,MAAM,YAAY,GAAG,KAAK,EAAE,OAA8B,EAAE,EAAE;IAC7D,IAAG,OAAO,IAAI,IAAI,IAAI,OAAO,CAAC,MAAM,GAAG,CAAC,EAAC;QACxC,OAAO,CAAC,OAAO,CAAC,KAAK,EAAC,QAAQ,EAAC,EAAE;YAChC,MAAM,gBAAY,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;gBAChD,IAAG,CAAC,GAAG;oBAAE,MAAM,IAAI,kCAAmB,CAAC,sBAAsB,QAAQ,EAAE,CAAC,CAAC;YAC1E,CAAC,CAAC,CAAA;QACH,CAAC,CAAC,CAAA;KACF;AACF,CAAC,CAAA","sourcesContent":["import AuctionSchema,{Auction} from \"../models/auction\";\nimport BidderSchema from \"../models/bidder\";\nimport GoodSchema from \"../models/good\";\nimport { Types } from \"mongoose\";\nimport { EntityNotFoundError } from \"../models/oth/customErrors\";\n\nexport const getAllAuctions =async () => await AuctionSchema.find().populate('goods').populate('bidders');\n\nexport const getAuctionById =async (id:string) => await AuctionSchema.findById(id).populate('goods').populate('bidders')\n\n\nexport const addAuction =async (auction:Auction) => {\n    goodsExist(auction.goods);\n\tbiddersExist(auction.bidders);\n    return await AuctionSchema.create(auction);\n}\n\nexport const updateAuctionById = async (id:string,auction:Auction) => {\n    goodsExist(auction.goods);\n\tbiddersExist(auction.bidders);\n\treturn await AuctionSchema.findOneAndUpdate({_id: id},auction,{\n\t\tnew: true\n\t  })\n}\n\nexport const deleteAuctionById =async (id:string) => {\n\treturn await AuctionSchema.deleteOne({_id:id})\n}\n\n\n\nconst goodsExist = async (goods: Array<Types.ObjectId>  ) => {\n\tif(goods != null && goods.length > 0){\n\t\tgoods.forEach(async goodId => {\n\t\t\tawait GoodSchema.findById(goodId).then(val => {\n\t\t\t\tif(!val) throw new EntityNotFoundError(`Good not found : ${goodId}`);\n\t\t\t})\n\t\t})\n\t}\t\n}\n\nconst biddersExist = async (bidders: Array<Types.ObjectId>) => {\n\tif(bidders != null && bidders.length > 0){\n\t\tbidders.forEach(async bidderId => {\n\t\t\tawait BidderSchema.findById(bidderId).then(val => {\n\t\t\t\tif(!val) throw new EntityNotFoundError(`Bidder not found : ${bidderId}`);\n\t\t\t})\n\t\t})\n\t}\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e19b7ace3668833ab0c25680f1130357f7049195","contentHash":"06205ded7cd3ae1f804cbd2f9a568fb86b6dbb5fcd3ba045041893566b244255"},"/Users/kainingxin/NodeJsWorkplace/auction/src/lib/swagger.ts":{"path":"/Users/kainingxin/NodeJsWorkplace/auction/src/lib/swagger.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":25}},"2":{"start":{"line":4,"column":0},"end":{"line":27,"column":2}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/Users/kainingxin/NodeJsWorkplace/auction/src/lib/swagger.ts","sources":["/Users/kainingxin/NodeJsWorkplace/auction/src/lib/swagger.ts"],"names":[],"mappings":";;;AAAa,QAAA,OAAO,GAAG;IACtB,WAAW,EAAE,gBAAgB;IAC7B,WAAW,EAAE,IAAI;IACjB,OAAO,EAAE;QACR,IAAI,EAAE;YACL,KAAK,EAAE,WAAW;YAClB,WAAW,EAAE,kEAAkE;YAC/E,OAAO,EAAE,OAAO;SAChB;QACD,YAAY,EAAE;YACb,GAAG,EAAE,oBAAoB;YACzB,WAAW,EAAE,qBAAqB;SAClC;QACD,IAAI,EAAE;YACL,EAAE,IAAI,EAAE,QAAQ,EAAE,WAAW,EAAE,2BAA2B,EAAE;YAC5D,EAAE,IAAI,EAAE,MAAM,EAAE,WAAW,EAAE,yBAAyB,EAAE;YACxD,EAAE,IAAI,EAAE,SAAS,EAAE,WAAW,EAAE,4BAA4B,EAAE;SAC5D;QACH,IAAI,EAAE,gBAAgB;QACtB,OAAO,EAAE,CAAC,MAAM,CAAC;QACjB,QAAQ,EAAE,CAAC,kBAAkB,CAAC;QAC9B,QAAQ,EAAE,CAAC,kBAAkB,CAAC;KAC9B;CACD,CAAC","sourcesContent":["export const Options = {\n\troutePrefix: '/documentation',\n\texposeRoute: true,\n\tswagger: {\n\t\tinfo: {\n\t\t\ttitle: 'MyAuction',\n\t\t\tdescription: 'Building the REST API with Node.js, MongoDB, Fastify and Swagger',\n\t\t\tversion: '1.0.0',\n\t\t},\n\t\texternalDocs: {\n\t\t\turl: 'https://swagger.io',\n\t\t\tdescription: 'Find more info here',\n\t\t},\n\t\ttags: [\n\t\t\t{ name: 'bidder', description: 'Bidder related end-points' },\n\t\t\t{ name: 'good', description: 'Good related end-points' },\n\t\t\t{ name: 'auction', description: 'Auction related end-points' }\n\t\t  ],\t\n\t\thost: 'localhost:3000',\n\t\tschemes: ['http'],\n\t\tconsumes: ['application/json'],\n\t\tproduces: ['application/json'],\n\t},\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"04c651a6b0e96cc29eaaed5e9f571f66434b264e","contentHash":"d4fc035e8ee6ad909a2498b1a6f3e7e2d4c72d6faf00b217166a223443526126"},"/Users/kainingxin/NodeJsWorkplace/auction/src/routes/authRoute.ts":{"path":"/Users/kainingxin/NodeJsWorkplace/auction/src/routes/authRoute.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":4},"end":{"line":4,"column":89}},"4":{"start":{"line":4,"column":71},"end":{"line":4,"column":83}},"5":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"6":{"start":{"line":6,"column":26},"end":{"line":6,"column":33}},"7":{"start":{"line":7,"column":4},"end":{"line":7,"column":17}},"8":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"9":{"start":{"line":10,"column":4},"end":{"line":10,"column":72}},"10":{"start":{"line":12,"column":4},"end":{"line":12,"column":21}},"11":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"12":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"13":{"start":{"line":15,"column":31},"end":{"line":15,"column":42}},"14":{"start":{"line":16,"column":17},"end":{"line":16,"column":19}},"15":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"16":{"start":{"line":17,"column":21},"end":{"line":17,"column":141}},"17":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"18":{"start":{"line":17,"column":109},"end":{"line":17,"column":141}},"19":{"start":{"line":18,"column":4},"end":{"line":18,"column":36}},"20":{"start":{"line":19,"column":4},"end":{"line":19,"column":18}},"21":{"start":{"line":21,"column":22},"end":{"line":23,"column":1}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":62}},"23":{"start":{"line":24,"column":0},"end":{"line":24,"column":62}},"24":{"start":{"line":25,"column":23},"end":{"line":25,"column":77}},"25":{"start":{"line":26,"column":39},"end":{"line":26,"column":106}},"26":{"start":{"line":27,"column":40},"end":{"line":27,"column":108}},"27":{"start":{"line":28,"column":29},"end":{"line":28,"column":86}},"28":{"start":{"line":30,"column":4},"end":{"line":35,"column":7}},"29":{"start":{"line":36,"column":4},"end":{"line":41,"column":7}},"30":{"start":{"line":42,"column":4},"end":{"line":47,"column":7}},"31":{"start":{"line":48,"column":4},"end":{"line":53,"column":7}},"32":{"start":{"line":55,"column":0},"end":{"line":55,"column":29}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":5,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":58},"end":{"line":4,"column":59}},"loc":{"start":{"line":4,"column":69},"end":{"line":4,"column":85}},"line":4},"2":{"name":"(anonymous_2)","decl":{"start":{"line":5,"column":6},"end":{"line":5,"column":7}},"loc":{"start":{"line":5,"column":28},"end":{"line":8,"column":1}},"line":5},"3":{"name":"(anonymous_3)","decl":{"start":{"line":9,"column":80},"end":{"line":9,"column":81}},"loc":{"start":{"line":9,"column":95},"end":{"line":11,"column":1}},"line":9},"4":{"name":"(anonymous_4)","decl":{"start":{"line":11,"column":5},"end":{"line":11,"column":6}},"loc":{"start":{"line":11,"column":20},"end":{"line":13,"column":1}},"line":11},"5":{"name":"(anonymous_5)","decl":{"start":{"line":14,"column":50},"end":{"line":14,"column":51}},"loc":{"start":{"line":14,"column":65},"end":{"line":20,"column":1}},"line":14},"6":{"name":"(anonymous_6)","decl":{"start":{"line":21,"column":56},"end":{"line":21,"column":57}},"loc":{"start":{"line":21,"column":71},"end":{"line":23,"column":1}},"line":21},"7":{"name":"authRoutes","decl":{"start":{"line":29,"column":15},"end":{"line":29,"column":25}},"loc":{"start":{"line":29,"column":35},"end":{"line":54,"column":1}},"line":29}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":8,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":8,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":5,"column":1}},{"start":{"line":5,"column":6},"end":{"line":8,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"type":"if","locations":[{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},{"start":{"line":6,"column":4},"end":{"line":6,"column":33}}],"line":6},"4":{"loc":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"type":"binary-expr","locations":[{"start":{"line":9,"column":26},"end":{"line":9,"column":30}},{"start":{"line":9,"column":34},"end":{"line":9,"column":57}},{"start":{"line":9,"column":63},"end":{"line":13,"column":1}}],"line":9},"5":{"loc":{"start":{"line":9,"column":63},"end":{"line":13,"column":1}},"type":"cond-expr","locations":[{"start":{"line":9,"column":80},"end":{"line":11,"column":1}},{"start":{"line":11,"column":5},"end":{"line":13,"column":1}}],"line":9},"6":{"loc":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"type":"binary-expr","locations":[{"start":{"line":14,"column":20},"end":{"line":14,"column":24}},{"start":{"line":14,"column":28},"end":{"line":14,"column":45}},{"start":{"line":14,"column":50},"end":{"line":20,"column":1}}],"line":14},"7":{"loc":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},{"start":{"line":15,"column":4},"end":{"line":15,"column":42}}],"line":15},"8":{"loc":{"start":{"line":15,"column":8},"end":{"line":15,"column":29}},"type":"binary-expr","locations":[{"start":{"line":15,"column":8},"end":{"line":15,"column":11}},{"start":{"line":15,"column":15},"end":{"line":15,"column":29}}],"line":15},"9":{"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},{"start":{"line":17,"column":4},"end":{"line":17,"column":141}}],"line":17},"10":{"loc":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},{"start":{"line":17,"column":40},"end":{"line":17,"column":141}}],"line":17},"11":{"loc":{"start":{"line":17,"column":44},"end":{"line":17,"column":107}},"type":"binary-expr","locations":[{"start":{"line":17,"column":44},"end":{"line":17,"column":59}},{"start":{"line":17,"column":63},"end":{"line":17,"column":107}}],"line":17},"12":{"loc":{"start":{"line":21,"column":22},"end":{"line":23,"column":1}},"type":"binary-expr","locations":[{"start":{"line":21,"column":23},"end":{"line":21,"column":27}},{"start":{"line":21,"column":31},"end":{"line":21,"column":51}},{"start":{"line":21,"column":56},"end":{"line":23,"column":1}}],"line":21},"13":{"loc":{"start":{"line":22,"column":11},"end":{"line":22,"column":61}},"type":"cond-expr","locations":[{"start":{"line":22,"column":37},"end":{"line":22,"column":40}},{"start":{"line":22,"column":43},"end":{"line":22,"column":61}}],"line":22},"14":{"loc":{"start":{"line":22,"column":12},"end":{"line":22,"column":33}},"type":"binary-expr","locations":[{"start":{"line":22,"column":12},"end":{"line":22,"column":15}},{"start":{"line":22,"column":19},"end":{"line":22,"column":33}}],"line":22}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1,"9":0,"10":0,"11":1,"12":1,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1,"22":3,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":3,"7":1},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[1,1,1],"5":[1,0],"6":[1,1,1],"7":[1,0],"8":[1,1],"9":[0,0],"10":[0,0],"11":[0,0],"12":[1,1,1],"13":[0,3],"14":[3,3]},"inputSourceMap":{"version":3,"file":"/Users/kainingxin/NodeJsWorkplace/auction/src/routes/authRoute.ts","sources":["/Users/kainingxin/NodeJsWorkplace/auction/src/routes/authRoute.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AACA,8EAA+D;AAC/D,2GAA2E;AAC3E,6GAAmF;AACnF,uFAA8D;AAC/C,KAAK,UAAU,UAAU,CAAC,OAAwB;IAE/D,OAAO,CAAC,IAAI,CAAC,gBAAgB,EAAC;QAC5B,MAAM,EAAE;YACJ,IAAI,EAAC,sCAAqB;SAC7B;QACD,OAAO,EAAE,cAAc,CAAC,YAAY;KACrC,CACA,CAAA;IAED,OAAO,CAAC,IAAI,CAAC,eAAe,EAAC;QAC3B,MAAM,EAAE;YACJ,IAAI,EAAC,4BAAkB;SAC1B;QACD,OAAO,EAAE,cAAc,CAAC,WAAW;KACpC,CACA,CAAA;IAED,OAAO,CAAC,IAAI,CAAC,mBAAmB,EAAC;QAC/B,MAAM,EAAE;YACN,IAAI,EAAC,4BAAkB;SACxB;QACD,OAAO,EAAE,cAAc,CAAC,eAAe;KACxC,CACA,CAAA;IAED,OAAO,CAAC,IAAI,CAAC,oBAAoB,EAAC;QAChC,MAAM,EAAE;YACN,IAAI,EAAC,uCAA4B;SAClC;QACD,OAAO,EAAE,cAAc,CAAC,gBAAgB;KACzC,CACA,CAAA;AACH,CAAC;AAjCD,6BAiCC","sourcesContent":["import { FastifyInstance, RouteOptions } from \"fastify\";\nimport * as authController from '../controllers/authController'\nimport bidderLimitedResponse from '../schemas/bidder.limited.response.json'\nimport auctioneerBasicRequestSchema from '../schemas/auctioneer.basic.request.json'\nimport loginRequestSchema from '../schemas/login.request.json'\nexport default async function authRoutes(fastify: FastifyInstance) {\n\n  fastify.post('/bidder/signup',{\n    schema: {\n        body:bidderLimitedResponse\n    },\n    handler: authController.bidderSignup\n  }\n  )\n\n  fastify.post('/bidder/login',{\n    schema: {\n        body:loginRequestSchema,\n    },\n    handler: authController.bidderLogin\n  }\n  )\n\n  fastify.post('/auctioneer/login',{\n    schema: {\n      body:loginRequestSchema,\n    },\n    handler: authController.auctioneerLogin\n  }\n  )\n\n  fastify.post('/auctioneer/signup',{\n    schema: {\n      body:auctioneerBasicRequestSchema,\n    },\n    handler: authController.auctioneerSignup\n  }\n  )\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"0c9db56ea8c9c70a1c91d40a848f1f5721901bf1","contentHash":"7399746f501193b779706da9a8480a6c4f3689a9262f791c371d3892a36528a9"},"/Users/kainingxin/NodeJsWorkplace/auction/src/controllers/authController.ts":{"path":"/Users/kainingxin/NodeJsWorkplace/auction/src/controllers/authController.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":4},"end":{"line":4,"column":89}},"4":{"start":{"line":4,"column":71},"end":{"line":4,"column":83}},"5":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"6":{"start":{"line":6,"column":26},"end":{"line":6,"column":33}},"7":{"start":{"line":7,"column":4},"end":{"line":7,"column":17}},"8":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"9":{"start":{"line":10,"column":4},"end":{"line":10,"column":72}},"10":{"start":{"line":12,"column":4},"end":{"line":12,"column":21}},"11":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"12":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"13":{"start":{"line":15,"column":31},"end":{"line":15,"column":42}},"14":{"start":{"line":16,"column":17},"end":{"line":16,"column":19}},"15":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"16":{"start":{"line":17,"column":21},"end":{"line":17,"column":141}},"17":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"18":{"start":{"line":17,"column":109},"end":{"line":17,"column":141}},"19":{"start":{"line":18,"column":4},"end":{"line":18,"column":36}},"20":{"start":{"line":19,"column":4},"end":{"line":19,"column":18}},"21":{"start":{"line":21,"column":22},"end":{"line":23,"column":1}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":62}},"23":{"start":{"line":24,"column":0},"end":{"line":24,"column":62}},"24":{"start":{"line":25,"column":0},"end":{"line":25,"column":105}},"25":{"start":{"line":26,"column":27},"end":{"line":26,"column":85}},"26":{"start":{"line":27,"column":18},"end":{"line":27,"column":43}},"27":{"start":{"line":28,"column":28},"end":{"line":28,"column":56}},"28":{"start":{"line":29,"column":20},"end":{"line":29,"column":68}},"29":{"start":{"line":30,"column":20},"end":{"line":49,"column":1}},"30":{"start":{"line":31,"column":4},"end":{"line":48,"column":5}},"31":{"start":{"line":32,"column":8},"end":{"line":44,"column":11}},"32":{"start":{"line":33,"column":12},"end":{"line":43,"column":13}},"33":{"start":{"line":34,"column":16},"end":{"line":34,"column":82}},"34":{"start":{"line":35,"column":16},"end":{"line":35,"column":86}},"35":{"start":{"line":38,"column":16},"end":{"line":38,"column":83}},"36":{"start":{"line":39,"column":33},"end":{"line":41,"column":18}},"37":{"start":{"line":42,"column":16},"end":{"line":42,"column":60}},"38":{"start":{"line":47,"column":8},"end":{"line":47,"column":20}},"39":{"start":{"line":50,"column":0},"end":{"line":50,"column":34}},"40":{"start":{"line":51,"column":21},"end":{"line":65,"column":1}},"41":{"start":{"line":52,"column":4},"end":{"line":64,"column":5}},"42":{"start":{"line":53,"column":8},"end":{"line":60,"column":11}},"43":{"start":{"line":54,"column":12},"end":{"line":57,"column":13}},"44":{"start":{"line":55,"column":16},"end":{"line":55,"column":80}},"45":{"start":{"line":56,"column":16},"end":{"line":56,"column":145}},"46":{"start":{"line":58,"column":12},"end":{"line":58,"column":81}},"47":{"start":{"line":59,"column":12},"end":{"line":59,"column":145}},"48":{"start":{"line":63,"column":8},"end":{"line":63,"column":20}},"49":{"start":{"line":66,"column":0},"end":{"line":66,"column":36}},"50":{"start":{"line":67,"column":25},"end":{"line":81,"column":1}},"51":{"start":{"line":68,"column":4},"end":{"line":80,"column":5}},"52":{"start":{"line":69,"column":8},"end":{"line":76,"column":11}},"53":{"start":{"line":70,"column":12},"end":{"line":73,"column":13}},"54":{"start":{"line":71,"column":16},"end":{"line":71,"column":84}},"55":{"start":{"line":72,"column":16},"end":{"line":72,"column":149}},"56":{"start":{"line":74,"column":12},"end":{"line":74,"column":85}},"57":{"start":{"line":75,"column":12},"end":{"line":75,"column":149}},"58":{"start":{"line":79,"column":8},"end":{"line":79,"column":20}},"59":{"start":{"line":82,"column":0},"end":{"line":82,"column":44}},"60":{"start":{"line":83,"column":24},"end":{"line":102,"column":1}},"61":{"start":{"line":84,"column":4},"end":{"line":101,"column":5}},"62":{"start":{"line":85,"column":8},"end":{"line":97,"column":11}},"63":{"start":{"line":86,"column":12},"end":{"line":96,"column":13}},"64":{"start":{"line":87,"column":16},"end":{"line":87,"column":86}},"65":{"start":{"line":88,"column":16},"end":{"line":88,"column":86}},"66":{"start":{"line":91,"column":16},"end":{"line":91,"column":86}},"67":{"start":{"line":92,"column":33},"end":{"line":94,"column":18}},"68":{"start":{"line":95,"column":16},"end":{"line":95,"column":60}},"69":{"start":{"line":100,"column":8},"end":{"line":100,"column":20}},"70":{"start":{"line":103,"column":0},"end":{"line":103,"column":42}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":5,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":58},"end":{"line":4,"column":59}},"loc":{"start":{"line":4,"column":69},"end":{"line":4,"column":85}},"line":4},"2":{"name":"(anonymous_2)","decl":{"start":{"line":5,"column":6},"end":{"line":5,"column":7}},"loc":{"start":{"line":5,"column":28},"end":{"line":8,"column":1}},"line":5},"3":{"name":"(anonymous_3)","decl":{"start":{"line":9,"column":80},"end":{"line":9,"column":81}},"loc":{"start":{"line":9,"column":95},"end":{"line":11,"column":1}},"line":9},"4":{"name":"(anonymous_4)","decl":{"start":{"line":11,"column":5},"end":{"line":11,"column":6}},"loc":{"start":{"line":11,"column":20},"end":{"line":13,"column":1}},"line":11},"5":{"name":"(anonymous_5)","decl":{"start":{"line":14,"column":50},"end":{"line":14,"column":51}},"loc":{"start":{"line":14,"column":65},"end":{"line":20,"column":1}},"line":14},"6":{"name":"(anonymous_6)","decl":{"start":{"line":21,"column":56},"end":{"line":21,"column":57}},"loc":{"start":{"line":21,"column":71},"end":{"line":23,"column":1}},"line":21},"7":{"name":"(anonymous_7)","decl":{"start":{"line":30,"column":20},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":42},"end":{"line":49,"column":1}},"line":30},"8":{"name":"(anonymous_8)","decl":{"start":{"line":32,"column":78},"end":{"line":32,"column":79}},"loc":{"start":{"line":32,"column":87},"end":{"line":44,"column":9}},"line":32},"9":{"name":"(anonymous_9)","decl":{"start":{"line":51,"column":21},"end":{"line":51,"column":22}},"loc":{"start":{"line":51,"column":43},"end":{"line":65,"column":1}},"line":51},"10":{"name":"(anonymous_10)","decl":{"start":{"line":53,"column":54},"end":{"line":53,"column":55}},"loc":{"start":{"line":53,"column":63},"end":{"line":60,"column":9}},"line":53},"11":{"name":"(anonymous_11)","decl":{"start":{"line":67,"column":25},"end":{"line":67,"column":26}},"loc":{"start":{"line":67,"column":47},"end":{"line":81,"column":1}},"line":67},"12":{"name":"(anonymous_12)","decl":{"start":{"line":69,"column":58},"end":{"line":69,"column":59}},"loc":{"start":{"line":69,"column":67},"end":{"line":76,"column":9}},"line":69},"13":{"name":"(anonymous_13)","decl":{"start":{"line":83,"column":24},"end":{"line":83,"column":25}},"loc":{"start":{"line":83,"column":46},"end":{"line":102,"column":1}},"line":83},"14":{"name":"(anonymous_14)","decl":{"start":{"line":85,"column":82},"end":{"line":85,"column":83}},"loc":{"start":{"line":85,"column":91},"end":{"line":97,"column":9}},"line":85}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":8,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":8,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":5,"column":1}},{"start":{"line":5,"column":6},"end":{"line":8,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"type":"if","locations":[{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},{"start":{"line":6,"column":4},"end":{"line":6,"column":33}}],"line":6},"4":{"loc":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"type":"binary-expr","locations":[{"start":{"line":9,"column":26},"end":{"line":9,"column":30}},{"start":{"line":9,"column":34},"end":{"line":9,"column":57}},{"start":{"line":9,"column":63},"end":{"line":13,"column":1}}],"line":9},"5":{"loc":{"start":{"line":9,"column":63},"end":{"line":13,"column":1}},"type":"cond-expr","locations":[{"start":{"line":9,"column":80},"end":{"line":11,"column":1}},{"start":{"line":11,"column":5},"end":{"line":13,"column":1}}],"line":9},"6":{"loc":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"type":"binary-expr","locations":[{"start":{"line":14,"column":20},"end":{"line":14,"column":24}},{"start":{"line":14,"column":28},"end":{"line":14,"column":45}},{"start":{"line":14,"column":50},"end":{"line":20,"column":1}}],"line":14},"7":{"loc":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},{"start":{"line":15,"column":4},"end":{"line":15,"column":42}}],"line":15},"8":{"loc":{"start":{"line":15,"column":8},"end":{"line":15,"column":29}},"type":"binary-expr","locations":[{"start":{"line":15,"column":8},"end":{"line":15,"column":11}},{"start":{"line":15,"column":15},"end":{"line":15,"column":29}}],"line":15},"9":{"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},{"start":{"line":17,"column":4},"end":{"line":17,"column":141}}],"line":17},"10":{"loc":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},{"start":{"line":17,"column":40},"end":{"line":17,"column":141}}],"line":17},"11":{"loc":{"start":{"line":17,"column":44},"end":{"line":17,"column":107}},"type":"binary-expr","locations":[{"start":{"line":17,"column":44},"end":{"line":17,"column":59}},{"start":{"line":17,"column":63},"end":{"line":17,"column":107}}],"line":17},"12":{"loc":{"start":{"line":21,"column":22},"end":{"line":23,"column":1}},"type":"binary-expr","locations":[{"start":{"line":21,"column":23},"end":{"line":21,"column":27}},{"start":{"line":21,"column":31},"end":{"line":21,"column":51}},{"start":{"line":21,"column":56},"end":{"line":23,"column":1}}],"line":21},"13":{"loc":{"start":{"line":22,"column":11},"end":{"line":22,"column":61}},"type":"cond-expr","locations":[{"start":{"line":22,"column":37},"end":{"line":22,"column":40}},{"start":{"line":22,"column":43},"end":{"line":22,"column":61}}],"line":22},"14":{"loc":{"start":{"line":22,"column":12},"end":{"line":22,"column":33}},"type":"binary-expr","locations":[{"start":{"line":22,"column":12},"end":{"line":22,"column":15}},{"start":{"line":22,"column":19},"end":{"line":22,"column":33}}],"line":22},"15":{"loc":{"start":{"line":33,"column":12},"end":{"line":43,"column":13}},"type":"if","locations":[{"start":{"line":33,"column":12},"end":{"line":43,"column":13}},{"start":{"line":33,"column":12},"end":{"line":43,"column":13}}],"line":33},"16":{"loc":{"start":{"line":54,"column":12},"end":{"line":57,"column":13}},"type":"if","locations":[{"start":{"line":54,"column":12},"end":{"line":57,"column":13}},{"start":{"line":54,"column":12},"end":{"line":57,"column":13}}],"line":54},"17":{"loc":{"start":{"line":70,"column":12},"end":{"line":73,"column":13}},"type":"if","locations":[{"start":{"line":70,"column":12},"end":{"line":73,"column":13}},{"start":{"line":70,"column":12},"end":{"line":73,"column":13}}],"line":70},"18":{"loc":{"start":{"line":86,"column":12},"end":{"line":96,"column":13}},"type":"if","locations":[{"start":{"line":86,"column":12},"end":{"line":96,"column":13}},{"start":{"line":86,"column":12},"end":{"line":96,"column":13}}],"line":86}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1,"9":0,"10":0,"11":1,"12":1,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":1,"40":1,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":1,"50":1,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":1,"60":1,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[1,1,1],"5":[1,0],"6":[1,1,1],"7":[1,0],"8":[1,1],"9":[0,0],"10":[0,0],"11":[0,0],"12":[1,1,1],"13":[1,0],"14":[1,1],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/kainingxin/NodeJsWorkplace/auction/src/controllers/authController.ts","sources":["/Users/kainingxin/NodeJsWorkplace/auction/src/controllers/authController.ts"],"names":[],"mappings":"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","sourcesContent":["import { FastifyRequest, FastifyReply } from \"fastify\";\nimport ResponseTemplate from \"../models/oth/responseTemplate\";\nimport { Auctioneer } from \"../models/auctioneer\";\nimport { Bidder } from '../models/bidder'\nimport { app } from \"../lib/fastify\";\nimport { StatusCodes } from \"http-status-codes\";\nimport * as authService from \"../services/authService\";\nexport const bidderLogin = async (req: FastifyRequest<{ Body: { email: string, password: string } }>, reply: FastifyReply) => {\n  try {\n    await authService.bidderLogin(req.body.email, req.body.password).then(value => {\n      if (value == null) {\n        app.log.info(`Bidder ${req.body.email} logined failed`)        \n        reply.status(404).send({ message: \"Username or password incorrect\" });\n      } else {\n        app.log.info(`Bidder ${req.body.email} logined succeed`)        \n        const tokenVal = app.jwt.sign({ role:'bidder',bidderId:value._id,email:value.email }, {\n          expiresIn: 86400 // 24 hours\n        });\n        reply.status(200).send({ token: tokenVal });\n      }\n    })\n\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const bidderSignup = async (req: FastifyRequest<{ Body: Bidder }>, reply: FastifyReply) => {\n  try {\n    await authService.bidderSignup(req.body).then(value => {\n      if (value) {\n        app.log.info(`Bidder ${req.body.email} is signed up`)        \n        reply.status(200).send(new ResponseTemplate(StatusCodes.CREATED, \"Bidder signup successed\", null));\n      }\n      app.log.info(`Bidder ${req.body.email} failed to sign up`)        \n      reply.status(400).send(new ResponseTemplate(StatusCodes.BAD_REQUEST, \"Bidder email duplicated\", null));\n    })\n  } catch (error) {\n    throw error;\n  }\n}\n\n\nexport const auctioneerSignup = async (req: FastifyRequest<{ Body: Auctioneer }>, reply: FastifyReply) => {\n  try {\n    await authService.auctioneerSignup(req.body).then(value => {\n      if (value) {\n        app.log.info(`Auctionner ${req.body.email} is signed up`)        \n        reply.status(200).send(new ResponseTemplate(StatusCodes.CREATED, \"Auctioneer signup successed\", null));\n      }\n      app.log.info(`Auctionner ${req.body.email} failed to sign up`)        \n      reply.status(400).send(new ResponseTemplate(StatusCodes.BAD_REQUEST, \"Auctioneer email duplicated\", null));\n    })\n  } catch (error) {\n    throw error;\n  }\n}\n\n\nexport const auctioneerLogin = async (req: FastifyRequest<{ Body: { email: string, password: string } }>, reply: FastifyReply) => {\n  try {\n    await authService.auctioneerLogin(req.body.email, req.body.password).then(value => {\n      if (value == null) {\n        app.log.info(`Auctionner ${req.body.email} logined failed`)        \n        reply.status(404).send({ message: \"Username or password incorrect\" });\n      } else {\n        app.log.info(`Auctionner ${req.body.email} logined failed`)        \n        const tokenVal = app.jwt.sign({ role:'auctioneer',email: value.email }, {\n          expiresIn: 86400 // 24 hours\n        });\n        reply.status(200).send({ token: tokenVal });\n      }\n    })\n  } catch (error) {\n    throw error;\n  }\n};"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"31e97e0a35aeeae4558d50bab9321573e5e82181","contentHash":"3821c1fb8a9f289422373cd1d3f9e610fe6ea74dac65fe1e904c7886dfb4576b"},"/Users/kainingxin/NodeJsWorkplace/auction/src/services/authService.ts":{"path":"/Users/kainingxin/NodeJsWorkplace/auction/src/services/authService.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":105}},"4":{"start":{"line":7,"column":17},"end":{"line":7,"column":61}},"5":{"start":{"line":8,"column":21},"end":{"line":8,"column":69}},"6":{"start":{"line":9,"column":17},"end":{"line":9,"column":51}},"7":{"start":{"line":10,"column":20},"end":{"line":19,"column":1}},"8":{"start":{"line":11,"column":19},"end":{"line":13,"column":6}},"9":{"start":{"line":14,"column":4},"end":{"line":15,"column":20}},"10":{"start":{"line":15,"column":8},"end":{"line":15,"column":20}},"11":{"start":{"line":16,"column":4},"end":{"line":17,"column":20}},"12":{"start":{"line":17,"column":8},"end":{"line":17,"column":20}},"13":{"start":{"line":18,"column":4},"end":{"line":18,"column":18}},"14":{"start":{"line":20,"column":0},"end":{"line":20,"column":34}},"15":{"start":{"line":21,"column":21},"end":{"line":30,"column":1}},"16":{"start":{"line":23,"column":18},"end":{"line":23,"column":73}},"17":{"start":{"line":24,"column":4},"end":{"line":25,"column":21}},"18":{"start":{"line":25,"column":8},"end":{"line":25,"column":21}},"19":{"start":{"line":26,"column":17},"end":{"line":26,"column":49}},"20":{"start":{"line":27,"column":4},"end":{"line":27,"column":71}},"21":{"start":{"line":28,"column":4},"end":{"line":28,"column":42}},"22":{"start":{"line":29,"column":4},"end":{"line":29,"column":16}},"23":{"start":{"line":31,"column":0},"end":{"line":31,"column":36}},"24":{"start":{"line":32,"column":25},"end":{"line":40,"column":1}},"25":{"start":{"line":33,"column":18},"end":{"line":33,"column":81}},"26":{"start":{"line":34,"column":4},"end":{"line":35,"column":21}},"27":{"start":{"line":35,"column":8},"end":{"line":35,"column":21}},"28":{"start":{"line":36,"column":17},"end":{"line":36,"column":49}},"29":{"start":{"line":37,"column":4},"end":{"line":37,"column":79}},"30":{"start":{"line":38,"column":4},"end":{"line":38,"column":50}},"31":{"start":{"line":39,"column":4},"end":{"line":39,"column":16}},"32":{"start":{"line":41,"column":0},"end":{"line":41,"column":44}},"33":{"start":{"line":42,"column":24},"end":{"line":51,"column":1}},"34":{"start":{"line":43,"column":23},"end":{"line":45,"column":6}},"35":{"start":{"line":46,"column":4},"end":{"line":47,"column":20}},"36":{"start":{"line":47,"column":8},"end":{"line":47,"column":20}},"37":{"start":{"line":48,"column":4},"end":{"line":49,"column":20}},"38":{"start":{"line":49,"column":8},"end":{"line":49,"column":20}},"39":{"start":{"line":50,"column":4},"end":{"line":50,"column":22}},"40":{"start":{"line":52,"column":0},"end":{"line":52,"column":42}},"41":{"start":{"line":59,"column":23},"end":{"line":62,"column":1}},"42":{"start":{"line":60,"column":16},"end":{"line":60,"column":78}},"43":{"start":{"line":61,"column":4},"end":{"line":61,"column":15}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":20},"end":{"line":10,"column":21}},"loc":{"start":{"line":10,"column":47},"end":{"line":19,"column":1}},"line":10},"2":{"name":"(anonymous_2)","decl":{"start":{"line":21,"column":21},"end":{"line":21,"column":22}},"loc":{"start":{"line":21,"column":39},"end":{"line":30,"column":1}},"line":21},"3":{"name":"(anonymous_3)","decl":{"start":{"line":32,"column":25},"end":{"line":32,"column":26}},"loc":{"start":{"line":32,"column":47},"end":{"line":40,"column":1}},"line":32},"4":{"name":"(anonymous_4)","decl":{"start":{"line":42,"column":24},"end":{"line":42,"column":25}},"loc":{"start":{"line":42,"column":51},"end":{"line":51,"column":1}},"line":42},"5":{"name":"(anonymous_5)","decl":{"start":{"line":59,"column":23},"end":{"line":59,"column":24}},"loc":{"start":{"line":59,"column":61},"end":{"line":62,"column":1}},"line":59}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":14,"column":4},"end":{"line":15,"column":20}},"type":"if","locations":[{"start":{"line":14,"column":4},"end":{"line":15,"column":20}},{"start":{"line":14,"column":4},"end":{"line":15,"column":20}}],"line":14},"4":{"loc":{"start":{"line":16,"column":4},"end":{"line":17,"column":20}},"type":"if","locations":[{"start":{"line":16,"column":4},"end":{"line":17,"column":20}},{"start":{"line":16,"column":4},"end":{"line":17,"column":20}}],"line":16},"5":{"loc":{"start":{"line":24,"column":4},"end":{"line":25,"column":21}},"type":"if","locations":[{"start":{"line":24,"column":4},"end":{"line":25,"column":21}},{"start":{"line":24,"column":4},"end":{"line":25,"column":21}}],"line":24},"6":{"loc":{"start":{"line":34,"column":4},"end":{"line":35,"column":21}},"type":"if","locations":[{"start":{"line":34,"column":4},"end":{"line":35,"column":21}},{"start":{"line":34,"column":4},"end":{"line":35,"column":21}}],"line":34},"7":{"loc":{"start":{"line":46,"column":4},"end":{"line":47,"column":20}},"type":"if","locations":[{"start":{"line":46,"column":4},"end":{"line":47,"column":20}},{"start":{"line":46,"column":4},"end":{"line":47,"column":20}}],"line":46},"8":{"loc":{"start":{"line":48,"column":4},"end":{"line":49,"column":20}},"type":"if","locations":[{"start":{"line":48,"column":4},"end":{"line":49,"column":20}},{"start":{"line":48,"column":4},"end":{"line":49,"column":20}}],"line":48}},"s":{"0":1,"1":3,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":1,"12":0,"13":1,"14":1,"15":1,"16":2,"17":2,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":2,"26":2,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":0,"37":1,"38":0,"39":1,"40":1,"41":1,"42":2,"43":2},"f":{"0":3,"1":1,"2":2,"3":2,"4":1,"5":2},"b":{"0":[1,1,1],"1":[2,1],"2":[3,3],"3":[0,1],"4":[0,1],"5":[1,1],"6":[1,1],"7":[0,1],"8":[0,1]},"inputSourceMap":{"version":3,"file":"/Users/kainingxin/NodeJsWorkplace/auction/src/services/authService.ts","sources":["/Users/kainingxin/NodeJsWorkplace/auction/src/services/authService.ts"],"names":[],"mappings":";;;;;;AAAA,8DAAwD;AACxD,sEAAoE;AAEpE,oDAA4B;AAErB,MAAM,WAAW,GAAG,KAAK,EAAE,KAAY,EAAC,QAAe,EAAC,EAAE;IAC7D,MAAM,MAAM,GAAG,MAAM,gBAAY,CAAC,OAAO,CAAC;QACtC,KAAK,EAAE,KAAK;KACf,CAAC,CAAA;IACF,IAAG,CAAC,MAAM;QAAE,OAAO,IAAI,CAAC;IACxB,IAAG,CAAC,cAAc,CAAC,QAAQ,EAAC,MAAM,CAAC,QAAQ,CAAC;QAAE,OAAO,IAAI,CAAC;IAC1D,OAAO,MAAM,CAAC;AAElB,CAAC,CAAA;AARY,QAAA,WAAW,eAQvB;AAEM,MAAM,YAAY,GAAG,KAAK,EAAE,MAAa,EAAmB,EAAE;IACjE,sBAAsB;IACtB,MAAM,KAAK,GAAG,MAAM,gBAAY,CAAC,OAAO,CAAC,EAAE,KAAK,EAAE,MAAM,CAAC,KAAK,EAAC,CAAC,CAAA;IAChE,IAAG,KAAK;QAAE,OAAO,KAAK,CAAC;IACvB,MAAM,IAAI,GAAG,MAAM,gBAAM,CAAC,OAAO,EAAE,CAAC;IACpC,MAAM,CAAC,QAAQ,GAAG,gBAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,EAAC,IAAI,CAAC,CAAC;IACxD,MAAM,gBAAY,CAAC,MAAM,CAAC,MAAM,CAAC,CAAA;IACjC,OAAO,IAAI,CAAC;AAChB,CAAC,CAAA;AARY,QAAA,YAAY,gBAQxB;AAGM,MAAM,gBAAgB,GAAE,KAAK,EAAE,UAAqB,EAAE,EAAE;IAC3D,MAAM,KAAK,GAAG,MAAM,oBAAgB,CAAC,OAAO,CAAC,EAAE,KAAK,EAAE,UAAU,CAAC,KAAK,EAAC,CAAC,CAAA;IACxE,IAAG,KAAK;QAAE,OAAO,KAAK,CAAC;IACvB,MAAM,IAAI,GAAG,MAAM,gBAAM,CAAC,OAAO,EAAE,CAAC;IACpC,UAAU,CAAC,QAAQ,GAAG,gBAAM,CAAC,QAAQ,CAAC,UAAU,CAAC,QAAQ,EAAC,IAAI,CAAC,CAAC;IAChE,MAAM,oBAAgB,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;IAC1C,OAAO,IAAI,CAAC;AAChB,CAAC,CAAA;AAPY,QAAA,gBAAgB,oBAO5B;AAEM,MAAM,eAAe,GAAE,KAAK,EAAE,KAAY,EAAC,QAAe,EAAE,EAAE;IACjE,MAAM,UAAU,GAAG,MAAM,oBAAgB,CAAC,OAAO,CAAC;QAC9C,KAAK,EAAE,KAAK;KACf,CAAC,CAAC;IACH,IAAG,CAAC,UAAU;QAAE,OAAO,IAAI,CAAC;IAC5B,IAAG,CAAC,cAAc,CAAC,QAAQ,EAAC,UAAU,CAAC,QAAQ,CAAC;QAAE,OAAO,IAAI,CAAC;IAC9D,OAAO,UAAU,CAAC;AAEtB,CAAC,CAAA;AARY,QAAA,eAAe,mBAQ3B;AAED;;;;;GAKG;AACH,MAAM,cAAc,GAAG,CAAC,eAAsB,EAAC,eAAsB,EAAC,EAAE;IACpE,MAAM,GAAG,GAAG,gBAAM,CAAC,WAAW,CAC1B,eAAe,EACf,eAAe,CACf,CAAC;IAEL,OAAO,GAAG,CAAC;AACf,CAAC,CAAA","sourcesContent":["import bidderSchema, { Bidder } from \"../models/bidder\";\nimport auctioneerSchema, { Auctioneer } from \"../models/auctioneer\";\nimport {app} from \"../lib/fastify\";\nimport bcrypt from 'bcrypt';\n\nexport const bidderLogin = async (email:string,password:string)=>{\n    const bidder = await bidderSchema.findOne({\n        email: email\n    })\n    if(!bidder) return null;\n    if(!verifyPassword(password,bidder.password)) return null;   \n    return bidder;\n\n}\n\nexport const bidderSignup = async (bidder:Bidder):Promise<Boolean> => {\n    //email must be unique\n    const value = await bidderSchema.findOne({ email: bidder.email})\n    if(value) return false;\n    const salt = await bcrypt.genSalt();\n    bidder.password = bcrypt.hashSync(bidder.password,salt);\n    await bidderSchema.create(bidder)\n    return true;\n}\n\n\nexport const auctioneerSignup =async (auctioneer:Auctioneer) => {\n    const value = await auctioneerSchema.findOne({ email: auctioneer.email})\n    if(value) return false;\n    const salt = await bcrypt.genSalt();\n    auctioneer.password = bcrypt.hashSync(auctioneer.password,salt);\n    await auctioneerSchema.create(auctioneer);\n    return true;\n}\n\nexport const auctioneerLogin =async (email:string,password:string) => {\n    const auctioneer = await auctioneerSchema.findOne({\n        email: email\n    });\n    if(!auctioneer) return null;\n    if(!verifyPassword(password,auctioneer.password)) return null;   \n    return auctioneer;\n\n}\n\n/**\n * if password1 equals password2 then return true otherwise retrun false\n * @param password1 \n * @param password2 \n * @returns \n */\nconst verifyPassword = (uncodedPassword:string,encodedPassword:string)=>{\n    const res = bcrypt.compareSync(\n        uncodedPassword,\n        encodedPassword\n       );\n      \n    return res;\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"fe8304f6f56c6093f23c11f9e7467c64be93e719","contentHash":"fb3e82731cbeebfc3dfd5143bf039cc6fb13705f0d85457d7413397292a7f33f"},"/Users/kainingxin/NodeJsWorkplace/auction/src/models/auctioneer.ts":{"path":"/Users/kainingxin/NodeJsWorkplace/auction/src/models/auctioneer.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":19},"end":{"line":3,"column":38}},"2":{"start":{"line":4,"column":26},"end":{"line":8,"column":25}},"3":{"start":{"line":9,"column":0},"end":{"line":9,"column":73}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/Users/kainingxin/NodeJsWorkplace/auction/src/models/auctioneer.ts","sources":["/Users/kainingxin/NodeJsWorkplace/auction/src/models/auctioneer.ts"],"names":[],"mappings":";;AAAA,uCAAyC;AASzC,MAAM,iBAAiB,GAAG,IAAI,iBAAM,CAAC;IACjC,cAAc,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IAChD,KAAK,EAAE,EAAC,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAC;IACrC,QAAQ,EAAE,EAAC,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAC;CACzC,EAAC,EAAC,UAAU,EAAC,KAAK,EAAC,CAAC,CAAC;AAExB,kBAAe,IAAA,gBAAK,EAAC,YAAY,EAAE,iBAAiB,CAAC,CAAA","sourcesContent":["import { model, Schema } from \"mongoose\";\n\nexport interface Auctioneer{\n    _id: Schema.Types.ObjectId | null,\n    auctioneerName:string,\n    email:string,\n    password: string\n}\n\nconst auctioneerSchmema = new Schema({\n    auctioneerName: { type: String, required: true },\n    email: {type: String, required: true},\n    password: {type: String, required: true}\n  },{versionKey:false});\n                      \nexport default model('auctioneer', auctioneerSchmema)"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"28d10e5d43a8c71220cb20b8cdc8e705f58d3855","contentHash":"4def293ad998d7b8a6a1911ca290a7018a97ce45d802044ccbb3972fcb8fb798"},"/Users/kainingxin/NodeJsWorkplace/auction/src/routes/biddingRoutes.ts":{"path":"/Users/kainingxin/NodeJsWorkplace/auction/src/routes/biddingRoutes.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":4},"end":{"line":4,"column":89}},"4":{"start":{"line":4,"column":71},"end":{"line":4,"column":83}},"5":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"6":{"start":{"line":6,"column":26},"end":{"line":6,"column":33}},"7":{"start":{"line":7,"column":4},"end":{"line":7,"column":17}},"8":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"9":{"start":{"line":10,"column":4},"end":{"line":10,"column":72}},"10":{"start":{"line":12,"column":4},"end":{"line":12,"column":21}},"11":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"12":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"13":{"start":{"line":15,"column":31},"end":{"line":15,"column":42}},"14":{"start":{"line":16,"column":17},"end":{"line":16,"column":19}},"15":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"16":{"start":{"line":17,"column":21},"end":{"line":17,"column":141}},"17":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"18":{"start":{"line":17,"column":109},"end":{"line":17,"column":141}},"19":{"start":{"line":18,"column":4},"end":{"line":18,"column":36}},"20":{"start":{"line":19,"column":4},"end":{"line":19,"column":18}},"21":{"start":{"line":21,"column":22},"end":{"line":23,"column":1}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":62}},"23":{"start":{"line":24,"column":0},"end":{"line":24,"column":62}},"24":{"start":{"line":25,"column":25},"end":{"line":25,"column":82}},"25":{"start":{"line":26,"column":42},"end":{"line":26,"column":112}},"26":{"start":{"line":27,"column":14},"end":{"line":27,"column":56}},"27":{"start":{"line":29,"column":4},"end":{"line":57,"column":7}},"28":{"start":{"line":59,"column":0},"end":{"line":59,"column":29}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":5,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":58},"end":{"line":4,"column":59}},"loc":{"start":{"line":4,"column":69},"end":{"line":4,"column":85}},"line":4},"2":{"name":"(anonymous_2)","decl":{"start":{"line":5,"column":6},"end":{"line":5,"column":7}},"loc":{"start":{"line":5,"column":28},"end":{"line":8,"column":1}},"line":5},"3":{"name":"(anonymous_3)","decl":{"start":{"line":9,"column":80},"end":{"line":9,"column":81}},"loc":{"start":{"line":9,"column":95},"end":{"line":11,"column":1}},"line":9},"4":{"name":"(anonymous_4)","decl":{"start":{"line":11,"column":5},"end":{"line":11,"column":6}},"loc":{"start":{"line":11,"column":20},"end":{"line":13,"column":1}},"line":11},"5":{"name":"(anonymous_5)","decl":{"start":{"line":14,"column":50},"end":{"line":14,"column":51}},"loc":{"start":{"line":14,"column":65},"end":{"line":20,"column":1}},"line":14},"6":{"name":"(anonymous_6)","decl":{"start":{"line":21,"column":56},"end":{"line":21,"column":57}},"loc":{"start":{"line":21,"column":71},"end":{"line":23,"column":1}},"line":21},"7":{"name":"goodRoutes","decl":{"start":{"line":28,"column":15},"end":{"line":28,"column":25}},"loc":{"start":{"line":28,"column":35},"end":{"line":58,"column":1}},"line":28}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":8,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":8,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":5,"column":1}},{"start":{"line":5,"column":6},"end":{"line":8,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"type":"if","locations":[{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},{"start":{"line":6,"column":4},"end":{"line":6,"column":33}}],"line":6},"4":{"loc":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"type":"binary-expr","locations":[{"start":{"line":9,"column":26},"end":{"line":9,"column":30}},{"start":{"line":9,"column":34},"end":{"line":9,"column":57}},{"start":{"line":9,"column":63},"end":{"line":13,"column":1}}],"line":9},"5":{"loc":{"start":{"line":9,"column":63},"end":{"line":13,"column":1}},"type":"cond-expr","locations":[{"start":{"line":9,"column":80},"end":{"line":11,"column":1}},{"start":{"line":11,"column":5},"end":{"line":13,"column":1}}],"line":9},"6":{"loc":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"type":"binary-expr","locations":[{"start":{"line":14,"column":20},"end":{"line":14,"column":24}},{"start":{"line":14,"column":28},"end":{"line":14,"column":45}},{"start":{"line":14,"column":50},"end":{"line":20,"column":1}}],"line":14},"7":{"loc":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},{"start":{"line":15,"column":4},"end":{"line":15,"column":42}}],"line":15},"8":{"loc":{"start":{"line":15,"column":8},"end":{"line":15,"column":29}},"type":"binary-expr","locations":[{"start":{"line":15,"column":8},"end":{"line":15,"column":11}},{"start":{"line":15,"column":15},"end":{"line":15,"column":29}}],"line":15},"9":{"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},{"start":{"line":17,"column":4},"end":{"line":17,"column":141}}],"line":17},"10":{"loc":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},{"start":{"line":17,"column":40},"end":{"line":17,"column":141}}],"line":17},"11":{"loc":{"start":{"line":17,"column":44},"end":{"line":17,"column":107}},"type":"binary-expr","locations":[{"start":{"line":17,"column":44},"end":{"line":17,"column":59}},{"start":{"line":17,"column":63},"end":{"line":17,"column":107}}],"line":17},"12":{"loc":{"start":{"line":21,"column":22},"end":{"line":23,"column":1}},"type":"binary-expr","locations":[{"start":{"line":21,"column":23},"end":{"line":21,"column":27}},{"start":{"line":21,"column":31},"end":{"line":21,"column":51}},{"start":{"line":21,"column":56},"end":{"line":23,"column":1}}],"line":21},"13":{"loc":{"start":{"line":22,"column":11},"end":{"line":22,"column":61}},"type":"cond-expr","locations":[{"start":{"line":22,"column":37},"end":{"line":22,"column":40}},{"start":{"line":22,"column":43},"end":{"line":22,"column":61}}],"line":22},"14":{"loc":{"start":{"line":22,"column":12},"end":{"line":22,"column":33}},"type":"binary-expr","locations":[{"start":{"line":22,"column":12},"end":{"line":22,"column":15}},{"start":{"line":22,"column":19},"end":{"line":22,"column":33}}],"line":22}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1,"9":0,"10":0,"11":1,"12":2,"13":2,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":2,"6":1,"7":1},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[1,1,1],"5":[1,0],"6":[1,1,1],"7":[2,0],"8":[2,2],"9":[0,0],"10":[0,0],"11":[0,0],"12":[1,1,1],"13":[0,1],"14":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/kainingxin/NodeJsWorkplace/auction/src/routes/biddingRoutes.ts","sources":["/Users/kainingxin/NodeJsWorkplace/auction/src/routes/biddingRoutes.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AACA,mFAAoE;AACpE,iHAA0F;AAC1F,yDAA2C;AAE5B,KAAK,UAAU,UAAU,CAAC,OAAuB;IAE5D,OAAO,CAAC,IAAI,CAAC,yCAAyC,EAAC;QACnD,MAAM,EAAC;YACH,WAAW,EAAE,wBAAwB;YACrC,IAAI,EAAE,CAAC,MAAM,CAAC;YACd,OAAO,EAAE,wBAAwB;YACjC,MAAM,EAAE;gBAChB,IAAI,EAAE,QAAQ;gBACd,UAAU,EAAE;oBACX,SAAS,EAAE;wBACV,IAAI,EAAE,QAAQ;wBACd,WAAW,EAAE,eAAe;qBAC5B;oBACc,MAAM,EAAC;wBACH,IAAI,EAAE,QAAQ;wBACd,WAAW,EAAE,YAAY;qBAC5B;oBACD,KAAK,EAAC;wBACF,IAAI,EAAE,QAAQ;wBACd,WAAW,EAAE,gBAAgB;qBAChC;iBAChB;aACD;YACQ,QAAQ,EAAE;gBACL,GAAG,EAAE,yCAAiC;aAC1C;SACF;QACD,UAAU,EAAC,CAAC,KAAK,CAAC,gBAAgB,CAAC;QACnC,OAAO,EAAE,gBAAgB,CAAC,UAAU;KACzC,CAAC,CAAA;AAGN,CAAC;AAjCD,6BAiCC","sourcesContent":["import { FastifyInstance } from \"fastify\";\nimport * as biddingControler from \"../controllers/biddingController\"\nimport addUpdateDeleteGoodResponseSchema from '../schemas/add.update.delete.response.json'\nimport * as auths from \"../services/auths\";\n\nexport default async function goodRoutes(fastify:FastifyInstance) {\n\n    fastify.post(\"/auction/:auctionId/good/:goodId/:price\",{\n        schema:{\n            description: \"Offer price for a good\",\n            tags: ['good'],\n            summary: 'Offer price for a good',\n            params: {\n\t\t\t\ttype: 'object',\n\t\t\t\tproperties: {\n\t\t\t\t\tauctionId: {\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tdescription: 'id of auction'\n\t\t\t\t\t},\n                    goodId:{\n                        type: 'string',\n                        description: 'id of good'\n                    },\n                    price:{\n                        type: 'number',\n                        description: 'price offering'\n                    }\n\t\t\t\t}\n\t\t\t},\n            response: {\n                 200: addUpdateDeleteGoodResponseSchema\n            }\n          },\n          preHandler:[auths.bidderAuthPolicy],\n          handler: biddingControler.offerPrice\n    })\n    \n\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"baad33ca64f06d3791783684cf8f49f47e00d940","contentHash":"7031d80ad95075d968053abfc94851421a4fcedf759fc2b218a0e675ea30d783"},"/Users/kainingxin/NodeJsWorkplace/auction/src/test/helper.ts":{"path":"/Users/kainingxin/NodeJsWorkplace/auction/src/test/helper.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":75}},"4":{"start":{"line":7,"column":17},"end":{"line":7,"column":51}},"5":{"start":{"line":8,"column":19},"end":{"line":8,"column":55}},"6":{"start":{"line":9,"column":18},"end":{"line":9,"column":43}},"7":{"start":{"line":10,"column":24},"end":{"line":10,"column":267}},"8":{"start":{"line":10,"column":30},"end":{"line":10,"column":267}},"9":{"start":{"line":11,"column":0},"end":{"line":11,"column":42}},"10":{"start":{"line":12,"column":22},"end":{"line":12,"column":65}},"11":{"start":{"line":12,"column":28},"end":{"line":12,"column":65}},"12":{"start":{"line":13,"column":0},"end":{"line":13,"column":38}},"13":{"start":{"line":14,"column":16},"end":{"line":14,"column":43}},"14":{"start":{"line":14,"column":22},"end":{"line":14,"column":43}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":26}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":24},"end":{"line":10,"column":25}},"loc":{"start":{"line":10,"column":30},"end":{"line":10,"column":267}},"line":10},"2":{"name":"(anonymous_2)","decl":{"start":{"line":12,"column":22},"end":{"line":12,"column":23}},"loc":{"start":{"line":12,"column":28},"end":{"line":12,"column":65}},"line":12},"3":{"name":"(anonymous_3)","decl":{"start":{"line":14,"column":16},"end":{"line":14,"column":17}},"loc":{"start":{"line":14,"column":22},"end":{"line":14,"column":43}},"line":14}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":2,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":5,"9":1,"10":1,"11":0,"12":1,"13":1,"14":0,"15":1},"f":{"0":2,"1":5,"2":0,"3":0},"b":{"0":[1,1,1],"1":[0,2],"2":[2,2]},"inputSourceMap":{"version":3,"file":"/Users/kainingxin/NodeJsWorkplace/auction/src/test/helper.ts","sources":["/Users/kainingxin/NodeJsWorkplace/auction/src/test/helper.ts"],"names":[],"mappings":";;;;;;AAAA,oDAA4B;AAC5B,wDAAgC;AAChC,4CAAkC;AAC3B,MAAM,eAAe,GAAG,GAAG,EAAE,CAAE,kBAAQ,CAAC,OAAO,CAAC,iBAAiB,gBAAM,CAAC,GAAG,CAAC,aAAa,CAAC,IAAI,gBAAM,CAAC,GAAG,CAAC,aAAa,CAAC,IAAI,gBAAM,CAAC,GAAG,CAAC,WAAW,CAAC,gBAAgB,gBAAM,CAAC,GAAG,CAAC,aAAa,CAAC,8BAA8B,CAAC,CAAA;AAApN,QAAA,eAAe,mBAAqM;AAC1N,MAAM,aAAa,GAAG,GAAG,EAAE,CAAC,kBAAQ,CAAC,UAAU,CAAC,KAAK,EAAE,CAAA;AAAjD,QAAA,aAAa,iBAAoC;AACvD,MAAM,OAAO,GAAG,GAAG,EAAE,CAAC,aAAG,CAAC,KAAK,EAAE,CAAA;AAA3B,QAAA,OAAO,WAAoB","sourcesContent":["import config from \"config\";\nimport mongoose from 'mongoose';\nimport {app} from '../lib/fastify'\nexport const dataBaseConnect = () =>  mongoose.connect(`mongodb+srv://${config.get(\"db.username\")}:${config.get(\"db.password\")}@${config.get(\"db.server\")}.mongodb.net/${config.get(\"db.database\")}?retryWrites=true&w=majority`)\nexport const dataBaseClose = () => mongoose.connection.close()\nexport const fastify = () => app.ready()"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"fb063334b88d7bfa1ac8f7c4ab545b730df2b9a6","contentHash":"2e23d35d5e965c941569f334d4f92a91d7046409db64628cab653fd3fea75d22"},"/Users/kainingxin/NodeJsWorkplace/auction/src/test/auctionServiceSpec.ts":{"path":"/Users/kainingxin/NodeJsWorkplace/auction/src/test/auctionServiceSpec.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":4},"end":{"line":4,"column":89}},"4":{"start":{"line":4,"column":71},"end":{"line":4,"column":83}},"5":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"6":{"start":{"line":6,"column":26},"end":{"line":6,"column":33}},"7":{"start":{"line":7,"column":4},"end":{"line":7,"column":17}},"8":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"9":{"start":{"line":10,"column":4},"end":{"line":10,"column":72}},"10":{"start":{"line":12,"column":4},"end":{"line":12,"column":21}},"11":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"12":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"13":{"start":{"line":15,"column":31},"end":{"line":15,"column":42}},"14":{"start":{"line":16,"column":17},"end":{"line":16,"column":19}},"15":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"16":{"start":{"line":17,"column":21},"end":{"line":17,"column":141}},"17":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"18":{"start":{"line":17,"column":109},"end":{"line":17,"column":141}},"19":{"start":{"line":18,"column":4},"end":{"line":18,"column":36}},"20":{"start":{"line":19,"column":4},"end":{"line":19,"column":18}},"21":{"start":{"line":21,"column":0},"end":{"line":21,"column":62}},"22":{"start":{"line":22,"column":19},"end":{"line":22,"column":38}},"23":{"start":{"line":23,"column":23},"end":{"line":23,"column":74}},"24":{"start":{"line":24,"column":15},"end":{"line":24,"column":30}},"25":{"start":{"line":25,"column":17},"end":{"line":25,"column":36}},"26":{"start":{"line":26,"column":0},"end":{"line":75,"column":3}},"27":{"start":{"line":27,"column":4},"end":{"line":29,"column":7}},"28":{"start":{"line":28,"column":8},"end":{"line":28,"column":40}},"29":{"start":{"line":30,"column":18},"end":{"line":30,"column":29}},"30":{"start":{"line":31,"column":4},"end":{"line":31,"column":74}},"31":{"start":{"line":32,"column":20},"end":{"line":32,"column":31}},"32":{"start":{"line":33,"column":4},"end":{"line":33,"column":76}},"33":{"start":{"line":34,"column":15},"end":{"line":34,"column":41}},"34":{"start":{"line":35,"column":20},"end":{"line":42,"column":5}},"35":{"start":{"line":43,"column":21},"end":{"line":51,"column":5}},"36":{"start":{"line":52,"column":4},"end":{"line":58,"column":7}},"37":{"start":{"line":53,"column":27},"end":{"line":53,"column":34}},"38":{"start":{"line":54,"column":8},"end":{"line":54,"column":59}},"39":{"start":{"line":55,"column":8},"end":{"line":57,"column":11}},"40":{"start":{"line":56,"column":12},"end":{"line":56,"column":43}},"41":{"start":{"line":59,"column":4},"end":{"line":62,"column":7}},"42":{"start":{"line":60,"column":21},"end":{"line":60,"column":84}},"43":{"start":{"line":61,"column":8},"end":{"line":61,"column":66}},"44":{"start":{"line":63,"column":4},"end":{"line":66,"column":7}},"45":{"start":{"line":64,"column":21},"end":{"line":64,"column":58}},"46":{"start":{"line":65,"column":8},"end":{"line":65,"column":44}},"47":{"start":{"line":67,"column":4},"end":{"line":70,"column":7}},"48":{"start":{"line":68,"column":21},"end":{"line":68,"column":73}},"49":{"start":{"line":69,"column":8},"end":{"line":69,"column":67}},"50":{"start":{"line":71,"column":4},"end":{"line":74,"column":7}},"51":{"start":{"line":72,"column":21},"end":{"line":72,"column":63}},"52":{"start":{"line":73,"column":8},"end":{"line":73,"column":50}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":5,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":58},"end":{"line":4,"column":59}},"loc":{"start":{"line":4,"column":69},"end":{"line":4,"column":85}},"line":4},"2":{"name":"(anonymous_2)","decl":{"start":{"line":5,"column":6},"end":{"line":5,"column":7}},"loc":{"start":{"line":5,"column":28},"end":{"line":8,"column":1}},"line":5},"3":{"name":"(anonymous_3)","decl":{"start":{"line":9,"column":80},"end":{"line":9,"column":81}},"loc":{"start":{"line":9,"column":95},"end":{"line":11,"column":1}},"line":9},"4":{"name":"(anonymous_4)","decl":{"start":{"line":11,"column":5},"end":{"line":11,"column":6}},"loc":{"start":{"line":11,"column":20},"end":{"line":13,"column":1}},"line":11},"5":{"name":"(anonymous_5)","decl":{"start":{"line":14,"column":50},"end":{"line":14,"column":51}},"loc":{"start":{"line":14,"column":65},"end":{"line":20,"column":1}},"line":14},"6":{"name":"(anonymous_6)","decl":{"start":{"line":26,"column":13},"end":{"line":26,"column":14}},"loc":{"start":{"line":26,"column":19},"end":{"line":75,"column":1}},"line":26},"7":{"name":"(anonymous_7)","decl":{"start":{"line":27,"column":11},"end":{"line":27,"column":12}},"loc":{"start":{"line":27,"column":23},"end":{"line":29,"column":5}},"line":27},"8":{"name":"(anonymous_8)","decl":{"start":{"line":52,"column":46},"end":{"line":52,"column":47}},"loc":{"start":{"line":52,"column":58},"end":{"line":58,"column":5}},"line":52},"9":{"name":"(anonymous_9)","decl":{"start":{"line":55,"column":48},"end":{"line":55,"column":49}},"loc":{"start":{"line":55,"column":57},"end":{"line":57,"column":9}},"line":55},"10":{"name":"(anonymous_10)","decl":{"start":{"line":59,"column":61},"end":{"line":59,"column":62}},"loc":{"start":{"line":59,"column":73},"end":{"line":62,"column":5}},"line":59},"11":{"name":"(anonymous_11)","decl":{"start":{"line":63,"column":44},"end":{"line":63,"column":45}},"loc":{"start":{"line":63,"column":56},"end":{"line":66,"column":5}},"line":63},"12":{"name":"(anonymous_12)","decl":{"start":{"line":67,"column":65},"end":{"line":67,"column":66}},"loc":{"start":{"line":67,"column":77},"end":{"line":70,"column":5}},"line":67},"13":{"name":"(anonymous_13)","decl":{"start":{"line":71,"column":50},"end":{"line":71,"column":51}},"loc":{"start":{"line":71,"column":62},"end":{"line":74,"column":5}},"line":71}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":8,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":8,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":5,"column":1}},{"start":{"line":5,"column":6},"end":{"line":8,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"type":"if","locations":[{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},{"start":{"line":6,"column":4},"end":{"line":6,"column":33}}],"line":6},"4":{"loc":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"type":"binary-expr","locations":[{"start":{"line":9,"column":26},"end":{"line":9,"column":30}},{"start":{"line":9,"column":34},"end":{"line":9,"column":57}},{"start":{"line":9,"column":63},"end":{"line":13,"column":1}}],"line":9},"5":{"loc":{"start":{"line":9,"column":63},"end":{"line":13,"column":1}},"type":"cond-expr","locations":[{"start":{"line":9,"column":80},"end":{"line":11,"column":1}},{"start":{"line":11,"column":5},"end":{"line":13,"column":1}}],"line":9},"6":{"loc":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"type":"binary-expr","locations":[{"start":{"line":14,"column":20},"end":{"line":14,"column":24}},{"start":{"line":14,"column":28},"end":{"line":14,"column":45}},{"start":{"line":14,"column":50},"end":{"line":20,"column":1}}],"line":14},"7":{"loc":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},{"start":{"line":15,"column":4},"end":{"line":15,"column":42}}],"line":15},"8":{"loc":{"start":{"line":15,"column":8},"end":{"line":15,"column":29}},"type":"binary-expr","locations":[{"start":{"line":15,"column":8},"end":{"line":15,"column":11}},{"start":{"line":15,"column":15},"end":{"line":15,"column":29}}],"line":15},"9":{"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},{"start":{"line":17,"column":4},"end":{"line":17,"column":141}}],"line":17},"10":{"loc":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},{"start":{"line":17,"column":40},"end":{"line":17,"column":141}}],"line":17},"11":{"loc":{"start":{"line":17,"column":44},"end":{"line":17,"column":107}},"type":"binary-expr","locations":[{"start":{"line":17,"column":44},"end":{"line":17,"column":59}},{"start":{"line":17,"column":63},"end":{"line":17,"column":107}}],"line":17}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1,"9":0,"10":0,"11":1,"12":1,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[1,1,1],"5":[1,0],"6":[1,1,1],"7":[1,0],"8":[1,1],"9":[0,0],"10":[0,0],"11":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/kainingxin/NodeJsWorkplace/auction/src/test/auctionServiceSpec.ts","sources":["/Users/kainingxin/NodeJsWorkplace/auction/src/test/auctionServiceSpec.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA,uCAAyC;AAIzC,2EAA4D;AAC5D,+BAA8B;AAC9B,qCAAuD;AAGvD,QAAQ,CAAC,EAAE,EAAE,GAAG,EAAE;IAEd,MAAM,CAAC;QACH,IAAA,wBAAe,GAAE,CAAA;IACrB,CAAC,CAAC,CAAA;IAGF,MAAM,KAAK,GAAG,IAAI,KAAK,EAAkB,CAAA;IACzC,KAAK,CAAC,IAAI,CAAC,IAAI,gBAAK,CAAC,QAAQ,CAAC,0BAA0B,CAAC,CAAC,CAAA;IAE1D,MAAM,OAAO,GAAG,IAAI,KAAK,EAAkB,CAAA;IAC3C,OAAO,CAAC,IAAI,CAAC,IAAI,gBAAK,CAAC,QAAQ,CAAC,0BAA0B,CAAC,CAAC,CAAA;IAE5D,MAAM,EAAE,GAAG,0BAA0B,CAAA;IACrC,MAAM,OAAO,GAAW;QACpB,aAAa,EAAE,eAAe;QAC9B,OAAO,EAAE,KAAK;QACd,WAAW,EAAE,+BAA+B;QAC5C,SAAS,EAAE,+BAA+B;QAC1C,OAAO,EAAE,KAAK;QACd,SAAS,EAAE,OAAO;KACrB,CAAA;IAED,MAAM,QAAQ,GAAW;QACrB,KAAK,EAAC,0BAA0B;QAChC,aAAa,EAAE,mBAAmB;QAClC,OAAO,EAAE,KAAK;QACd,WAAW,EAAE,+BAA+B;QAC5C,SAAS,EAAE,+BAA+B;QAC1C,OAAO,EAAE,KAAK;QACd,SAAS,EAAE,OAAO;KACrB,CAAA;IAED,EAAE,CAAC,qCAAqC,EAAC,KAAK,IAAI,EAAE;QAChD,MAAM,UAAU,GAAE,OAAO,CAAC;QAC1B,UAAU,CAAC,GAAG,GAAG,IAAI,gBAAK,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAA;QACvC,cAAc,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;YAC5C,aAAM,CAAC,SAAS,CAAC,KAAK,CAAC,CAAA;QAC3B,CAAC,CAAC,CAAA;IACN,CAAC,CAAC,CAAA;IAEF,EAAE,CAAC,oDAAoD,EAAE,KAAK,IAAI,EAAE;QAChE,MAAM,IAAI,GAAE,MAAM,cAAc,CAAC,cAAc,CAAC,0BAA0B,CAAC,CAAA;QAC3E,aAAM,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,EAAC,0BAA0B,CAAC,CAAA;IACrD,CAAC,CAAC,CAAA;IAEF,EAAE,CAAC,mCAAmC,EAAE,KAAK,IAAI,EAAE;QAC/C,MAAM,IAAI,GAAE,MAAM,cAAc,CAAC,cAAc,EAAE,CAAA;QACjD,aAAM,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAC,CAAC,CAAC,CAAA;IAC/B,CAAC,CAAC,CAAA;IAEF,EAAE,CAAC,wDAAwD,EAAE,KAAK,IAAI,EAAE;QACpE,MAAM,IAAI,GAAE,MAAM,cAAc,CAAC,iBAAiB,CAAC,EAAE,EAAC,QAAQ,CAAC,CAAA;QAC/D,aAAM,CAAC,KAAK,CAAC,IAAI,CAAC,WAAW,EAAC,mBAAmB,CAAC,CAAA;IACtD,CAAC,CAAC,CAAA;IAGF,EAAE,CAAC,yCAAyC,EAAE,KAAK,IAAI,EAAE;QACrD,MAAM,IAAI,GAAG,MAAM,cAAc,CAAC,iBAAiB,CAAC,EAAE,CAAC,CAAA;QACvD,aAAM,CAAC,KAAK,CAAC,IAAI,CAAC,YAAY,EAAC,CAAC,CAAC,CAAA;IACrC,CAAC,CAAC,CAAA;AACN,CAAC,CAAC,CAAA","sourcesContent":["import { Schema, Types } from \"mongoose\";\nimport { Auction } from \"../models/Auction\";\n\n\nimport * as auctionService from \"../services/auctionService\"\nimport { assert } from \"chai\";\nimport {dataBaseClose, dataBaseConnect} from \"./helper\"\n\n\ndescribe('', () => {\n\n    before(function(){\n        dataBaseConnect()\n    })\n\n   \n    const goods = new Array<Types.ObjectId>()\n    goods.push(new Types.ObjectId(\"61d3559d5d27849028b497c1\"))\n\n    const bidders = new Array<Types.ObjectId>()\n    bidders.push(new Types.ObjectId(\"61f01f3c9268d92b2cd1a3fd\"))\n\n    const id = \"622c90ce7036300ff3216476\"\n    const auction:Auction = {\n        \"auctionName\": \"Auction: Car1\",\n        \"theme\": \"Car\",\n        \"startTime\": \"2022-04-12T09:00:00.000+00:00\",\n        \"endTime\": \"2022-04-12T10:00:00.000+00:00\",\n        \"goods\": goods,\n        \"bidders\": bidders\n    }\n\n    const auction1:Auction = {\n        \"_id\":\"622c90ce7036300ff3216476\",\n        \"auctionName\": \"Auction: Car11212\",\n        \"theme\": \"Car\",\n        \"startTime\": \"2022-04-13T09:00:00.000+00:00\",\n        \"endTime\": \"2022-04-12T10:00:00.000+00:00\",\n        \"goods\": goods,\n        \"bidders\": bidders\n    }\n\n    it(\"when add auction return id not null\",async () => {\n        const newAuction =auction;\n        newAuction._id = new Types.ObjectId(id)\n        auctionService.addAuction(auction).then(value => {\n            assert.isNotNull(value)\n        })\n    })\n\n    it(\"when getAuctionById return element with id correct\", async () => {\n        const data =await auctionService.getAuctionById(\"622cc7332b19ff745c9d36bc\")\n        assert.equal(data._id,\"622cc7332b19ff745c9d36bc\") \n    })\n\n    it(\"when getAuctions return 2 element\", async () => {\n        const data =await auctionService.getAllAuctions()\n        assert.equal(data.length,2) \n    })\n\n    it(\"when updateAuctionById return result with name changed\", async () => {\n        const data =await auctionService.updateAuctionById(id,auction1)\n        assert.equal(data.auctionName,\"Auction: Car11212\") \n    })\n\n\n    it(\"when deleteAuctionById return 1 element\", async () => {\n        const data = await auctionService.deleteAuctionById(id)\n        assert.equal(data.deletedCount,1) \n    })\n})\n\n\n\n\n\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5f5034cd94153ebedbcb69dc6ed17c252ca30f63","contentHash":"82ed1c22ef64c446da9d1ad19f74b3cd71c37cbd05473b86e9c157c7948e5fd8"},"/Users/kainingxin/NodeJsWorkplace/auction/src/test/authServiceSpec.ts":{"path":"/Users/kainingxin/NodeJsWorkplace/auction/src/test/authServiceSpec.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":4},"end":{"line":4,"column":89}},"4":{"start":{"line":4,"column":71},"end":{"line":4,"column":83}},"5":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"6":{"start":{"line":6,"column":26},"end":{"line":6,"column":33}},"7":{"start":{"line":7,"column":4},"end":{"line":7,"column":17}},"8":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"9":{"start":{"line":10,"column":4},"end":{"line":10,"column":72}},"10":{"start":{"line":12,"column":4},"end":{"line":12,"column":21}},"11":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"12":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"13":{"start":{"line":15,"column":31},"end":{"line":15,"column":42}},"14":{"start":{"line":16,"column":17},"end":{"line":16,"column":19}},"15":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"16":{"start":{"line":17,"column":21},"end":{"line":17,"column":141}},"17":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"18":{"start":{"line":17,"column":109},"end":{"line":17,"column":141}},"19":{"start":{"line":18,"column":4},"end":{"line":18,"column":36}},"20":{"start":{"line":19,"column":4},"end":{"line":19,"column":18}},"21":{"start":{"line":21,"column":0},"end":{"line":21,"column":62}},"22":{"start":{"line":22,"column":20},"end":{"line":22,"column":68}},"23":{"start":{"line":23,"column":15},"end":{"line":23,"column":30}},"24":{"start":{"line":24,"column":17},"end":{"line":24,"column":36}},"25":{"start":{"line":25,"column":0},"end":{"line":73,"column":3}},"26":{"start":{"line":26,"column":4},"end":{"line":28,"column":7}},"27":{"start":{"line":27,"column":8},"end":{"line":27,"column":40}},"28":{"start":{"line":29,"column":19},"end":{"line":37,"column":5}},"29":{"start":{"line":38,"column":23},"end":{"line":43,"column":5}},"30":{"start":{"line":44,"column":24},"end":{"line":44,"column":40}},"31":{"start":{"line":45,"column":27},"end":{"line":45,"column":32}},"32":{"start":{"line":46,"column":28},"end":{"line":46,"column":46}},"33":{"start":{"line":47,"column":31},"end":{"line":47,"column":36}},"34":{"start":{"line":48,"column":4},"end":{"line":51,"column":7}},"35":{"start":{"line":49,"column":21},"end":{"line":49,"column":79}},"36":{"start":{"line":50,"column":8},"end":{"line":50,"column":38}},"37":{"start":{"line":52,"column":4},"end":{"line":55,"column":7}},"38":{"start":{"line":53,"column":21},"end":{"line":53,"column":59}},"39":{"start":{"line":54,"column":8},"end":{"line":54,"column":36}},"40":{"start":{"line":56,"column":4},"end":{"line":60,"column":7}},"41":{"start":{"line":57,"column":8},"end":{"line":57,"column":68}},"42":{"start":{"line":58,"column":21},"end":{"line":58,"column":59}},"43":{"start":{"line":59,"column":8},"end":{"line":59,"column":35}},"44":{"start":{"line":61,"column":4},"end":{"line":63,"column":7}},"45":{"start":{"line":62,"column":21},"end":{"line":62,"column":91}},"46":{"start":{"line":64,"column":4},"end":{"line":67,"column":7}},"47":{"start":{"line":65,"column":21},"end":{"line":65,"column":67}},"48":{"start":{"line":66,"column":8},"end":{"line":66,"column":36}},"49":{"start":{"line":68,"column":4},"end":{"line":72,"column":7}},"50":{"start":{"line":69,"column":8},"end":{"line":69,"column":72}},"51":{"start":{"line":70,"column":21},"end":{"line":70,"column":67}},"52":{"start":{"line":71,"column":8},"end":{"line":71,"column":35}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":5,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":58},"end":{"line":4,"column":59}},"loc":{"start":{"line":4,"column":69},"end":{"line":4,"column":85}},"line":4},"2":{"name":"(anonymous_2)","decl":{"start":{"line":5,"column":6},"end":{"line":5,"column":7}},"loc":{"start":{"line":5,"column":28},"end":{"line":8,"column":1}},"line":5},"3":{"name":"(anonymous_3)","decl":{"start":{"line":9,"column":80},"end":{"line":9,"column":81}},"loc":{"start":{"line":9,"column":95},"end":{"line":11,"column":1}},"line":9},"4":{"name":"(anonymous_4)","decl":{"start":{"line":11,"column":5},"end":{"line":11,"column":6}},"loc":{"start":{"line":11,"column":20},"end":{"line":13,"column":1}},"line":11},"5":{"name":"(anonymous_5)","decl":{"start":{"line":14,"column":50},"end":{"line":14,"column":51}},"loc":{"start":{"line":14,"column":65},"end":{"line":20,"column":1}},"line":14},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":29},"end":{"line":25,"column":30}},"loc":{"start":{"line":25,"column":35},"end":{"line":73,"column":1}},"line":25},"7":{"name":"(anonymous_7)","decl":{"start":{"line":26,"column":11},"end":{"line":26,"column":12}},"loc":{"start":{"line":26,"column":23},"end":{"line":28,"column":5}},"line":26},"8":{"name":"(anonymous_8)","decl":{"start":{"line":48,"column":44},"end":{"line":48,"column":45}},"loc":{"start":{"line":48,"column":56},"end":{"line":51,"column":5}},"line":48},"9":{"name":"(anonymous_9)","decl":{"start":{"line":52,"column":67},"end":{"line":52,"column":68}},"loc":{"start":{"line":52,"column":79},"end":{"line":55,"column":5}},"line":52},"10":{"name":"(anonymous_10)","decl":{"start":{"line":56,"column":71},"end":{"line":56,"column":72}},"loc":{"start":{"line":56,"column":83},"end":{"line":60,"column":5}},"line":56},"11":{"name":"(anonymous_11)","decl":{"start":{"line":61,"column":48},"end":{"line":61,"column":49}},"loc":{"start":{"line":61,"column":60},"end":{"line":63,"column":5}},"line":61},"12":{"name":"(anonymous_12)","decl":{"start":{"line":64,"column":71},"end":{"line":64,"column":72}},"loc":{"start":{"line":64,"column":83},"end":{"line":67,"column":5}},"line":64},"13":{"name":"(anonymous_13)","decl":{"start":{"line":68,"column":75},"end":{"line":68,"column":76}},"loc":{"start":{"line":68,"column":87},"end":{"line":72,"column":5}},"line":68}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":8,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":8,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":5,"column":1}},{"start":{"line":5,"column":6},"end":{"line":8,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"type":"if","locations":[{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},{"start":{"line":6,"column":4},"end":{"line":6,"column":33}}],"line":6},"4":{"loc":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"type":"binary-expr","locations":[{"start":{"line":9,"column":26},"end":{"line":9,"column":30}},{"start":{"line":9,"column":34},"end":{"line":9,"column":57}},{"start":{"line":9,"column":63},"end":{"line":13,"column":1}}],"line":9},"5":{"loc":{"start":{"line":9,"column":63},"end":{"line":13,"column":1}},"type":"cond-expr","locations":[{"start":{"line":9,"column":80},"end":{"line":11,"column":1}},{"start":{"line":11,"column":5},"end":{"line":13,"column":1}}],"line":9},"6":{"loc":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"type":"binary-expr","locations":[{"start":{"line":14,"column":20},"end":{"line":14,"column":24}},{"start":{"line":14,"column":28},"end":{"line":14,"column":45}},{"start":{"line":14,"column":50},"end":{"line":20,"column":1}}],"line":14},"7":{"loc":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},{"start":{"line":15,"column":4},"end":{"line":15,"column":42}}],"line":15},"8":{"loc":{"start":{"line":15,"column":8},"end":{"line":15,"column":29}},"type":"binary-expr","locations":[{"start":{"line":15,"column":8},"end":{"line":15,"column":11}},{"start":{"line":15,"column":15},"end":{"line":15,"column":29}}],"line":15},"9":{"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},{"start":{"line":17,"column":4},"end":{"line":17,"column":141}}],"line":17},"10":{"loc":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},{"start":{"line":17,"column":40},"end":{"line":17,"column":141}}],"line":17},"11":{"loc":{"start":{"line":17,"column":44},"end":{"line":17,"column":107}},"type":"binary-expr","locations":[{"start":{"line":17,"column":44},"end":{"line":17,"column":59}},{"start":{"line":17,"column":63},"end":{"line":17,"column":107}}],"line":17}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1,"9":0,"10":0,"11":1,"12":1,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[1,1,1],"5":[1,0],"6":[1,1,1],"7":[1,0],"8":[1,1],"9":[0,0],"10":[0,0],"11":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/kainingxin/NodeJsWorkplace/auction/src/test/authServiceSpec.ts","sources":["/Users/kainingxin/NodeJsWorkplace/auction/src/test/authServiceSpec.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAEA,qEAAsD;AACtD,+BAA8B;AAC9B,qCAA4D;AAK5D,QAAQ,CAAC,kBAAkB,EAAE,GAAG,EAAE;IAE9B,MAAM,CAAC;QACH,IAAA,wBAAe,GAAE,CAAA;IACrB,CAAC,CAAC,CAAA;IAIF,MAAM,MAAM,GAAU;QAClB,WAAW,EAAE,KAAK;QAClB,UAAU,EAAE,GAAG;QACf,OAAO,EAAE,gBAAgB;QACzB,aAAa,EAAE,YAAY;QAC3B,OAAO,EAAE,aAAa;QACtB,UAAU,EAAE,KAAK;QACjB,KAAK,EAAE,IAAI;KACd,CAAA;IAED,MAAM,UAAU,GAAc;QAC1B,gBAAgB,EAAE,QAAQ;QAC1B,OAAO,EAAE,kBAAkB;QAC3B,UAAU,EAAE,KAAK;QACjB,KAAK,EAAE,IAAI;KACd,CAAA;IAED,MAAM,WAAW,GAAG,gBAAgB,CAAA;IACpC,MAAM,cAAc,GAAG,KAAK,CAAA;IAE5B,MAAM,eAAe,GAAG,kBAAkB,CAAA;IAC1C,MAAM,kBAAkB,GAAG,KAAK,CAAA;IAEhC,EAAE,CAAC,mCAAmC,EAAE,KAAK,IAAI,EAAE;QAC/C,MAAM,IAAI,GAAG,MAAM,WAAW,CAAC,WAAW,CAAC,WAAW,EAAC,cAAc,CAAC,CAAA;QACtE,aAAM,CAAC,SAAS,CAAC,IAAI,CAAC,CAAA;IAC1B,CAAC,CAAC,CAAA;IAEF,EAAE,CAAC,0DAA0D,EAAE,KAAK,IAAI,EAAE;QACtE,MAAM,IAAI,GAAG,MAAM,WAAW,CAAC,YAAY,CAAC,MAAM,CAAC,CAAA;QACnD,aAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAA;IACxB,CAAC,CAAC,CAAA;IAEF,EAAE,CAAC,8DAA8D,EAAE,KAAK,IAAI,EAAE;QAC1E,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,GAAG,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,MAAM,CAAA;QAC3D,MAAM,IAAI,GAAG,MAAM,WAAW,CAAC,YAAY,CAAC,MAAM,CAAC,CAAA;QACnD,aAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAA;IACvB,CAAC,CAAC,CAAA;IAEF,EAAE,CAAC,uCAAuC,EAAE,KAAK,IAAI,EAAE;QACnD,MAAM,IAAI,GAAG,MAAM,WAAW,CAAC,eAAe,CAAC,eAAe,EAAC,kBAAkB,CAAC,CAAA;IAEtF,CAAC,CAAC,CAAA;IAEF,EAAE,CAAC,8DAA8D,EAAE,KAAK,IAAI,EAAE;QAE1E,MAAM,IAAI,GAAG,MAAM,WAAW,CAAC,gBAAgB,CAAC,UAAU,CAAC,CAAA;QAC3D,aAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAA;IAExB,CAAC,CAAC,CAAA;IAEF,EAAE,CAAC,kEAAkE,EAAE,KAAK,IAAI,EAAE;QAC9E,UAAU,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,GAAG,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,MAAM,CAAA;QAE/D,MAAM,IAAI,GAAG,MAAM,WAAW,CAAC,gBAAgB,CAAC,UAAU,CAAC,CAAA;QAC3D,aAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAA;IACvB,CAAC,CAAC,CAAA;AACN,CAAC,CAAC,CAAA","sourcesContent":["import { Auctioneer } from \"../models/auctioneer\";\nimport { Bidder } from \"../models/bidder\";\nimport * as authService from \"../services/authService\"\nimport { assert } from \"chai\";\nimport { dataBaseClose, dataBaseConnect,  } from \"./helper\";\nimport * as fastify from \"fastify\";\nimport * as fs from 'fs';\nimport jwt from 'fastify-jwt';\n\ndescribe(\"authService test\", () => {\n\n    before(function(){\n        dataBaseConnect()\n    })\n\n  \n    \n    const bidder:Bidder = {\n        \"firstName\": \"TOM\",\n        \"lastName\": \"z\",\n        \"email\": \"tomz@gmail.com\",\n        \"dateOfBirth\": \"1993-07-12\",\n        \"phone\": \"+3312342189\",\n        \"password\": \"123\",\n        \"_id\": null\n    }\n\n    const auctioneer:Auctioneer = {\n        \"auctioneerName\": \"admin1\",\n        \"email\": \"admin1@gmail.com\",\n        \"password\": \"123\",\n        \"_id\": null\n    }\n\n    const bidderEmail = \"tomz@gmail.com\"\n    const bidderPassword = \"123\"\n\n    const auctioneerEmail = \"admin1@gmail.com\"\n    const auctioneerPassword = \"123\"\n\n    it(\"when bidder login return not null\" ,async () => {\n        const data = await authService.bidderLogin(bidderEmail,bidderPassword)\n        assert.isNotNull(data)\n    })\n\n    it(\"when bidder sign up with email already exist return null\" ,async () => {\n        const data = await authService.bidderSignup(bidder)\n        assert.isFalse(data)\n    })\n\n    it(\"when bidder sign up with different already exist return null\" ,async () => {\n        bidder.email = Math.random() + \"@\" + Math.random() + \".com\"\n        const data = await authService.bidderSignup(bidder)\n        assert.isTrue(data)\n    })\n\n    it(\"when auctionner login return not null\" ,async () => {\n        const data = await authService.auctioneerLogin(auctioneerEmail,auctioneerPassword)\n    \n    })\n\n    it(\"when auctionner sign up with email already exist return null\" ,async () => {\n      \n        const data = await authService.auctioneerSignup(auctioneer)\n        assert.isFalse(data)\n\n    })\n\n    it(\"when auctionner sign up with different already exist return true\" ,async () => {\n        auctioneer.email = Math.random() + \"@\" + Math.random() + \".com\"\n       \n        const data = await authService.auctioneerSignup(auctioneer)\n        assert.isTrue(data)\n    })\n}) "]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7633955e3add59d85ed42abbb4890fa17fb10be1","contentHash":"7e8a35a311a62c15ef9c9ddd73e43d5b64fdac57b4d9fe62f72778a976f3b0b2"},"/Users/kainingxin/NodeJsWorkplace/auction/src/test/bidderServiceSpec.ts":{"path":"/Users/kainingxin/NodeJsWorkplace/auction/src/test/bidderServiceSpec.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":4},"end":{"line":4,"column":89}},"4":{"start":{"line":4,"column":71},"end":{"line":4,"column":83}},"5":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"6":{"start":{"line":6,"column":26},"end":{"line":6,"column":33}},"7":{"start":{"line":7,"column":4},"end":{"line":7,"column":17}},"8":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"9":{"start":{"line":10,"column":4},"end":{"line":10,"column":72}},"10":{"start":{"line":12,"column":4},"end":{"line":12,"column":21}},"11":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"12":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"13":{"start":{"line":15,"column":31},"end":{"line":15,"column":42}},"14":{"start":{"line":16,"column":17},"end":{"line":16,"column":19}},"15":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"16":{"start":{"line":17,"column":21},"end":{"line":17,"column":141}},"17":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"18":{"start":{"line":17,"column":109},"end":{"line":17,"column":141}},"19":{"start":{"line":18,"column":4},"end":{"line":18,"column":36}},"20":{"start":{"line":19,"column":4},"end":{"line":19,"column":18}},"21":{"start":{"line":21,"column":0},"end":{"line":21,"column":62}},"22":{"start":{"line":22,"column":15},"end":{"line":22,"column":30}},"23":{"start":{"line":23,"column":22},"end":{"line":23,"column":72}},"24":{"start":{"line":24,"column":17},"end":{"line":24,"column":36}},"25":{"start":{"line":25,"column":0},"end":{"line":35,"column":3}},"26":{"start":{"line":26,"column":4},"end":{"line":28,"column":7}},"27":{"start":{"line":27,"column":8},"end":{"line":27,"column":40}},"28":{"start":{"line":29,"column":15},"end":{"line":29,"column":41}},"29":{"start":{"line":30,"column":4},"end":{"line":34,"column":7}},"30":{"start":{"line":31,"column":8},"end":{"line":33,"column":11}},"31":{"start":{"line":32,"column":12},"end":{"line":32,"column":48}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":5,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":58},"end":{"line":4,"column":59}},"loc":{"start":{"line":4,"column":69},"end":{"line":4,"column":85}},"line":4},"2":{"name":"(anonymous_2)","decl":{"start":{"line":5,"column":6},"end":{"line":5,"column":7}},"loc":{"start":{"line":5,"column":28},"end":{"line":8,"column":1}},"line":5},"3":{"name":"(anonymous_3)","decl":{"start":{"line":9,"column":80},"end":{"line":9,"column":81}},"loc":{"start":{"line":9,"column":95},"end":{"line":11,"column":1}},"line":9},"4":{"name":"(anonymous_4)","decl":{"start":{"line":11,"column":5},"end":{"line":11,"column":6}},"loc":{"start":{"line":11,"column":20},"end":{"line":13,"column":1}},"line":11},"5":{"name":"(anonymous_5)","decl":{"start":{"line":14,"column":50},"end":{"line":14,"column":51}},"loc":{"start":{"line":14,"column":65},"end":{"line":20,"column":1}},"line":14},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":31},"end":{"line":25,"column":32}},"loc":{"start":{"line":25,"column":37},"end":{"line":35,"column":1}},"line":25},"7":{"name":"(anonymous_7)","decl":{"start":{"line":26,"column":11},"end":{"line":26,"column":12}},"loc":{"start":{"line":26,"column":23},"end":{"line":28,"column":5}},"line":26},"8":{"name":"(anonymous_8)","decl":{"start":{"line":30,"column":49},"end":{"line":30,"column":50}},"loc":{"start":{"line":30,"column":61},"end":{"line":34,"column":5}},"line":30},"9":{"name":"(anonymous_9)","decl":{"start":{"line":31,"column":45},"end":{"line":31,"column":46}},"loc":{"start":{"line":31,"column":54},"end":{"line":33,"column":9}},"line":31}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":8,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":8,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":5,"column":1}},{"start":{"line":5,"column":6},"end":{"line":8,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"type":"if","locations":[{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},{"start":{"line":6,"column":4},"end":{"line":6,"column":33}}],"line":6},"4":{"loc":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"type":"binary-expr","locations":[{"start":{"line":9,"column":26},"end":{"line":9,"column":30}},{"start":{"line":9,"column":34},"end":{"line":9,"column":57}},{"start":{"line":9,"column":63},"end":{"line":13,"column":1}}],"line":9},"5":{"loc":{"start":{"line":9,"column":63},"end":{"line":13,"column":1}},"type":"cond-expr","locations":[{"start":{"line":9,"column":80},"end":{"line":11,"column":1}},{"start":{"line":11,"column":5},"end":{"line":13,"column":1}}],"line":9},"6":{"loc":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"type":"binary-expr","locations":[{"start":{"line":14,"column":20},"end":{"line":14,"column":24}},{"start":{"line":14,"column":28},"end":{"line":14,"column":45}},{"start":{"line":14,"column":50},"end":{"line":20,"column":1}}],"line":14},"7":{"loc":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},{"start":{"line":15,"column":4},"end":{"line":15,"column":42}}],"line":15},"8":{"loc":{"start":{"line":15,"column":8},"end":{"line":15,"column":29}},"type":"binary-expr","locations":[{"start":{"line":15,"column":8},"end":{"line":15,"column":11}},{"start":{"line":15,"column":15},"end":{"line":15,"column":29}}],"line":15},"9":{"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},{"start":{"line":17,"column":4},"end":{"line":17,"column":141}}],"line":17},"10":{"loc":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},{"start":{"line":17,"column":40},"end":{"line":17,"column":141}}],"line":17},"11":{"loc":{"start":{"line":17,"column":44},"end":{"line":17,"column":107}},"type":"binary-expr","locations":[{"start":{"line":17,"column":44},"end":{"line":17,"column":59}},{"start":{"line":17,"column":63},"end":{"line":17,"column":107}}],"line":17}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1,"9":0,"10":0,"11":1,"12":1,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":1,"7":1,"8":1,"9":1},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[1,1,1],"5":[1,0],"6":[1,1,1],"7":[1,0],"8":[1,1],"9":[0,0],"10":[0,0],"11":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/kainingxin/NodeJsWorkplace/auction/src/test/bidderServiceSpec.ts","sources":["/Users/kainingxin/NodeJsWorkplace/auction/src/test/bidderServiceSpec.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AACA,+BAA8B;AAC9B,yEAA0D;AAC1D,qCAA2C;AAE3C,QAAQ,CAAC,oBAAoB,EAAE,GAAG,EAAE;IAChC,MAAM,CAAC;QACH,IAAA,wBAAe,GAAE,CAAA;IACrB,CAAC,CAAC,CAAA;IAEF,MAAM,EAAE,GAAG,0BAA0B,CAAC;IACtC,EAAE,CAAC,wCAAwC,EAAE,KAAK,IAAI,EAAE;QACpD,aAAa,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;YACzC,IAAA,aAAM,EAAC,KAAK,CAAC,GAAG,IAAE,EAAE,CAAC,CAAA;QACzB,CAAC,CAAC,CAAA;IACN,CAAC,CAAC,CAAA;AACN,CAAC,CAAC,CAAA","sourcesContent":["\nimport { assert } from \"chai\";\nimport * as bidderService from \"../services/bidderService\"\nimport { dataBaseConnect } from \"./helper\";\n\ndescribe(\"bidderService test\", () => {\n    before(function(){\n        dataBaseConnect()\n    })\n\n    const id = \"61f01f3c9268d92b2cd1a3fd\";\n    it(\"when find bidder with id returb 1 item\" ,async () => {\n        bidderService.getBidderById(id).then(value => {\n            assert(value._id==id)\n        })\n    })\n}) "]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"57dfc594eeed77c2bba8a673f92ab892894e57e6","contentHash":"b694ace216d5ec30a92ce03362dcc2e0422f576bd3b56d204169002545ece95f"},"/Users/kainingxin/NodeJsWorkplace/auction/src/test/biddingContollerSpec.ts":{"path":"/Users/kainingxin/NodeJsWorkplace/auction/src/test/biddingContollerSpec.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":4},"end":{"line":4,"column":89}},"4":{"start":{"line":4,"column":71},"end":{"line":4,"column":83}},"5":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"6":{"start":{"line":6,"column":26},"end":{"line":6,"column":33}},"7":{"start":{"line":7,"column":4},"end":{"line":7,"column":17}},"8":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"9":{"start":{"line":10,"column":4},"end":{"line":10,"column":72}},"10":{"start":{"line":12,"column":4},"end":{"line":12,"column":21}},"11":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"12":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"13":{"start":{"line":15,"column":31},"end":{"line":15,"column":42}},"14":{"start":{"line":16,"column":17},"end":{"line":16,"column":19}},"15":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"16":{"start":{"line":17,"column":21},"end":{"line":17,"column":141}},"17":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"18":{"start":{"line":17,"column":109},"end":{"line":17,"column":141}},"19":{"start":{"line":18,"column":4},"end":{"line":18,"column":36}},"20":{"start":{"line":19,"column":4},"end":{"line":19,"column":18}},"21":{"start":{"line":21,"column":0},"end":{"line":21,"column":62}},"22":{"start":{"line":22,"column":18},"end":{"line":22,"column":43}},"23":{"start":{"line":23,"column":15},"end":{"line":23,"column":30}},"24":{"start":{"line":24,"column":20},"end":{"line":24,"column":69}},"25":{"start":{"line":25,"column":0},"end":{"line":39,"column":3}},"26":{"start":{"line":26,"column":4},"end":{"line":38,"column":7}},"27":{"start":{"line":27,"column":22},"end":{"line":29,"column":10}},"28":{"start":{"line":30,"column":21},"end":{"line":30,"column":79}},"29":{"start":{"line":31,"column":8},"end":{"line":37,"column":11}},"30":{"start":{"line":36,"column":12},"end":{"line":36,"column":53}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":5,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":58},"end":{"line":4,"column":59}},"loc":{"start":{"line":4,"column":69},"end":{"line":4,"column":85}},"line":4},"2":{"name":"(anonymous_2)","decl":{"start":{"line":5,"column":6},"end":{"line":5,"column":7}},"loc":{"start":{"line":5,"column":28},"end":{"line":8,"column":1}},"line":5},"3":{"name":"(anonymous_3)","decl":{"start":{"line":9,"column":80},"end":{"line":9,"column":81}},"loc":{"start":{"line":9,"column":95},"end":{"line":11,"column":1}},"line":9},"4":{"name":"(anonymous_4)","decl":{"start":{"line":11,"column":5},"end":{"line":11,"column":6}},"loc":{"start":{"line":11,"column":20},"end":{"line":13,"column":1}},"line":11},"5":{"name":"(anonymous_5)","decl":{"start":{"line":14,"column":50},"end":{"line":14,"column":51}},"loc":{"start":{"line":14,"column":65},"end":{"line":20,"column":1}},"line":14},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":36},"end":{"line":25,"column":37}},"loc":{"start":{"line":25,"column":42},"end":{"line":39,"column":1}},"line":25},"7":{"name":"(anonymous_7)","decl":{"start":{"line":26,"column":75},"end":{"line":26,"column":76}},"loc":{"start":{"line":26,"column":87},"end":{"line":38,"column":5}},"line":26},"8":{"name":"(anonymous_8)","decl":{"start":{"line":35,"column":16},"end":{"line":35,"column":17}},"loc":{"start":{"line":35,"column":23},"end":{"line":37,"column":9}},"line":35}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":8,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":8,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":5,"column":1}},{"start":{"line":5,"column":6},"end":{"line":8,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"type":"if","locations":[{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},{"start":{"line":6,"column":4},"end":{"line":6,"column":33}}],"line":6},"4":{"loc":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"type":"binary-expr","locations":[{"start":{"line":9,"column":26},"end":{"line":9,"column":30}},{"start":{"line":9,"column":34},"end":{"line":9,"column":57}},{"start":{"line":9,"column":63},"end":{"line":13,"column":1}}],"line":9},"5":{"loc":{"start":{"line":9,"column":63},"end":{"line":13,"column":1}},"type":"cond-expr","locations":[{"start":{"line":9,"column":80},"end":{"line":11,"column":1}},{"start":{"line":11,"column":5},"end":{"line":13,"column":1}}],"line":9},"6":{"loc":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"type":"binary-expr","locations":[{"start":{"line":14,"column":20},"end":{"line":14,"column":24}},{"start":{"line":14,"column":28},"end":{"line":14,"column":45}},{"start":{"line":14,"column":50},"end":{"line":20,"column":1}}],"line":14},"7":{"loc":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},{"start":{"line":15,"column":4},"end":{"line":15,"column":42}}],"line":15},"8":{"loc":{"start":{"line":15,"column":8},"end":{"line":15,"column":29}},"type":"binary-expr","locations":[{"start":{"line":15,"column":8},"end":{"line":15,"column":11}},{"start":{"line":15,"column":15},"end":{"line":15,"column":29}}],"line":15},"9":{"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},{"start":{"line":17,"column":4},"end":{"line":17,"column":141}}],"line":17},"10":{"loc":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},{"start":{"line":17,"column":40},"end":{"line":17,"column":141}}],"line":17},"11":{"loc":{"start":{"line":17,"column":44},"end":{"line":17,"column":107}},"type":"binary-expr","locations":[{"start":{"line":17,"column":44},"end":{"line":17,"column":59}},{"start":{"line":17,"column":63},"end":{"line":17,"column":107}}],"line":17}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1,"9":0,"10":0,"11":1,"12":1,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":1,"7":1,"8":1},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[1,1,1],"5":[1,0],"6":[1,1,1],"7":[1,0],"8":[1,1],"9":[0,0],"10":[0,0],"11":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/kainingxin/NodeJsWorkplace/auction/src/test/biddingContollerSpec.ts","sources":["/Users/kainingxin/NodeJsWorkplace/auction/src/test/biddingContollerSpec.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA,4CAAkD;AAElD,+BAA8B;AAC9B,sEAAuD;AAEvD,QAAQ,CAAC,yBAAyB,EAAG,GAAG,EAAE;IAGtC,EAAE,CAAC,kEAAkE,EAAC,KAAK,IAAG,EAAE;QAC5E,MAAM,KAAK,GAAG,MAAM,aAAG,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,IAAI,EAAC,QAAQ,EAAC,QAAQ,EAAC,0BAA0B,EAAC,KAAK,EAAC,gBAAgB,EAAE,EAAE;YAC3G,SAAS,EAAE,KAAK,CAAC,WAAW;SAC/B,CAAC,CAAC;QACH,MAAM,IAAI,GAAG,MAAM,WAAW,CAAC,YAAY,CAAC,0BAA0B,CAAC,CAAA;QACvE,MAAM,aAAG,CAAC,MAAM,CAAC;YACb,MAAM,EAAE,MAAM;YACd,GAAG,EAAE,8EAA+E,IAAI,CAAC,UAAU,GAAG,CAAC,EAAE;YACzG,OAAO,EAAE,EAAC,eAAe,EAAC,KAAK,EAAC;SACnC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;YACV,aAAM,CAAC,KAAK,CAAC,GAAG,CAAC,UAAU,EAAC,GAAG,CAAC,CAAA;QACpC,CAAC,CAAC,CAAA;IACN,CAAC,CAAC,CAAA;AAEN,CAAC,CAAC,CAAA","sourcesContent":["import { startFastify,app } from \"../lib/fastify\";\nimport {dataBaseConnect} from \"./helper\"\nimport { assert } from \"chai\";\nimport * as goodService from \"../services/goodsService\"\n\ndescribe(\"test bidddingController\",  () => {\n    \n\n    it(\"when offer price then the price of good return response code 200\",async ()=>{\n        const token = await app.jwt.sign({ role:'bidder',bidderId:\"61f01f3c9268d92b2cd1a3fd\",email:\"tomz@gmail.com\" }, {\n            expiresIn: 86400 // 24 hours\n        });\n        const good = await goodService.findGoodById(\"61d3559d5d27849028b497c1\")\n        await app.inject({\n            method: 'POST',\n            url: `/v1/bidding/auction/622cc7332b19ff745c9d36bc/good/61d3559d5d27849028b497c1/${ good.finalPrice + 1}`,\n            headers: {'Authorization':token}\n        }).then(rep => {\n            assert.equal(rep.statusCode,200)\n        })\n    })\n\n})\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c3157d0373d60a09f2b8811c83c3fba8149abebb","contentHash":"e7b54e07c08e7be33fb3054b2b9ffba3234850bdcc373ba0e74538ec775552dd"},"/Users/kainingxin/NodeJsWorkplace/auction/src/test/goodControllerSpec.ts":{"path":"/Users/kainingxin/NodeJsWorkplace/auction/src/test/goodControllerSpec.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":18},"end":{"line":3,"column":43}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":30}},"3":{"start":{"line":5,"column":0},"end":{"line":23,"column":3}},"4":{"start":{"line":6,"column":15},"end":{"line":6,"column":41}},"5":{"start":{"line":7,"column":4},"end":{"line":14,"column":7}},"6":{"start":{"line":8,"column":8},"end":{"line":13,"column":11}},"7":{"start":{"line":12,"column":12},"end":{"line":12,"column":53}},"8":{"start":{"line":15,"column":4},"end":{"line":22,"column":7}},"9":{"start":{"line":16,"column":8},"end":{"line":21,"column":11}},"10":{"start":{"line":20,"column":12},"end":{"line":20,"column":53}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":32},"end":{"line":5,"column":33}},"loc":{"start":{"line":5,"column":44},"end":{"line":23,"column":1}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":46},"end":{"line":7,"column":47}},"loc":{"start":{"line":7,"column":58},"end":{"line":14,"column":5}},"line":7},"2":{"name":"(anonymous_2)","decl":{"start":{"line":11,"column":16},"end":{"line":11,"column":17}},"loc":{"start":{"line":11,"column":23},"end":{"line":13,"column":9}},"line":11},"3":{"name":"(anonymous_3)","decl":{"start":{"line":15,"column":46},"end":{"line":15,"column":47}},"loc":{"start":{"line":15,"column":58},"end":{"line":22,"column":5}},"line":15},"4":{"name":"(anonymous_4)","decl":{"start":{"line":19,"column":16},"end":{"line":19,"column":17}},"loc":{"start":{"line":19,"column":23},"end":{"line":21,"column":9}},"line":19}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1},"f":{"0":1,"1":1,"2":1,"3":1,"4":1},"b":{},"inputSourceMap":{"version":3,"file":"/Users/kainingxin/NodeJsWorkplace/auction/src/test/goodControllerSpec.ts","sources":["/Users/kainingxin/NodeJsWorkplace/auction/src/test/goodControllerSpec.ts"],"names":[],"mappings":";;AAAA,4CAAmD;AACnD,+BAA8B;AAK9B,QAAQ,CAAC,qBAAqB,EAAG,KAAK,IAAI,EAAE;IAIxC,MAAM,EAAE,GAAG,0BAA0B,CAAC;IAItC,EAAE,CAAC,qCAAqC,EAAC,KAAK,IAAG,EAAE;QAC/C,MAAM,aAAG,CAAC,MAAM,CAAC;YACb,MAAM,EAAE,KAAK;YACb,GAAG,EAAE,WAAW;SACnB,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;YACV,aAAM,CAAC,KAAK,CAAC,GAAG,CAAC,UAAU,EAAC,GAAG,CAAC,CAAA;QACpC,CAAC,CAAC,CAAA;IACN,CAAC,CAAC,CAAA;IAEF,EAAE,CAAC,qCAAqC,EAAC,KAAK,IAAG,EAAE;QAC/C,MAAM,aAAG,CAAC,MAAM,CAAC;YACb,MAAM,EAAE,KAAK;YACb,GAAG,EAAE,aAAa,EAAE,EAAE;SACzB,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;YACV,aAAM,CAAC,KAAK,CAAC,GAAG,CAAC,UAAU,EAAC,GAAG,CAAC,CAAA;QACpC,CAAC,CAAC,CAAA;IACN,CAAC,CAAC,CAAA;AAMN,CAAC,CAAC,CAAA","sourcesContent":["import { app, startFastify } from \"../lib/fastify\";\nimport { assert } from \"chai\";\nimport { Good } from \"../models/good\";\nimport { Schema } from \"mongoose\";\nimport { dataBaseConnect } from \"./helper\";\n\ndescribe(\"test goodController\",  async () => {\n   \n\n\n    const id = \"61d3559d5d27849028b497c1\";\n\n   \n \n    it(\"when findAllGoods should return 200\",async ()=>{\n        await app.inject({\n            method: 'GET',\n            url: `/v1/goods`\n        }).then(rep => {\n            assert.equal(rep.statusCode,200)\n        })\n    })\n     \n    it(\"when findGoodById should return 200\",async ()=>{\n        await app.inject({\n            method: 'GET',\n            url: `/v1/goods/${id}`\n        }).then(rep => {\n            assert.equal(rep.statusCode,200)\n        })\n    })\n\n\n\n  \n\n})\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a51bfdf8992185418dbdff856096e824902c4e31","contentHash":"b249f1289d663a8ab5e37001b517178e11b5524add39d5277035208b05f81e22"},"/Users/kainingxin/NodeJsWorkplace/auction/src/test/goodServiceSpec.ts":{"path":"/Users/kainingxin/NodeJsWorkplace/auction/src/test/goodServiceSpec.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":4},"end":{"line":4,"column":89}},"4":{"start":{"line":4,"column":71},"end":{"line":4,"column":83}},"5":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"6":{"start":{"line":6,"column":26},"end":{"line":6,"column":33}},"7":{"start":{"line":7,"column":4},"end":{"line":7,"column":17}},"8":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"9":{"start":{"line":10,"column":4},"end":{"line":10,"column":72}},"10":{"start":{"line":12,"column":4},"end":{"line":12,"column":21}},"11":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"12":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"13":{"start":{"line":15,"column":31},"end":{"line":15,"column":42}},"14":{"start":{"line":16,"column":17},"end":{"line":16,"column":19}},"15":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"16":{"start":{"line":17,"column":21},"end":{"line":17,"column":141}},"17":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"18":{"start":{"line":17,"column":109},"end":{"line":17,"column":141}},"19":{"start":{"line":18,"column":4},"end":{"line":18,"column":36}},"20":{"start":{"line":19,"column":4},"end":{"line":19,"column":18}},"21":{"start":{"line":21,"column":0},"end":{"line":21,"column":62}},"22":{"start":{"line":22,"column":19},"end":{"line":22,"column":38}},"23":{"start":{"line":23,"column":20},"end":{"line":23,"column":69}},"24":{"start":{"line":24,"column":15},"end":{"line":24,"column":30}},"25":{"start":{"line":25,"column":17},"end":{"line":25,"column":36}},"26":{"start":{"line":26,"column":0},"end":{"line":60,"column":3}},"27":{"start":{"line":27,"column":4},"end":{"line":29,"column":7}},"28":{"start":{"line":28,"column":8},"end":{"line":28,"column":40}},"29":{"start":{"line":30,"column":17},"end":{"line":39,"column":5}},"30":{"start":{"line":40,"column":15},"end":{"line":40,"column":41}},"31":{"start":{"line":41,"column":4},"end":{"line":45,"column":7}},"32":{"start":{"line":42,"column":8},"end":{"line":44,"column":11}},"33":{"start":{"line":43,"column":12},"end":{"line":43,"column":49}},"34":{"start":{"line":46,"column":4},"end":{"line":48,"column":7}},"35":{"start":{"line":47,"column":8},"end":{"line":47,"column":87}},"36":{"start":{"line":47,"column":51},"end":{"line":47,"column":85}},"37":{"start":{"line":49,"column":4},"end":{"line":52,"column":7}},"38":{"start":{"line":50,"column":8},"end":{"line":50,"column":43}},"39":{"start":{"line":51,"column":8},"end":{"line":51,"column":104}},"40":{"start":{"line":51,"column":59},"end":{"line":51,"column":102}},"41":{"start":{"line":53,"column":4},"end":{"line":55,"column":7}},"42":{"start":{"line":54,"column":8},"end":{"line":54,"column":97}},"43":{"start":{"line":54,"column":53},"end":{"line":54,"column":95}},"44":{"start":{"line":56,"column":4},"end":{"line":59,"column":7}},"45":{"start":{"line":57,"column":8},"end":{"line":57,"column":60}},"46":{"start":{"line":58,"column":8},"end":{"line":58,"column":93}},"47":{"start":{"line":58,"column":48},"end":{"line":58,"column":91}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":5,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":58},"end":{"line":4,"column":59}},"loc":{"start":{"line":4,"column":69},"end":{"line":4,"column":85}},"line":4},"2":{"name":"(anonymous_2)","decl":{"start":{"line":5,"column":6},"end":{"line":5,"column":7}},"loc":{"start":{"line":5,"column":28},"end":{"line":8,"column":1}},"line":5},"3":{"name":"(anonymous_3)","decl":{"start":{"line":9,"column":80},"end":{"line":9,"column":81}},"loc":{"start":{"line":9,"column":95},"end":{"line":11,"column":1}},"line":9},"4":{"name":"(anonymous_4)","decl":{"start":{"line":11,"column":5},"end":{"line":11,"column":6}},"loc":{"start":{"line":11,"column":20},"end":{"line":13,"column":1}},"line":11},"5":{"name":"(anonymous_5)","decl":{"start":{"line":14,"column":50},"end":{"line":14,"column":51}},"loc":{"start":{"line":14,"column":65},"end":{"line":20,"column":1}},"line":14},"6":{"name":"(anonymous_6)","decl":{"start":{"line":26,"column":29},"end":{"line":26,"column":30}},"loc":{"start":{"line":26,"column":35},"end":{"line":60,"column":1}},"line":26},"7":{"name":"(anonymous_7)","decl":{"start":{"line":27,"column":11},"end":{"line":27,"column":12}},"loc":{"start":{"line":27,"column":23},"end":{"line":29,"column":5}},"line":27},"8":{"name":"(anonymous_8)","decl":{"start":{"line":41,"column":50},"end":{"line":41,"column":51}},"loc":{"start":{"line":41,"column":62},"end":{"line":45,"column":5}},"line":41},"9":{"name":"(anonymous_9)","decl":{"start":{"line":42,"column":40},"end":{"line":42,"column":41}},"loc":{"start":{"line":42,"column":49},"end":{"line":44,"column":9}},"line":42},"10":{"name":"(anonymous_10)","decl":{"start":{"line":46,"column":82},"end":{"line":46,"column":83}},"loc":{"start":{"line":46,"column":94},"end":{"line":48,"column":5}},"line":46},"11":{"name":"(anonymous_11)","decl":{"start":{"line":47,"column":42},"end":{"line":47,"column":43}},"loc":{"start":{"line":47,"column":51},"end":{"line":47,"column":85}},"line":47},"12":{"name":"(anonymous_12)","decl":{"start":{"line":49,"column":51},"end":{"line":49,"column":52}},"loc":{"start":{"line":49,"column":63},"end":{"line":52,"column":5}},"line":49},"13":{"name":"(anonymous_13)","decl":{"start":{"line":51,"column":50},"end":{"line":51,"column":51}},"loc":{"start":{"line":51,"column":59},"end":{"line":51,"column":102}},"line":51},"14":{"name":"(anonymous_14)","decl":{"start":{"line":53,"column":51},"end":{"line":53,"column":52}},"loc":{"start":{"line":53,"column":63},"end":{"line":55,"column":5}},"line":53},"15":{"name":"(anonymous_15)","decl":{"start":{"line":54,"column":44},"end":{"line":54,"column":45}},"loc":{"start":{"line":54,"column":53},"end":{"line":54,"column":95}},"line":54},"16":{"name":"(anonymous_16)","decl":{"start":{"line":56,"column":44},"end":{"line":56,"column":45}},"loc":{"start":{"line":56,"column":56},"end":{"line":59,"column":5}},"line":56},"17":{"name":"(anonymous_17)","decl":{"start":{"line":58,"column":39},"end":{"line":58,"column":40}},"loc":{"start":{"line":58,"column":48},"end":{"line":58,"column":91}},"line":58}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":8,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":8,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":5,"column":1}},{"start":{"line":5,"column":6},"end":{"line":8,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"type":"if","locations":[{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},{"start":{"line":6,"column":4},"end":{"line":6,"column":33}}],"line":6},"4":{"loc":{"start":{"line":9,"column":25},"end":{"line":13,"column":2}},"type":"binary-expr","locations":[{"start":{"line":9,"column":26},"end":{"line":9,"column":30}},{"start":{"line":9,"column":34},"end":{"line":9,"column":57}},{"start":{"line":9,"column":63},"end":{"line":13,"column":1}}],"line":9},"5":{"loc":{"start":{"line":9,"column":63},"end":{"line":13,"column":1}},"type":"cond-expr","locations":[{"start":{"line":9,"column":80},"end":{"line":11,"column":1}},{"start":{"line":11,"column":5},"end":{"line":13,"column":1}}],"line":9},"6":{"loc":{"start":{"line":14,"column":19},"end":{"line":20,"column":1}},"type":"binary-expr","locations":[{"start":{"line":14,"column":20},"end":{"line":14,"column":24}},{"start":{"line":14,"column":28},"end":{"line":14,"column":45}},{"start":{"line":14,"column":50},"end":{"line":20,"column":1}}],"line":14},"7":{"loc":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},{"start":{"line":15,"column":4},"end":{"line":15,"column":42}}],"line":15},"8":{"loc":{"start":{"line":15,"column":8},"end":{"line":15,"column":29}},"type":"binary-expr","locations":[{"start":{"line":15,"column":8},"end":{"line":15,"column":11}},{"start":{"line":15,"column":15},"end":{"line":15,"column":29}}],"line":15},"9":{"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":4},"end":{"line":17,"column":141}},{"start":{"line":17,"column":4},"end":{"line":17,"column":141}}],"line":17},"10":{"loc":{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},"type":"if","locations":[{"start":{"line":17,"column":40},"end":{"line":17,"column":141}},{"start":{"line":17,"column":40},"end":{"line":17,"column":141}}],"line":17},"11":{"loc":{"start":{"line":17,"column":44},"end":{"line":17,"column":107}},"type":"binary-expr","locations":[{"start":{"line":17,"column":44},"end":{"line":17,"column":59}},{"start":{"line":17,"column":63},"end":{"line":17,"column":107}}],"line":17}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1,"9":0,"10":0,"11":1,"12":1,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":0},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":0},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[1,1,1],"5":[1,0],"6":[1,1,1],"7":[1,0],"8":[1,1],"9":[0,0],"10":[0,0],"11":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/kainingxin/NodeJsWorkplace/auction/src/test/goodServiceSpec.ts","sources":["/Users/kainingxin/NodeJsWorkplace/auction/src/test/goodServiceSpec.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA,uCAAkC;AAElC,sEAAuD;AACvD,+BAA8B;AAC9B,qCAA2C;AAE3C,QAAQ,CAAC,kBAAkB,EAAE,GAAG,EAAE;IAC9B,MAAM,CAAC;QACH,IAAA,wBAAe,GAAE,CAAA;IACrB,CAAC,CAAC,CAAA;IAEF,MAAM,IAAI,GAAQ;QACd,UAAU,EAAE,UAAU;QACtB,eAAe,EAAE,KAAK;QACtB,cAAc,EAAE,KAAK;QACrB,YAAY,EAAE,CAAC;QACf,UAAU,EAAE,KAAK;QACjB,QAAQ,EAAE,WAAW;QACrB,OAAO,EAAE,IAAI;QACb,GAAG,EAAE,IAAI;KACZ,CAAA;IACD,MAAM,EAAE,GAAG,0BAA0B,CAAC;IACtC,EAAE,CAAC,yCAAyC,EAAC,KAAK,IAAI,EAAE;QACrD,WAAW,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;YACpC,aAAM,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,EAAC,CAAC,CAAC,CAAA;QAChC,CAAC,CAAC,CAAA;IACL,CAAC,CAAC,CAAA;IAEF,EAAE,CAAC,yEAAyE,EAAC,KAAK,IAAI,EAAE;QACpF,WAAW,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,aAAM,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,EAAC,EAAE,CAAC,CAAC,CAAA;IAC1E,CAAC,CAAC,CAAA;IAEF,EAAE,CAAC,0CAA0C,EAAC,KAAK,IAAI,EAAE;QACrD,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,MAAM,EAAE,CAAA;QAClC,WAAW,CAAC,cAAc,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,aAAM,CAAC,KAAK,CAAC,KAAK,CAAC,aAAa,EAAC,CAAC,CAAC,CAAC,CAAA;IAC1F,CAAC,CAAC,CAAA;IAEF,EAAE,CAAC,0CAA0C,EAAC,KAAK,IAAI,EAAE;QAErD,WAAW,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,aAAM,CAAC,KAAK,CAAC,KAAK,CAAC,YAAY,EAAC,CAAC,CAAC,CAAC,CAAA;IACpF,CAAC,CAAC,CAAA;IAEF,EAAE,CAAC,mCAAmC,EAAC,KAAK,IAAI,EAAE;QAC9C,IAAI,CAAC,GAAG,GAAG,IAAI,iBAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAA;QACxC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,aAAM,CAAC,KAAK,CAAC,KAAK,CAAC,aAAa,EAAC,CAAC,CAAC,CAAC,CAAA;IAChF,CAAC,CAAC,CAAA;AACN,CAAC,CAAC,CAAC","sourcesContent":["import { Schema } from \"mongoose\";\nimport { Good } from \"../models/good\";\nimport * as goodService from \"../services/goodsService\"\nimport { assert } from \"chai\";\nimport { dataBaseConnect } from \"./helper\";\n\ndescribe(\"goodService test\", () => {\n    before(function(){\n        dataBaseConnect()\n    })\n\n    const good:Good = {\n        \"goodName\": \"Bmw E530\",\n        \"startingPrice\": 40000,\n        \"reservePrice\": 40000,\n        \"finalPrice\": 0,\n        \"currency\": \"USD\",\n        \"status\": \"available\",\n        \"buyer\": null,\n        _id: null\n    }\n    const id = \"61d352425d27849028b497bf\";\n    it('when findAllGoods should return 2 items',async () => {\n       goodService.findAllGoods().then(value => {\n           assert.equal(value.length,2)\n       })\n    })\n\n    it('when findGoodById with id 61d352425d27849028b497bf should return 1 item',async () => {\n        goodService.findGoodById(id).then(value => assert.equal(value._id,id))\n    })\n    \n    it('when updateGoodById should return 1 item',async () => {\n        good.startingPrice = Math.random()\n        goodService.updateGoodById(id,good).then(value => assert.equal(value.modifiedCount,1))\n    })\n\n    it('when deleteGoodById should return 1 item',async () => {\n\n        goodService.deleteGoodById(id).then(value => assert.equal(value.deletedCount,1))\n    })\n\n    it('when addGood should return 1 item',async () => {\n        good._id = new Schema.Types.ObjectId(id)\n        goodService.addGood(good).then(value => assert.equal(value.modifiedCount,1))\n    })\n});"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"27f78d75c3ad983dd1e948a5f8a28eb847d4f10b","contentHash":"50f4e79cabdc42cbae287191e3bf59cb9c53023b1da33f4dc058939621db5197"}}